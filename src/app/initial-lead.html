<div class="widget-initial-lead-container closeoption" [ngClass]="{successCloseIcon:( initialSuccess && showthankyou) || termsandcondition}">
    <div class="widget-initial-lead">
        <div class="widget-row" *ngIf="termsandcondition == 0">
            <div class="widget-col-md-12">
                <div class="learnFormMobile" *ngIf="(!initialSuccess && device && !showthankyou && !creditEstimator) || !device">
                    <button type="button" class="mD__close posiiton-absolute mandatory_close widget_only_desktop" *ngIf="creditEstimator != true && inwidget_initial_popup == 'M' && (!initialSuccess && !showthankyou) && initalClose" (click)="openbetterEstimateDialog()" aria-label="Close">
                        Exit <span>&times;</span>
                    </button>
                    <button type="button" class="mD__close posiiton-absolute mandatory_close widget_only_mobile" *ngIf="creditEstimator != true && inwidget_initial_popup == 'M' && (!initialSuccess && !showthankyou)" (click)="openbetterEstimateDialog()" aria-label="Close">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 8 8" fill="none">
                            <path
                                d="M7.77295 6.97699C7.87862 7.08266 7.93799 7.22599 7.93799 7.37543C7.93799 7.52487 7.87862 7.66819 7.77295 7.77387C7.66728 7.87954 7.52395 7.9389 7.37451 7.9389C7.22507 7.93891 7.08175 7.87954 6.97607 7.77387L3.99998 4.79683L1.02295 7.77293C0.917276 7.8786 0.773954 7.93797 0.624511 7.93797C0.475068 7.93797 0.331746 7.8786 0.226073 7.77293C0.120401 7.66726 0.0610352 7.52393 0.0610352 7.37449C0.0610352 7.22505 0.120401 7.08173 0.226073 6.97605L3.2031 3.99996L0.227011 1.02293C0.121339 0.917256 0.0619727 0.773934 0.0619727 0.624491C0.0619727 0.475048 0.121339 0.331726 0.227011 0.226054C0.332683 0.120382 0.476005 0.0610155 0.625448 0.0610155C0.774891 0.0610155 0.918214 0.120382 1.02389 0.226054L3.99998 3.20309L6.97701 0.225585C7.08268 0.119913 7.226 0.0605469 7.37545 0.0605469C7.52489 0.0605469 7.66821 0.119913 7.77389 0.225585C7.87956 0.331257 7.93892 0.474579 7.93892 0.624022C7.93892 0.773466 7.87956 0.916788 7.77389 1.02246L4.79685 3.99996L7.77295 6.97699Z"
                                fill="black" />
                        </svg>
                    </button>
                    <button type="button" class="mD__close posiiton-absolute closeIconMob" *ngIf="((creditEstimator != true && inwidget_initial_popup != 'M') ||  (initialSuccess && showthankyou))" (click)="openbetterEstimateDialog()" aria-label="Close">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 8 8" fill="none">
                            <path
                                d="M7.77295 6.97699C7.87862 7.08266 7.93799 7.22599 7.93799 7.37543C7.93799 7.52487 7.87862 7.66819 7.77295 7.77387C7.66728 7.87954 7.52395 7.9389 7.37451 7.9389C7.22507 7.93891 7.08175 7.87954 6.97607 7.77387L3.99998 4.79683L1.02295 7.77293C0.917276 7.8786 0.773954 7.93797 0.624511 7.93797C0.475068 7.93797 0.331746 7.8786 0.226073 7.77293C0.120401 7.66726 0.0610352 7.52393 0.0610352 7.37449C0.0610352 7.22505 0.120401 7.08173 0.226073 6.97605L3.2031 3.99996L0.227011 1.02293C0.121339 0.917256 0.0619727 0.773934 0.0619727 0.624491C0.0619727 0.475048 0.121339 0.331726 0.227011 0.226054C0.332683 0.120382 0.476005 0.0610155 0.625448 0.0610155C0.774891 0.0610155 0.918214 0.120382 1.02389 0.226054L3.99998 3.20309L6.97701 0.225585C7.08268 0.119913 7.226 0.0605469 7.37545 0.0605469C7.52489 0.0605469 7.66821 0.119913 7.77389 0.225585C7.87956 0.331257 7.93892 0.474579 7.93892 0.624022C7.93892 0.773466 7.87956 0.916788 7.77389 1.02246L4.79685 3.99996L7.77295 6.97699Z"
                                fill="black" />
                        </svg>
                    </button>
                    <div class="widget-inital-lead-form-content " *ngIf="!initialSuccess && !showthankyou && !creditEstimator">
                        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
                            <div class="widget-row">
                                <div class="widget-col-12 ">
                                    <h1 class="widget-initial-lead-h1" *ngIf="dealercode.toString() == 27013"><span>Explore your payments and Save your deal&nbsp;</span>{{model}}</h1>
                                    <h1 class="widget-initial-lead-h1" *ngIf="dealercode.toString() != 27013"><span>Learn more about&nbsp;</span>{{model}}</h1>
                                    <p *ngIf="dealercode == 68757" class="widget-initial-lead-p">Complete this form to save your payment details and save you time when you visit the showroom.</p>
                                    <p *ngIf="dealercode == 27177" class="widget-initial-lead-p">Complete this form to save your work and unlock payment details.</p>
                                    <p *ngIf="dealercode == 45729" class="widget-initial-lead-p">Complete this form to view your payment options and save your work.</p> 
                                    <p *ngIf="dealerBC == 'F' && (dealercode != 68757 && dealercode != 27177 && dealercode != 45729)" class="widget-initial-lead-p">Fill out this form to view and customize your payments.</p>
                                    <p *ngIf="dealerBC != 'F' && dealercode != 27177 && dealercode !=68757 && dealercode != 45729 " class="widget-initial-lead-p">Fill out the form to explore all the specs and features of your next vehicle.</p>
                                </div>
                            </div>
                            <div class="widget-row widget-inital-lead-form">
                                <div class="widget-col-12 widget-col-md-6">
                                    <label class="widget-inital-lead-form-label" for="firstName">First Name *</label>
                                    <mat-form-field class="widget_text_input" appearance="outline">
                                        <input #firstNameInput type="text" aria-label="First Name" formControlName="firstName" (keypress)="validateInput($event);" (keyup)="initialevent();" placeholder="Enter your first name" class="inputField" [ngClass]="{ 'is-invalid': submitted && f.firstName.errors }" matInput>
                                        <mat-error *ngIf="submitted && f.firstName.errors && f.firstName.errors?.required" class="invalid-feedback">First Name is required</mat-error>
                                        <mat-error *ngIf="(f.firstName.errors?.pattern || f.firstName.errors?.atLeastOneAlphabet) &&  f.firstName.errors?.required != true" class="invalid-feedback">Enter a valid
                                            First Name
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="widget-col-12 widget-col-md-6">
                                    <label class="widget-inital-lead-form-label" for="lastName">Last Name *</label>
                                    <mat-form-field class="widget_text_input" appearance="outline">
                                        <input type="text" aria-label="Last Name" formControlName="lastName" (keypress)="validateInput($event);" (keyup)="initialevent();" placeholder="Enter your last name" class="inputField" [ngClass]="{ 'is-invalid': submitted && f.lastName.errors }" matInput />
                                        <mat-error *ngIf="submitted && f.lastName.errors && f.lastName.errors?.required" class="invalid-feedback">Last Name is required</mat-error>
                                        <mat-error *ngIf="(f.lastName.errors?.pattern || f.lastName.errors?.atLeastOneAlphabet) &&  f.lastName.errors?.required != true" class="invalid-feedback">Enter a valid
                                            Last Name
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="widget-col-12 widget-col-md-6">
                                    <label class="widget-inital-lead-form-label" for="zipCode">ZIP Code *</label>
                                    <mat-form-field class="widget_text_input" appearance="outline">
                                        <input type="text" maxlength="5" minlength="5" aria-label="zipCode" formControlName="zipCode" class="inputField" (keyup)="initialevent();validateZipcode($event)" placeholder="ZIP Code" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" matInput />
                                        <mat-error *ngIf="submitted && f.zipCode.errors && f.zipCode.errors?.required" class="invalid-feedback">
                                            ZIP Code is required
                                        </mat-error>
                                        <mat-error *ngIf="f.zipCode.errors?.pattern || f.zipCode.errors?.maxlength || f.zipCode.errors?.minlength" class="invalid-feedback">Enter a valid ZIP Code
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="widget-col-12 widget-col-md-6">
                                    <label class="widget-inital-lead-form-label" for="phonenumber">Phone Number <span *ngIf="mandatoryphone == 'Y'" class="req">*</span></label>
                                    
                                  <mat-form-field class="widget_text_input" appearance="outline">
  <input
    matInput
    formControlName="phonenumber"
    aria-label="Phone Number"
    placeholder="+1"
    class="inputField"
    (keypress)="keyPress($event)"
  />

  
  <mat-error *ngIf="f.phonenumber.errors?.invalidFirstDigit">
    Phone number must not start with 0 or 1.
  </mat-error>


  <mat-error
    *ngIf="!f.phonenumber.errors?.invalidFirstDigit &&
            (f.phonenumber.errors?.pattern ||
             f.phonenumber.errors?.minlength ||
             f.phonenumber.errors?.maxlength ||
             f.phonenumber.errors?.exactLength)">
    Enter a valid phone number.
  </mat-error>


  <mat-error *ngIf="mandatoryphone === 'Y' && f.phonenumber.errors?.required">
    Phone number is required.
  </mat-error>
</mat-form-field>


                                </div>
                                <div class="widget-col-12 widget-col-md-12">
                                    <label class="widget-inital-lead-form-label" for="phonenumber">Email Address *</label>
                                    <mat-form-field class="widget_text_input" appearance="outline">
                                        <input type="email" aria-label="Email" formControlName="email" class="inputField" (keyup)="initialevent();" placeholder="i.e youremail@email.com" [ngClass]="{ 'is-invalid': submitted && f.email.errors }" pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$" matInput />
                                        <mat-error *ngIf="submitted && f.email.errors && f.email.errors?.required" class="invalid-feedback">
                                            Email is required
                                        </mat-error>
                                        <mat-error *ngIf="f.email.errors?.pattern" class="invalid-feedback">Enter a valid
                                            email
                                        </mat-error>
                                    </mat-form-field>
                                </div>


                                <div class="terms-conditions">
                                    <mat-checkbox disableRipple [ngClass]="{ 'is-invalid': submitted && f.Termsandcondition.errors }" formControlName="Termsandcondition" id="Termsandcondition">
                                        <label for="acceptTerms" class="form-check-terms terms_lable" (click)="fntermsandcondition()" style="text-decoration: underline;">Terms and Conditions</label></mat-checkbox>
                                    <mat-error *ngIf="submitted && f.Termsandcondition.errors && f.Termsandcondition.errors?.required" class="invalid-feedback" style="margin-left:14px">Please read and accept Terms and
                                        Conditions</mat-error>
                                </div>
                            </div>
                            <div class="row row-5" *ngIf="inwidget_initial_popup != 'M'">
                                <div class="col-md-12">
                                    <button class="btn submitbtn submitLead" type="submit"> Submit </button>
                                </div>
                            </div>
                            <button *ngIf="inwidget_initial_popup == 'M'" class="btn-block submitbtn submitLead" type="submit">
                                Submit
                            </button>
                        </form>
                    </div>
                </div>
                <div id="initialSuccess" class="showThis widget-container" *ngIf="initialSuccess == false && showthankyou == false && creditEstimator == true">
                    <div class="check_credit_container">
                        <h3 class="creditPopup_title">Credit Estimator
                            <span> <img src="https://d1jougtdqdwy1v.cloudfront.net/dealeradmin/images/inwidget_redesign.svg" alt="" id="makeImgPrequal"></span>
                        </h3>
                        <div class="widget-row">
                            <div class="widget-col-md-4">
                                <img alt="vehicle image" src="https://d1jougtdqdwy1v.cloudfront.net/images/Speedometer_nonum.svg" class="credit_meter">
                            </div>
                            <div class="widget-col-md-8">
                                <div class="widget-row">
                                    <p class="submitDealerContent_title">Would you like to check your credit score?</p>
                                    <p class="submitDealerContent_sub_title">This will not impact your credit score</p>
                                    <div class="credit_btn_container">
                                        <button class="widget-btn widget-btn-secondary widget-btn-block credit_btn  credit_btn_secondary" (click)="closepop('no')" type="button" mat-button>NO</button>
                                        <button class="widget-btn widget-btn-primary widget-btn-block credit_btn credit_btn_primary" (click)="openPrequalDialog('prompt-yes')" mat-button>YES</button>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div id="initialSuccess" class="showThis widget-container thankyouPopup" *ngIf="initialSuccess == true && showthankyou == true">
                    <div class="row">
                        <div class="col-md-12">
                            <svg width="46" height="46" viewBox="0 0 46 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g id="check-one">
                                    <g id="Group">
                                        <path id="Vector" d="M23 41.75C28.1776 41.75 32.8651 39.6513 36.2582 36.2582C39.6513 32.8651 41.75 28.1776 41.75 23C41.75 17.8224 39.6513 13.1349 36.2582 9.74174C32.8651 6.34867 28.1776 4.25 23 4.25C17.8224 4.25 13.1349 6.34867 9.74174 9.74174C6.34867 13.1349 4.25 17.8224 4.25 23C4.25 28.1776 6.34867 32.8651 9.74174 36.2582C13.1349 39.6513 17.8224 41.75 23 41.75Z" fill="#189345" />
                                        <path id="Vector_2" d="M14.5 23L20.125 28.625L31.375 17.375" stroke="white" stroke-width="5.33333" stroke-linecap="round" stroke-linejoin="round" />
                                    </g>
                                </g>
                            </svg>

                            <span class="widget-initialSuccess-heading">
                                Thanks, {{this.registerForm.value["firstName"]}} {{this.registerForm.value["lastName"]}}!
                            </span>
                            <span class="widget-initialSuccess-p">
                                A specialist will reach out soon to assist you with any questions and help you choose your next car.
                            </span>
                            <button class="btn-block submitbtn" type="submit" (click)="openPrequalDialog('form-confirmation')">PRE-QUALIFY NOW</button>
                            <button class="btn-block submitbtn" type="submit" (click)="closepop('continue')">Continue shopping</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="terms_condition" *ngIf="termsandcondition == 1" class="leadTerms">
        <div class="widget-container">
            <button type="button" class="mD__close close_btn_spacing position-absolute" id="terms_close_btn" role="Close" (click)="closetermsandcondition()" aria-label="Close">
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 8 8" fill="none">
                    <path d="M7.77295 6.97699C7.87862 7.08266 7.93799 7.22599 7.93799 7.37543C7.93799 7.52487 7.87862 7.66819 7.77295 7.77387C7.66728 7.87954 7.52395 7.9389 7.37451 7.9389C7.22507 7.93891 7.08175 7.87954 6.97607 7.77387L3.99998 4.79683L1.02295 7.77293C0.917276 7.8786 0.773954 7.93797 0.624511 7.93797C0.475068 7.93797 0.331746 7.8786 0.226073 7.77293C0.120401 7.66726 0.0610352 7.52393 0.0610352 7.37449C0.0610352 7.22505 0.120401 7.08173 0.226073 6.97605L3.2031 3.99996L0.227011 1.02293C0.121339 0.917256 0.0619727 0.773934 0.0619727 0.624491C0.0619727 0.475048 0.121339 0.331726 0.227011 0.226054C0.332683 0.120382 0.476005 0.0610155 0.625448 0.0610155C0.774891 0.0610155 0.918214 0.120382 1.02389 0.226054L3.99998 3.20309L6.97701 0.225585C7.08268 0.119913 7.226 0.0605469 7.37545 0.0605469C7.52489 0.0605469 7.66821 0.119913 7.77389 0.225585C7.87956 0.331257 7.93892 0.474579 7.93892 0.624022C7.93892 0.773466 7.87956 0.916788 7.77389 1.02246L4.79685 3.99996L7.77295 6.97699Z"
                        fill="black" />
                </svg>
            </button>
            <h4 class="widget-text-center">TERMS AND CONDITIONS</h4>
            <p class="initial_disclaimer" *ngIf="dealercode.toString() != '60490'">
                FCA US LLC does not intentionally market to children under
                {{disclaimerAge}} old. By submitting this request, you are confirming you
                are {{disclaimerAge}} of age or older. FCA US LLC understands the
                importance of your online privacy. By submitting your email, you agree to
                receive email communication. By submitting your mobile phone number, you
                also acknowledge that FCA US LLC or its parent, subsidiary or affiliated
                companies or one of their authorized dealers or representatives may send
                you commercial text messages. Such contact may use automated technology.
                You consent and agree to that type of contact and more generally to the
                FCA US LLC online privacy policy when you submit your registration.
                Standard text message and data rates may apply. You can opt out at any
                time. Text STOP to opt-out after receiving text communications. You are
                not required to agree to this as a condition of purchasing any property,
                goods, or services.
            </p>
            <p class="initial_disclaimer" *ngIf="dealercode.toString() == '60490'">
                By checking the box, you consent to our dealership using automatic telephone dialing systems to call and/or send you periodic SMS (text) marketing messages to the number you have provided. You do not have to consent in order to obtain any of our products or services. You may opt-out by texting 'STOP' or reply HELP for additional messaging help. Message and data rates may apply.
            </p>

            <div class="widget-text-center">
                <button mat-button class="widget_payment-btn widget_submit-button" (click)="closetermsandcondition('back')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M14.7071 5.79289C15.0976 6.18342 15.0976 6.81658 14.7071 7.20711L9.41421 12.5L14.7071 17.7929C15.0976 18.1834 15.0976 18.8166 14.7071 19.2071C14.3166 19.5976 13.6834 19.5976 13.2929 19.2071L7.29289 13.2071C6.90237 12.8166 6.90237 12.1834 7.29289 11.7929L13.2929 5.79289C13.6834 5.40237 14.3166 5.40237 14.7071 5.79289Z" fill="black" />
                    </svg> Back
                </button>
            </div>
        </div>
    </div>
</div>