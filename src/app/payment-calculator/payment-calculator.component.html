<!--  PAYMENT CALCULATOR for Mobile STARTS -->
<div id="widgetPaymentCalculator" *ngIf="isMobileScreen">
    <div class="widget_modal_content">
        <div class="widget_pay_calc_header">
            <button *ngIf="hideCash || hideCash === undefined || hideCash === null" id="closeCalculator" class="mD__close position-absolute" aria-label="Close" (click)="closePopup()">
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 8 8" fill="none">
                    <path d="M7.77295 6.97699C7.87862 7.08266 7.93799 7.22599 7.93799 7.37543C7.93799 7.52487 7.87862 7.66819 7.77295 7.77387C7.66728 7.87954 7.52395 7.9389 7.37451 7.9389C7.22507 7.93891 7.08175 7.87954 6.97607 7.77387L3.99998 4.79683L1.02295 7.77293C0.917276 7.8786 0.773954 7.93797 0.624511 7.93797C0.475068 7.93797 0.331746 7.8786 0.226073 7.77293C0.120401 7.66726 0.0610352 7.52393 0.0610352 7.37449C0.0610352 7.22505 0.120401 7.08173 0.226073 6.97605L3.2031 3.99996L0.227011 1.02293C0.121339 0.917256 0.0619727 0.773934 0.0619727 0.624491C0.0619727 0.475048 0.121339 0.331726 0.227011 0.226054C0.332683 0.120382 0.476005 0.0610155 0.625448 0.0610155C0.774891 0.0610155 0.918214 0.120382 1.02389 0.226054L3.99998 3.20309L6.97701 0.225585C7.08268 0.119913 7.226 0.0605469 7.37545 0.0605469C7.52489 0.0605469 7.66821 0.119913 7.77389 0.225585C7.87956 0.331257 7.93892 0.474579 7.93892 0.624022C7.93892 0.773466 7.87956 0.916788 7.77389 1.02246L4.79685 3.99996L7.77295 6.97699Z"
                        fill="black" />
                </svg>
            </button>
            <h3 class="payment-heading">Payment Estimator</h3>
        </div>

        <div class="widget_popup_payment_tabs" role="tablist">
            <div class="widget_purchase-options">
                <mat-button-toggle-group [value]="activeTab" (valueChange)="paymentSelctionChange($event)" name="payType" aria-label="Pay Type">
                    <mat-button-toggle *ngIf="vehicle_type == 'new' && leaseResponseAvailable" value="lease" (click)="leasetabga4()">Lease</mat-button-toggle>
                    <mat-button-toggle *ngIf="finaceResponseAvailable" value="finance" (click)="financetabga4()">Finance</mat-button-toggle>
                    <mat-button-toggle value="cash" *ngIf="hideCash || hideCash === undefined || hideCash === null" (click)="cashtabga4()">Cash</mat-button-toggle>
                </mat-button-toggle-group>
            </div>

            <!-- LEASE PAYMENT CALCULATOR STARTS -->
            <div id="widget_popup_payment_tabs_lease" *ngIf="activeTab == 'lease' && vehicle_type=='new' && leaseResponseAvailable" class="widget_popup_payment_tab-pane active" role="tabpanel" aria-labelledby="widget_popup_payment_tabs_btn_lease">
                <!-- <h2 class="widget_popup_payment_amount">$456<span class="widget_popup_payment_amount_parameter">/mo<sup>*</sup></span></h2>
                <h3 class="widget_popup_payment_amount_condition">Excluding taxes and fees</h3> -->

                <div *ngIf="leasedetails && leasedetails.status == 200">
                    <div class="widget_payment_term_duration_section">
                        <div class="widget-row">
                            <div class="widget-col-12 widget_payment_term_duration_bar">
                                <div class="widget_payment_term_duration_radio-toolbar">
                                    <!-- <mat-chip-listbox class="mat-chip-grid" aria-label="Cutest dog breeds" [disabled]="isChipListDisabled" name="terms_lease" id="terms_lease" (change)="onCheckboxChange_lease($event, 2, 0, '', 'term', '' , 'lengthofLoan')" (click)="shiftdigitalevent()">
                                        <mat-chip-option style="text-align:center" *ngFor="let terms of leasedetails.payload_calculation.terms_list" [value]="terms" [selected]="terms == defaultterm">
                                            {{terms}} <br><span>months</span>
                                        </mat-chip-option>
                                    </mat-chip-listbox> -->

                                    <mat-chip-listbox class="mat-chip-grid" name="terms_lease" id="terms_lease" [disabled]="isChipListDisabled" [ngModel]="defaultterm" (ngModelChange)="onCheckboxChange_lease($event, 2, 0, '', 'term', '' , 'lengthofLoan')" (click)="shiftdigitalevent()">
                                        <mat-chip-option style="text-align:center" *ngFor="let terms of leasedetails?.payload_calculation?.terms_list" [value]="terms" [selected]="defaultterm === terms" [ngClass]="{ 'chip-background-color': terms === defaultterm }">
                                            {{ terms }} <br /><span>months</span>
                                        </mat-chip-option>
                                    </mat-chip-listbox>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="widget_popup_payment_summarise">
                        <div class="price-details">Price Details</div>
                        <!-- Price -->
                        <div class="payment-form-row disp-block">
                            <!-- VAuto -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="has_vauto_dlr_disc && msrp_vin_details != vauto_list_price && vauto_list_price != ''  && (vauto_upfit == undefined || vauto_upfit == '')">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </div>
                                <div class="payOpt__bill__value">{{vauto_list_price| currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>
                            <!-- (click)="dropdownToggle(upfitDropdownVauto,1,'','', 'upfitDropdownVauto_drop')"-->
                            <div class="payOpt__bill payOpt__bill__listprice payOpt__bill--dropdown" *ngIf="has_vauto_dlr_disc && vauto_list_price != '' && vauto_upfit != undefined && vauto_upfit != '' && msrp_vin_details != vauto_list_price && msrp_vin_details != vauto_price_wo_incentive">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                    <!-- <span class="payOpt__bill__includes">Includes MSRP, Upfits and Dealer fees</span> -->
                                </div>
                                <div class="payOpt__bill__value">{{vauto_list_price| currency:'USD':'symbol':'1.0-0'}}</div>
                                <!-- <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></span> -->
                            </div>
                            <!-- <div class="upfitDropdownVauto_drop payOpt__dropContent_wrap payOpt__dropContent_upfit closeIt" #upfitDropdownVauto>
                                <div class="payOpt__dropContent payOpt__bill__listprice">
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">MSRP<span>{{vin_msrp |
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">Upfits<span>{{vauto_upfit |
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                </div>
                            </div> -->

                            <!-- Lease Autonation -->
                            <div class="payOpt__bill__listprice" *ngIf="is_autoNation_vin == 'Y' && autoNation_listPrice != '' && autoNation_listPrice != undefined && autoNation_listPrice != null && msrp_vin_details != autoNation_listPrice">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </div>
                                <div class="payOpt__bill__value">{{autoNation_listPrice| currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>

                            <!-- Max Digital -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="has_max_digital_dlr_disc && !has_vauto_dlr_disc && vin_msrp != max_list_price">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </div>
                                <div class="payOpt__bill__value">{{max_list_price | currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>

                            <!-- Ferrario -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="this.ferrario_list_price != undefined && this.ferrario_list_price != '' && vin_msrp != ferrario_list_price">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </div>
                                <div class="payOpt__bill__value">{{ferrario_list_price | currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>

                            <!-- DAT List Price-->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="leaseupfitflag == 1 && leaseupfitstype =='L' && !has_max_digital_dlr_disc ">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">List Price<span class="disclaimerTooltip__star" *ngIf="leaseupfitsdisclaimer !=''">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="leaseupfitsdisclaimer !=''">
                                            <p class="disclaimerTooltip__msg">{{leaseupfitsdisclaimer}}</p>
                                        </div>
                                    </div>
                                    <span class="payOpt__bill__includes" *ngIf="leaseupfitslabel !=''">{{leaseupfitslabel}}</span>
                                    <span class="payOpt__bill__includes" *ngIf="leaseupfitslabel =='' || !leaseupfitslabel || leaseupfitslabel == null">Includes
                                        MSRP, Upfits and Dealer fees</span>
                                </div>
                                <div class="payOpt__bill__value">{{msrp| currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>

                            <!-- DAT upfit-->
                            <!-- (click)="dropdownToggle(upfitDropdown,1,'','', 'upfitDropdown_drop')" &&  leaseupfitstype =='U' -->
                            <div class="payOpt__bill payOpt__bill__listprice payOpt__bill--dropdown" *ngIf="(leaseupfitflag == 1 || discounttotal > 0) && !has_max_digital_dlr_disc && !has_vauto_dlr_disc && msrp != msrp_vin_details  && !(is_autoNation_vin == 'Y' && autoNation_listPrice != '' && autoNation_listPrice != undefined && autoNation_listPrice != null && msrp_vin_details != autoNation_listPrice)">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">List Price
                                        <span class="disclaimerTooltip__star" *ngIf="dat_leaseupfitsdisclaimer !=''">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="dat_leaseupfitsdisclaimer !=''">
                                            <p class="disclaimerTooltip__msg">{{dat_leaseupfitsdisclaimer}}</p>
                                        </div>
                                    </div>
                                    <span class="payOpt__bill__includes" *ngIf="leaseupfitslabel !=''">{{leaseupfitslabel}}</span>
                                    <span class="payOpt__bill__includes" *ngIf="leaseupfitslabel =='' || !leaseupfitslabel || leaseupfitslabel == null">Includes MSRP, Upfits and
                                        Dealer fees</span>
                                </div>
                                <div class="payOpt__bill__value">{{msrp| currency:'USD':'symbol':'1.0-0'}}</div>
                                <!-- <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></span> -->
                            </div>
                            <!-- <div class="upfitDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_upfit closeIt" #upfitDropdown>
                                <div class="payOpt__dropContent " *ngIf="leaseupfitflag == 1">
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">MSRP<span>{{msrp_vin_details|
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">Upfits<span>{{leaseupfitamount|
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                        <div class="payOpt__checkItem__content" *ngFor="let leaseupfit of leaseupfits">
                                            <label class="customCheckbox">
                                                <span class="customCheckbox_name" id="">{{leaseupfit.description}}</span>
                                                <i class="disclaimer_bubble" data-title="{{leaseupfit.disclaimer}}" *ngIf="leaseupfit.disclaimer != ''">i</i>
                                            </label>
                                            <div class="payOpt__checkItem__price">{{leaseupfit.total_price}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div> -->

                            <!-- MSRP & VAuto MSRP-->
                            <div class="payOpt__bill widget_mb_20" *ngIf="leaseupfitflag == 0">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">MSRP<span class="disclaimerTooltip__star" *ngIf="leasemsrpdisclaimer != null">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="leasemsrpdisclaimer != null">
                                            <p class="disclaimerTooltip__msg" [innerHTML]="leasemsrpdisclaimer"></p>
                                        </div>
                                    </div>
                                    (Sticker Price)
                                </div>
                                <div class="payOpt__bill__value" *ngIf="(max_list_price == '' || max_list_price == undefined) && (vauto_list_price == '' || vauto_list_price == undefined)&& (ferrario_list_price == '' || ferrario_list_price == undefined) && (autoNation_listPrice == '' || autoNation_listPrice == undefined)">{{vin_msrp|
                                    currency:'USD':'symbol':'1.0-0'}}</div>
                                <div class="payOpt__bill__value" *ngIf="(max_list_price != '' && max_list_price != undefined) || (vauto_list_price != '' && vauto_list_price != undefined)|| (ferrario_list_price != '' && ferrario_list_price != undefined) || (autoNation_listPrice != '' && autoNation_listPrice != undefined)">{{msrp|
                                    currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>
                            <div class="payOpt__bill widget_mb_20" *ngIf="leaseupfitflag != 0 && !has_max_digital_dlr_disc ">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">MSRP<span class="disclaimerTooltip__star">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip">
                                            <p class="disclaimerTooltip__msg" [innerHTML]="leasemsrpdisclaimer"></p>
                                        </div>
                                    </div>
                                    (Sticker Price)
                                </div>
                                <div class="payOpt__bill__value">{{msrp_vin_details| currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>

                            <!-- vAuto Upfit -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="vauto_list_price == '' && vauto_upfit != undefined && vauto_upfit != ''">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">Upfits</div>
                                </div>
                                <div class="payOpt__bill__value">{{vauto_upfit | currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>
                        </div>


                        <!-- <div class="form-group">
                            <label for="zipcode" class="calc-label">Enter ZIP Code</label>
                            <input aria-hidden="true" name="zipcode" id="zipcode" (change)="invokepupulation($event)" 
                                maxlength="5" minlength="4" class="dropdown-calc" value="{{zipcode}}"
                                />
                            <span class="error" *ngIf="error==1">Please enter valid zipcode</span>
                        </div> -->
                        <div class="" *ngIf="(customerzipcode !='' || zipcode !='') && leasetaxfeestotal > 0 ">
                            <mat-form-field appearance="outline" style="width: 100%;" class="mat-mdc-form-field-infix">
                                <mat-label> Enter ZIP Code</mat-label>
                                <input name="zipcode" id="zipcode" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" (change)="invokepupulation($event)" maxlength="5" minlength="4" class="dropdown-calc" value="{{zipcode}}" matInput>
                                <!-- <mat-error class="error invalid-feedback" *ngIf="error==1">Please enter valid zipcode</mat-error> -->
                            </mat-form-field>
                            <span class="error error-zip" style="color:red;font-size:12px" *ngIf="error==1">Please enter valid ZIP Code </span>
                        </div>

                        <div class="payment-form-row" *ngIf="countycitylist?.length > 0 && (customerzipcode !='' || zipcode !='') && leasetaxfeestotal > 0 && error == 0 " style="margin-top:-15px">
                            <div class="payment-input-fields">
                                <mat-form-field appearance="outline" style="width: 100%;">
                                    <mat-label>Select your County & City</mat-label>
                                    <mat-select class="dropdown-calc" name="countycity" id="countycity" [(value)]="selectedCountyCity" (selectionChange)="onDropdownChange($event)">
                                        <mat-option *ngFor="let data of countycitylist" [value]="data.county_city">
                                            {{data.county_city}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>


                        <!-- <div  *ngIf="countycitylist?.length > 0 && (customerzipcode !='' || zipcode !='') && leasetaxfeestotal > 0">
                    <div class="form-group">
                        <label class="calc-label">Select your County & City</label>
                        <select class="dropdown-calc" name="countycity" id="countycity" (change)="onDropdownChange($event)">
                            <option *ngFor="let data of countycitylist" value="{{data.county_city}}">
                                {{data.county_city}} </option>
                        </select>
                    </div>
                </div> -->

                        <!-- <div class="payment-form-row widget_mt_23">
                            <div class="payment-input-fields">
                                <mat-form-field appearance="outline" style="width: 100%;" class="mat-mdc-form-field-infix">
                                    <mat-label> Down Payment({{leasedownpaymentper}}%)</mat-label>
                                    <input name="leasedown" id="down_payment_lease" type="text" [disabled]="lease_lock == 0" [(ngModel)]="leasedownpayment_disp" (focus)="clearIfZero($event,'downpay')" (blur)="resetIfEmpty($event,'downpay')" maxlength="6" (change)="onCheckboxChange_lease($event, 1, 0, 'downpay')" (click)="shiftdigitalevent()" (keypress)="keyPressDn($event)" matInput (input)="validateNumericInput($event)">
                                </mat-form-field>
                                <span class="error error-zip" style="color:red;font-size:12px" *ngIf="showleasedownpaymenterror">Dealer requests a minimum {{minimumDownPercent}}% down payment.</span>
                            </div>
                        </div> -->

                        <div class="payment-form-row widget_mt_23">
                            <div class="payment-input-fields">
                                <mat-form-field appearance="outline" style="width: 100%;" class="mat-mdc-form-field-infix">
                                    <mat-label> Down Payment({{leasedownpaymentper}}%)</mat-label>
                                    <input name="leasedown" id="down_payment_lease" type="text" (focus)="clearIfZero($event,'downpay')" (blur)="resetIfEmpty($event,'downpay')" [disabled]="lease_lock == 0" [(ngModel)]="leasedownpayment_disp" maxlength="6" (change)="onCheckboxChange_lease($event, 1, 0, 'downpay')" (click)="shiftdigitalevent()" (keypress)="keyPressDn($event)" matInput>
                                </mat-form-field>
                                <span class="error error-zip" style="color:red;font-size:12px" *ngIf="showleasedownpaymenterror">Dealer requests a minimum {{minimumDownPercent}}% down payment.</span>
                            </div>
                        </div>


                        <!-- Trade In -->
                        <div class="payment-form-row" style="margin-top:-5px">
                            <div class="payment-input-fields">
                                <mat-form-field appearance="outline" style="width: 100%;">
                                    <mat-label> Trade-in Value</mat-label>
                                    <input id="trade_in_lease" [disabled]="lease_lock == 0" (focus)="clearIfZero($event,'tradein')" (blur)="resetIfEmpty($event,'tradein')" [maxLength]=6 type="text" (change)="onCheckboxChange_lease($event, 1, 0, 'tradein')" (click)="shiftdigitalevent()" value=" {{leasetradein}}" (keypress)="keyPressDn($event)" matInput (input)="validateNumericInput($event)">
                                </mat-form-field>
                            </div>
                        </div>
                        <!-- conditional offers -->
                        <div class="">
                            <!-- Conditional Offer -->
                            <div class="payOpt__bill payOpt__bill--dropdown payOpt__bill--dropdown--open" (click)="dropdownToggle(exploreConditionalOfferLease, conditionalLeaseDataToShow.length,'lease','conditional-offer', 'exploreConditionalOfferLease')">
                                <label class="widget_popup_payment_summarise_item_label">Explore Conditional Offers</label>
                                <label class="payOpt__bill__value" *ngIf="!hideConditionalOffter"><i class="payOpt__bill__value__minus"></i>{{conditionaltotal|
                                    currency:'USD':'symbol':'1.0-0'}}
                                    <span class="down_arrow_svg" *ngIf="conditionalLeaseDataToShow.length > 0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </label>

                            </div>
                            <div class="exploreConditionalOfferLease payOpt__dropContent_wrap" #exploreConditionalOfferLease>
                                <div *ngIf="conditionalLeaseDataToShow != undefined && conditionalLeaseDataToShow.length > 0" class="payOpt__dropContent">
                                    <div *ngFor="let data of conditionalLeaseDataToShow" class="incentive-heading">
                                        <p class="Checkbox-heading" style="font-weight: bold !important; margin-bottom: 0px!important;" *ngIf="data.name != ' '">{{data.name}}</p>
                                        <b class="Checkbox-heading" *ngIf="data.name == ' '"><br></b>
                                        <div class="payOpt__checkItem" *ngFor="let condition of data.data">
                                            <div class="payOpt__checkItem__content">
                                                <label class="customCheckbox" [ngClass]="{ 'noCheckbox': hideConditionalOffter }">
                                                    <input type="checkbox" value="{{condition.programId}}" [checked]="condition.isChecked" (click)="conditionalCheckLease($event, condition.programId)" *ngIf="!hideConditionalOffter">
                                                    <span [ngClass]="{'customCheckboxStrike': condition.noeligible == true}" class="customCheckbox_name">{{condition.programName}}</span>
                                                    <i class="disclaimer_bubble" attr.data-title="{{condition.programRules}}">i</i>
                                                </label>
                                                <div class="payOpt__checkItem__price" [ngClass]="{'customCheckboxStrike': condition.noeligible == true}">{{condition.amount| currency:'USD':'symbol':'1.0-0'}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>

                        <!-- Annual Milage -->
                        <div class="payment-form-row" style="margin-top:30px">
                            <div class="payment-form-row mileage-outer">
                                <!-- Annual Milage -->
                                <!-- <div class="form-fields form-fields-50 mileage-info">
                                    <label for="">Annual Mileage
                                        <i class="disclaimer_bubble" data-title="Lease pays for excess wear & tear and mileage for each mile over the annual contracted lease miles, if the vehicle is returned at the end of the term.">i</i>
                                    </label>

                                    <mat-form-field class="demo-full-width select-parent" appearance="outline" style="width: 100%;">
                                        <select class="select-box" matNativeControl placeholder="{{defualtmileage}} Mileage" name="mileage_lease" id="mileage_lease" (change)="onCheckboxChange_lease($event, 3)" (click)="shiftdigitalevent()">
                                            <option *ngFor="let mileage of leasedetails.payload_calculation.mileage_list" [value]="mileage.mileage" [selected]="mileage.mileage == defualtmileage">{{mileage.mileage}} Mileage</option>
                                        </select>
                                    </mat-form-field>
                                </div> -->
                                <div class="payment-form-row">
                                    <div class="payment-input-fields">
                                        <mat-form-field appearance="outline" style="width: 100%;">
                                            <mat-label>Annual Mileage</mat-label>
                                            <mat-select class="dropdown-calc" name="mileage_lease" id="mileage_lease" [(value)]="defualtmileage" (selectionChange)="onCheckboxChange_lease($event, 3, 0 ,'' ,'' , '', 'annualMileage')">
                                                <mat-option *ngFor="let mileage of leasedetails.payload_calculation.mileage_list" [value]="mileage.mileage">
                                                    {{mileage.mileage}} Mileage
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Credit Range -->
                        <div class="widget-row row-5 payOpt__bill__selectrow payment-form-row" *ngIf="leaserangearr?.length > 0">
                            <div class="widget-col-12">
                                <mat-form-field appearance="outline" style="width: 100%;">
                                    <mat-label>Choose your Credit Range</mat-label>
                                    <mat-select class="dropdown-calc" matNativeControl placeholder="Tier-{{leasetier}}" [(value)]="leasetier" name="leasetiers" id="leasetiers" (change)="onCheckboxChange_lease($event, 1, 1, 'credit','', '', 'creditRating')" (click)="shiftdigitalevent()">
                                        <mat-option *ngFor="let tier of leaserangearr" [value]="tier.code">
                                            Tier-{{tier.code}} [{{tier.low}} - {{tier.high}}] - {{tier.txtdisp}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <!-- <div class="form-group">
                                    <label for="">Choose your Credit Range</label>
                                    <mat-form-field appearance="outline" style="width: 100%;" class="demo-full-width select-parent">
                                        <select class="select-box" matNativeControl placeholder="Tier-{{leasetier}}" name="leasetiers" id="leasetiers" (change)="onCheckboxChange_lease($event, 1, 1, 'credit','', '', 'creditRating')" (click)="shiftdigitalevent()">
                                            <option *ngFor="let tier of leaserangearr" [value]="tier.code" [selected]="tier.code == leasetier">Tier-{{tier.code}} [{{tier.low}} - {{tier.high}}] - {{tier.txtdisp}}</option>
                                        </select>
                                    </mat-form-field>
                                </div> -->
                            </div>
                        </div>


                        <div class="price-breakdown">
                            <div class="widget_price_calculations_section">
                                <div class="payOpt__bill payOpt__bill--dropdown">
                                    <div class="payOpt__bill__label">Incentives</div>
                                    <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{incentivetotal|
                                        currency:'USD':'symbol':'1.0-0'}}</div>
                                    <span class="down_arrow_svg" (click)="dropdownToggle(incentiveLease, incentivedata.length,'lease','incentive', 'incentiveLease')" *ngIf="incentivedata.length > 0 && incentivetotal > 0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="incentiveLease payOpt__dropContent_wrap closeIt" #incentiveLease>
                                    <div *ngIf="incentivedata != undefined && incentivedata.length > 0" class="payOpt__dropContent">
                                        <div *ngFor="let data of incentivedata">
                                            <div class="payOpt__checkItem payOpt__dropContent_due">
                                                <div class="payOpt__checkItem__content">

                                                    <label class="customCheckbox">
                                                        <span class="customCheckbox_name" [ngClass]="{'hideIncentive' : data.checked == -1}">{{data.programName}}</span>
                                                        <i class="disclaimer_bubble" attr.data-title="{{data.programRules}}">i</i>
                                                    </label>


                                                    <div class="payOpt__checkItem__price">{{data.amount| currency:'USD':'symbol':'1.0-0'}}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Incentive end -->

                                <!-- Conditional Offer -->
                                <div>
                                    <div class="payOpt__bill payOpt__bill--dropdown">
                                        <div class="payOpt__bill__label">Conditional Offer</div>
                                        <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{conditionaltotal|
                                            currency:'USD':'symbol':'1.0-0'}}</div>
                                    </div>
                                </div>

                                <!-- Dealer Discount -->
                                <div *ngIf="isDealerDiscountNormalVisible">
                                    <div class="payOpt__bill--dropdown" (click)="dropdownToggle(leasedealerDropdown,discountdata.length,'lease','dealer-discount', 'leasedealerDropdown_drop')" *ngIf="(viewoffer == 0 || has_vauto_dlr_disc || has_max_digital_dlr_disc || has_ferrario_dlr_disc == true) && discounttotal > 0" [className]="discountdata.length > 0 && !has_vauto_dlr_disc ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'">
                                        <div class="payOpt__bill__label">Dealer Discount</div>
                                        <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{discounttotal |
                                            currency:'USD':'symbol':'1.0-0'}}</div>
                                        <span class="down_arrow_svg" *ngIf="discountdata.length > 0 && !has_vauto_dlr_disc"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                            </svg></span>
                                    </div>
                                </div>

                                <div *ngIf="isDealerDiscountBoldVisible">
                                    <div class="payOpt__bill--dropdown" (click)="dropdownToggle(leasedealerDropdown,discountdata.length,'lease','dealer-discount', 'leasedealerDropdown_drop')" *ngIf="(viewoffer == 0 || has_vauto_dlr_disc || has_max_digital_dlr_disc || has_ferrario_dlr_disc == true) && discounttotal > 0" [className]="discountdata.length > 0 && !has_vauto_dlr_disc ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'">
                                        <div class="payOpt__bill__label"><b class="discountbold"> Dealer Discount</b></div>
                                        <div class="payOpt__bill__value"><b class="discountbold"><i class="payOpt__bill__value__minus"></i>{{discounttotal |
                                                currency:'USD':'symbol':'1.0-0'}}</b></div>
                                        <span class="down_arrow_svg" *ngIf="discountdata.length > 0 && !has_vauto_dlr_disc"><b class="discountbold">expand_more</b></span>
                                    </div>
                                </div>


                                <div class="leasedealerDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_discount closeIt " #leasedealerDropdown>
                                    <div class="payOpt__dropContent" *ngIf="discountdata.length > 0">
                                        <div class="payOpt__checkItem" *ngFor="let disc of discountdata">
                                            <div class="payOpt__checkItem__content">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name">{{disc.discount_name}}</span>
                                                    <i class="disclaimer_bubble" data-title="{{disc.discount_disclaimer}}">i</i>
                                                </label>
                                                <div class="payOpt__checkItem__price"> {{disc.discount_amount|
                                                    currency:'USD':'symbol':'1.0-0'}}</div>
                                                <!-- <div class="payOpt__checkItem__price" *ngIf="disc.discount_amount.indexOf('%') == -1">
                                                    {{disc.discount_amount|
                                                    currency:'USD':'symbol':'1.0-0'}}</div>
                                                <div class="payOpt__checkItem__price" *ngIf="disc.discount_amount.indexOf('%') > -1">
                                                    {{disc.discount_amount}}</div> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Lease Dealer Upfits -->
                                <div class="payOpt__bill--dropdown" *ngIf="leaseupfitamount != '' && leaseupfitamount != 0 && leaseupfitamount != null && is_autoNation_vin != 'Y' && homenet_lease_vin != 'Y'" [className]="leaseupfitamount != '' && leaseupfitamount != 0 && leaseupfitamount != null  ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'">
                                    <label class="payOpt__bill__label">Dealer Upfit</label>
                                    <label class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{leaseupfitamount |
                                        currency:'USD':'symbol':'1.0-0'}}</label>
                                    <span class="down_arrow_svg" *ngIf="leaseupfits.length > 0" (click)="dropdownToggle(upfitDropdown,1,'','', 'upfitDropdown_drop')"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="upfitDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_discount closeIt " #upfitDropdown>
                                    <div class="payOpt__dropContent" *ngIf="leaseupfits.length > 0">
                                        <div class="payOpt__checkItem" *ngFor="let leaseupfit of leaseupfits">
                                            <div class="payOpt__checkItem__content">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">{{leaseupfit.description}}</span>
                                                    <i class="disclaimer_bubble" attr.data-title="{{leaseupfit.upfit_disclaimer}}" *ngIf="leaseupfit.upfit_disclaimer != ''">i</i>
                                                </label>

                                                <div class="payOpt__checkItem__price">{{leaseupfit.total_price}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Autonation Upfits Lease -->
                                <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="autoNation_upfits != '' && autoNation_upfits != undefined && autoNation_upfits != 0 && Lease_priceDispalyType !== 'M'">
                                    <div class="payOpt__bill_label">Dealer Accessories</div>
                                    <div class="payOpt__bill__value">{{autoNation_upfits}}</div>
                                </div>

                                <!-- downpayment -->
                                <div>
                                    <div class="payOpt__bill payOpt__bill--dropdown">
                                        <div class="payOpt__bill__label">Downpayment</div>
                                        <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>${{leasedownpayment}}</div>
                                    </div>
                                </div>

                                <!-- trade-in -->
                                <div class="payOpt__bill payOpt__bill--dropdown">
                                    <div class="payOpt__bill__label">Trade-in</div>
                                    <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>${{leasetradein}}</div>
                                </div>

                                <!-- Incentives -->
                                <!-- <div>
                                        <div class="payOpt__bill payOpt__bill--dropdown">
                                            <div class="payOpt__bill__label">Incentives</div>
                                            <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{incentivetotal|
                                            currency:'USD':'symbol':'1.0-0'}}</div>
                                        </div>
                                    </div> -->

                                <!--Service and protection starts-->
                                <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(spLDropdown,'3','lease',leasedetails?.payload_service_protection?.total_sp, 'spLDropdown_drop')" *ngIf="leaseserviceprotection?.length > 0">
                                    <div class="payOpt__bill__label">Service
                                        & Protection Plans <i *ngIf="customeplan == 0" class="disclaimer_bubble monthly_taxes" data-title="Paid in lease - monthly">i</i></div>
                                    <div class="payOpt__bill__value">
                                        <i class="payOpt__bill__value__minus"></i>{{leasedetails?.payload_service_protection?.total_sp|
                                        currency:'USD':'symbol':'1.2-2'}}
                                    </div>
                                    <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="spLDropdown_drop payOpt__dropContent_wrap closeIt payOpt__dropContent_due" #spLDropdown>
                                    <div class="payOpt__dropContent" *ngIf="leaseserviceprotection?.length > 0">
                                        <div class="payOpt__checkItem">
                                            <div class="payOpt__checkItem__content" *ngFor="let serviceprotection of leaseserviceprotection">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">{{serviceprotection.fee_type.toLowerCase( )}}</span>
                                                </label>
                                                <div class="payOpt__checkItem__price">{{serviceprotection.Amount|
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--Service and protection ends-->

                                <!-- Accessories -->
                                <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="payload_mopar_accessries != undefined && payload_mopar_accessries.length > 0" (click)="dropdownToggle(leaseAccessoriesDropdown,payload_mopar_accessries.length,'lease','mopar', 'leaseAccessoriesDropdown_drop')">
                                    <div class="payOpt__bill__label">Accessories</div>
                                    <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{mopar_accessries_total|
                                        currency:'USD':'symbol':'1.2-2'}}</div>
                                    <span class="down_arrow_svg" *ngIf="payload_mopar_accessries != undefined && payload_mopar_accessries.length > 0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="leaseAccessoriesDropdown_drop payOpt__dropContent_wrap closeIt" #leaseAccessoriesDropdown>
                                    <div *ngIf="payload_mopar_accessries != undefined && payload_mopar_accessries.length > 0" class="payOpt__dropContent">
                                        <div class="payOpt__checkItem" *ngFor="let mopar of payload_mopar_accessries">
                                            <div class="payOpt__checkItem__content">
                                                <label class="customCheckbox">
                                                    <input type="checkbox" name="lease_mopar" id="{{mopar.part_no}}" value="{{mopar.part_no}}" [checked]="mopar.checked==undefined || !mopar.checked" (click)="onCheckboxChange_lease($event, 1, 0, 'mopar', mopar.part_no)" (click)="shiftdigitalevent()">
                                                    <span id="li_{{mopar.part_no}}" class="customCheckbox_name">{{mopar.title}}</span>
                                                    <!-- <div id="li_{{mopar.id}}" *ngIf="mopar.checked == -1">{{mopar.title}}</div> -->
                                                </label>
                                                <!-- <i class="disclaimer_bubble" data-title='Ball Mount Adapter is designed for a 2 Hitch Receiver and allows a 2.75" rise or 4" drop in ball position. The adapter features a 1" ball shank, is 9" long and is rated to handle up to a 6,000 lb load and 600 lb of tongue weight.'>i</i> -->
                                                <div class="payOpt__checkItem__price">{{mopar.msrp|
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>



                                <!-- Accessories -->
                                <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="dlr_accessories != '' && dlr_accessories != undefined">
                                    <div class="payOpt__bill__label">Accessories</div>
                                    <div class="payOpt__bill__value">{{dlr_accessories | currency:'USD':'symbol':'1.0-0'}}</div>
                                </div>

                                <!-- Adjusted Cost -->
                                <div class="payment-form-row" style="display: flex;">
                                    <div class="form-fields capilize-text">
                                        <b>ADJUSTED CAPITALIZED COSTS</b>

                                        <p>Include available offers and incentives</p>
                                    </div>
                                    <!-- <div class="form-fields capilize-text" *ngIf="leasetfdisclaimerlabel">
                                <b>ESTIMATED CAPITALIZED COSTS</b><br />
                                Include available offers and incentives
                                    </div> -->

                                    <div class="form-fields text-right capitalize-value">
                                        <span *ngIf="viewoffer == 0 && !has_vauto_dlr_disc">{{capitalizedcost?.replace(',','') | currency:'USD':'symbol':'1.0-0'}}</span>
                                        <span *ngIf="viewoffer == 1 && !has_vauto_dlr_disc">{{capitalizedcostxdiscount | currency:'USD':'symbol':'1.0-0'}}</span>
                                        <span *ngIf="has_vauto_dlr_disc">{{capitalizedcost?.replace(',','') | currency:'USD':'symbol':'1.0-0'}}</span>
                                    </div>

                                </div>

                                <!--  Taxes and Fees Section -->
                                <div class="payOpt__bill payOpt__bill--dropdown payOpt__bill__taxesfee" (click)="dropdownToggle(taxfeeLDropdown,'2','lease','', 'taxfeeLDropdown_drop')" *ngIf="leasetaxfeestotal > 0 ">
                                    <div class="payOpt__bill__label">
                                        <span *ngIf="taxesEnable == 'Y'"> Taxes & Fees <i class="tax_fees_bubble disclaimer_bubble" data-title="Sales tax applicable as per the respective state, city of the dealership or where you will register the vehicle. May include the first-year state registration fees for your new car, collected by the dealer; Documentation fee charged by the dealer, to prepare the sales contract">i</i></span>

                                        <span *ngIf="taxesEnable != 'Y'"> Dealer Fees <i class="disclaimer_bubble" data-title="Sales tax applicable as per the respective state, city of the dealership or where you will register the vehicle. May include the first-year state registration fees for your new car, collected by the dealer; Documentation fee charged by the dealer, to prepare the sales contract">i</i></span>
                                        <!-- <br /><span *ngIf="customerzipcode !=''" class="zipcode-dummy">ZIP Code</span> -->
                                    </div>
                                    <div class="payOpt__bill__value">
                                        <i class="payOpt__bill__value__minus"></i>{{leasetaxfeestotal|
                                        currency:'USD':'symbol':'1.2-2'}}
                                    </div>
                                    <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <!-- <div *ngIf="(customerzipcode !='' || zipcode !='') && leasetaxfeestotal > 0 " class="zipcode-edit">
                                <span>Zip Code {{customerzipcode||zipcode}}<span class="down_arrow_svg" title="Edit"
                                    (click)="estimatepopupFn('zip');">edit</span></span>
                                </div> -->
                                <div class="taxfeeLDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_taxfee closeIt" #taxfeeLDropdown>
                                    <div class="payOpt__dropContent">
                                        <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(taxLDropdown,'3','lease','taxes', 'taxLDropdown_drop')" *ngIf="leasetaxdetails?.length > 0">
                                            <div class="payOpt__bill__label">Taxes</div>
                                            <div class="payOpt__bill__value">
                                                <i class="payOpt__bill__value__minus"></i>{{leasedetails?.payload_taxes?.feedetails?.total|
                                                currency:'USD':'symbol':'1.2-2'}}
                                            </div>
                                            <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                </svg></span>
                                        </div>
                                        <div class="taxLDropdown_drop payOpt__dropContent_wrap closeIt" #taxLDropdown>
                                            <div class="payOpt__dropContent" *ngIf="leasetaxdetails?.length > 0">
                                                <div class="payOpt__checkItem">
                                                    <div class="payOpt__checkItem__content" *ngFor="let tax of leasetaxdetails">
                                                        <label class="customCheckbox">
                                                            <span class="customCheckbox_name" id="">{{tax.FeeName}}
                                                                <span class="customCheckbox_name_sub" id="" *ngIf="tax.FeeDescription != null && tax.FeeDescription !='Title Fee'">({{tax.FeeDescription}})</span>
                                                            </span>
                                                        </label>
                                                        <div class="payOpt__checkItem__price">{{tax.Amount|
                                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="leasemonthlytaxes?.length > 0 && leasedetails?.payload_taxes?.feedetails?.taxes?.monthly_tax_total == 0">
                                            <div class="payOpt__bill__label">Estimated Monthly Taxes <i class="disclaimer_bubble monthly_taxes" data-title="Paid in lease - monthly">i</i></div>
                                            <div class="payOpt__bill__value"> $0 </div>
                                        </div>
                                        <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(monthlyTaxLDropdown,'3','lease','Monthly-Taxes', 'monthlyTaxLDropdown_drop')" *ngIf="leasemonthlytaxes?.length > 0 && leasedetails?.payload_taxes?.feedetails?.taxes?.monthly_tax_total != 0">
                                            <div class="payOpt__bill__label">Estimated Monthly Taxes <i class="disclaimer_bubble monthly_taxes" data-title="Paid in lease - monthly">i</i></div>
                                            <div class="payOpt__bill__value">
                                                <i class="payOpt__bill__value__minus"></i>{{leasedetails?.payload_taxes?.feedetails?.taxes?.monthly_tax_total|
                                                currency:'USD':'symbol':'1.2-2'}}
                                            </div>
                                            <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                </svg></span>
                                        </div>
                                        <div class="monthlyTaxLDropdown_drop payOpt__dropContent_wrap closeIt" #monthlyTaxLDropdown>
                                            <div class="payOpt__dropContent" *ngIf="leasemonthlytaxes?.length > 0 && leasedetails?.payload_taxes?.feedetails?.taxes?.monthly_tax_total != 0">
                                                <div class="payOpt__checkItem">
                                                    <div class="payOpt__checkItem__content" *ngFor="let monthly_tax of leasemonthlytaxes">
                                                        <label class="customCheckbox">
                                                            <span class="customCheckbox_name" id="">{{monthly_tax.FeeName}}</span>
                                                        </label>
                                                        <div class="payOpt__checkItem__price">{{monthly_tax.Amount|
                                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(upTaxLDropdown,'3','lease','Upfront-Taxes', 'upTaxLDropdown_drop')" *ngIf="leaseupfronttaxes?.length > 0">
                                            <div class="payOpt__bill__label">Estimated Upfront Taxes</div>
                                            <div class="payOpt__bill__value">
                                                <i class="payOpt__bill__value__minus"></i>{{leasedetails?.payload_taxes?.feedetails?.taxes?.upfront_tax_total|
                                                currency:'USD':'symbol':'1.2-2'}}
                                            </div>
                                            <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                </svg></span>
                                        </div>
                                        <div class="upTaxLDropdown_drop payOpt__dropContent_wrap closeIt" #upTaxLDropdown>
                                            <div class="payOpt__dropContent" *ngIf="leaseupfronttaxes?.length > 0">
                                                <div class="payOpt__checkItem">
                                                    <div class="payOpt__checkItem__content" *ngFor="let upfront_tax of leaseupfronttaxes">
                                                        <label class="customCheckbox">
                                                            <span class="customCheckbox_name" id="">{{upfront_tax.FeeName}}
                                                                <span class="customCheckbox_name_sub" *ngIf="upfront_tax.FeeDescription != null && upfront_tax.FeeDescription !='Title Fee' ">({{upfront_tax.FeeDescription}})</span>
                                                            </span>
                                                        </label>
                                                        <div class="payOpt__checkItem__price">{{upfront_tax.Amount|
                                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(upFeeLDropdown,'3','lease',leasepaymentmode, 'upFeeLDropdown_drop')" *ngIf="leaseupfrontfees?.length > 0 && leasedetails?.payload_fees?.total_fees > 0">
                                            <div class="payOpt__bill__label" *ngIf="leasepaymentmode == 'Upfront Fees' ">Upfront Fees</div>
                                            <div class="payOpt__bill__label" *ngIf="leasepaymentmode == 'Standard' ">Upfront Fees</div>
                                            <div class="payOpt__bill__label" *ngIf="leasepaymentmode == 'dealer_fee_in_lease' || leasepaymentmode == ''">Monthly Fees</div>

                                            <div class="payOpt__bill__value">
                                                <i class="payOpt__bill__value__minus"></i>{{leasedetails?.payload_fees?.total_fees|
                                                currency:'USD':'symbol':'1.2-2'}}
                                            </div>
                                            <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                </svg></span>
                                        </div>
                                        <div class="upFeeLDropdown_drop payOpt__dropContent_wrap closeIt" #upFeeLDropdown>
                                            <div class="payOpt__dropContent" *ngIf="leaseupfrontfees?.length > 0">
                                                <div class="payOpt__checkItem">
                                                    <div class="payOpt__checkItem__content" *ngFor="let upfront_fees of leaseupfrontfees">
                                                        <label class="customCheckbox">
                                                            <span class="customCheckbox_name" id="" *ngIf="upfront_fees.Amount != 0">{{upfront_fees.fee_type}}</span>
                                                            <i class="disclaimer_bubble" attr.data-title="{{upfront_fees.Disclaimer}}" *ngIf="upfront_fees.Disclaimer != null && upfront_fees.Disclaimer != ''">i</i>
                                                        </label>

                                                        <div class="payOpt__checkItem__price" *ngIf="upfront_fees.Amount != 0"> {{upfront_fees.Amount|
                                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Subvented or Non-Subvented Lease-->
                                <div class="widget-row row-5 payOpt__payment__selectrow term-duration">


                                    <div class="col-7 term-option-section payOpt__bill__label" *ngIf="vehicle_type == 'new'">
                                        <b>Financial Institutions</b>
                                        <div class="widget-form-check" *ngFor="let prgm of leasedetails.payload_calculation?.LenderProgramDetails">
                                            <input class="widget-form-check-input" (change)="updateProgramtype($event,prgm.programType)" id="drs_apr" type="radio" [checked]="leasedetails.payload_calculation?.selectedLenderProgram === prgm.programType" />
                                            <label class="widget-form-check-label sns_lable" for="drs_apr">{{prgm.name}}</label>
                                        </div>

                                    </div>


                                </div>

                                <!--  Due at Signing -->
                                <div class="payOpt__bill payOpt__bill--dropdown payOpt__bill__due" (click)="dropdownToggle(DueDropdown,'1','','', 'DueDropdown_drop')" *ngIf="leasedueatsigningval != undefined && leasedueatsigningval?.toString().replace(',','') > 0 && (taxesEnable == 'Y' || feesEnable == 'Y')">
                                    <div class="payOpt__bill__label">
                                        <span class="widget_popup_payment_summarise_item_final_label">Due At Signing</span>
                                        <span>(Lease taxes paid upfront)</span>
                                    </div>
                                    <div class="widget_popup_payment_summarise_item_final_value">
                                        <i class="payOpt__bill__value"></i>{{leasedueatsigningval | currency:'USD':'symbol':'1.0-0'}}
                                    </div>
                                    <span class="down_arrow_svg" *ngIf="leasedueatsigningval != 0 "><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="DueDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_due closeIt" #DueDropdown>
                                    <div class="payOpt__dropContent" *ngIf="leasedueatsigningval != undefined && leasedueatsigningval != 0 ">
                                        <div class="payOpt__checkItem">
                                            <div class="payOpt__checkItem__content">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">Down Payment</span>
                                                </label>
                                                <div class="payOpt__checkItem__price">${{leasedownpayment}}</div>
                                            </div>
                                            <div class="payOpt__checkItem__content">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">Taxes & Fees</span>
                                                </label>
                                                <div class="payOpt__checkItem__price" *ngIf="leasedetails?.payload_taxes?.tax_payment_mode == 'in_lease'">{{ (
                                                    leasedetails?.payload_taxes?.feedetails?.taxes?.monthly_tax_total
                                                    +leasedetails?.payload_taxes?.feedetails?.taxes?.upfront_tax_total +
                                                    leasedetails?.total_fee ) |
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                                <div class="payOpt__checkItem__price" *ngIf="leasedetails?.payload_taxes?.tax_payment_mode == 'due_upfront'">{{
                                                    (convertToNumber(leasedetails?.total_taxs_and_fees.replace(",","")) ) |
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                            <div class="payOpt__checkItem__content">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">First Month Payment</span>
                                                </label>
                                                <div class="payOpt__checkItem__price">{{monthlycost?.toString().replace(",","")|
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                            <div class="payOpt__checkItem__content" *ngIf="leaseserviceprotection?.length > 0">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">Service And Protection</span>
                                                </label>
                                                <div class="payOpt__checkItem__price">{{leasedetails?.payload_service_protection?.total_sp|
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Estimated Monthly payment -->
                                <div class="payment-form-row" *ngIf="leasemonthlytaxesval != undefined && leasemonthlytaxesval > 0 && (leaseserviceprotection?.length == 0 || leaseserviceprotection?.length == undefined ) &&  (taxesEnable=='Y' || feesEnable=='Y') && leasepaymentmode != 'Upfront Fees'">
                                    <div class="payOpt__bill payOpt__bill__adjusted">
                                        <div class="payOpt__bill__label">
                                            <strong>ESTIMATED MONTHLY PAYMENT</strong>
                                            <span>(without Taxes & Fees)</span>
                                        </div>
                                        <div class="payOpt__bill__value">{{monthlycost?.toString().replace(',','')|
                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                    </div>
                                </div>

                                <div class="payment-form-row" *ngIf="leaseserviceprotection?.length > 0 && leasepaymentmode != 'Upfront Fees' && !(customeplan == 1 && leasedetails.payload_tax_payment_mode == 'due_upfront' && (taxesEnable=='Y' || feesEnable=='Y'))">
                                    <div class="payOpt__bill payOpt__bill__adjusted">
                                        <div class="payOpt__bill__label">
                                            <strong>ESTIMATED MONTHLY PAYMENT</strong>
                                            <span *ngIf="customeplan==1 && leasetaxfeestotal == 0">(first month payment with service protection)</span>
                                        </div>
                                        <div class="payOpt__bill__value" *ngIf="customeplan == 0">{{monthlycost?.toString().replace(',','') |
                                            currency:'USD':'symbol':'1.2-2'}}</div>

                                        <div class="payOpt__bill__value" *ngIf="customeplan == 1 && (leasetaxfeestotal == 0 || leasepaymentmode == 'Upfront Fees')">{{monthlycostSandPTotal?.toString().replace(',','')| currency:'USD':'symbol':'1.2-2'}}</div>

                                        <div class="payOpt__bill__value" *ngIf="customeplan == 1 && leasetaxfeestotal > 0 && leasepaymentmode != 'Upfront Fees'">{{monthlycost?.toString().replace(',','')| currency:'USD':'symbol':'1.2-2'}}</div>
                                    </div>
                                </div>
                            </div>


                            <!-- Disclaimer -->
                            <div class="disclaimer-content">
                                <!-- --- -->
                                <div class="downpaymenterror" *ngIf="leaseAmountForDisplay <= 0"><b>Downpayment + Trade-in value is higher than the leasing cost of the vehicle. You may be eligible to receive an amount from the dealer. Your dealer will confirm the final pricing based on the incentives, discounts, trade-in value and taxes & fees.
                                    </b> </div>
                                <div class="lease-total-price">
                                    <span class="widget_calc_final_price">LEASE FOR</span>
                                    <span class="widget_calc_final_price"> {{leaseAmountForDisplay?.toString().replace(',','') | currency:'USD':'symbol':'1.0-0'}}
                                        <sup><i class="disclaimer_bubble" data-title="This value is for estimation purposes only. You may not be able to lease at this rate.Your dealer will confirm the final pricing.">i</i></sup>
                                    </span>
                                    <div class="widget_calc_final_sub">per month for {{defaultterm}} months.</div>

                                    <!-- <div *ngIf="leasemonthlytaxesval != undefined && leasemonthlytaxesval !=0">(with
       Taxes & Fees)</div> -->

                                    <div *ngIf="leasemonthlytaxesval != undefined && leasemonthlytaxesval !=0 && leaseserviceprotection?.length > 0  && custome_added_plan == 0 && leasetaxfeestotal > 0  && (taxesEnable == 'Y' || feesEnable == 'Y')">(Includes Service & Protection plans and Taxes & Fees)</div>
                                    <div *ngIf="leaseserviceprotection?.length > 0  && custome_added_plan == 0 && leasetaxfeestotal == 0  && taxesEnable == 'N'">(Includes Service & Protection plans)</div>
                                    <div *ngIf="(leasemonthlytaxesval != undefined && leasemonthlytaxesval !=0 )&& custome_added_plan == 0 && leaseserviceprotection?.length > 0  && (taxesEnable == 'Y' || feesEnable == 'Y') && leasetaxfeestotal == 0">(Includes Service & Protection plans)</div>
                                    <div *ngIf="(leasemonthlytaxesval == undefined || leasemonthlytaxesval ==0 )&& custome_added_plan == 0 && leaseserviceprotection?.length > 0  && (taxesEnable == 'Y' || feesEnable == 'Y')&&taxesEnable != 'N'">(Includes Service & Protection plans)</div>
                                    <div *ngIf="leasemonthlytaxesval != undefined && leasemonthlytaxesval !=0 && leaseserviceprotection?.length == 0  && leasetaxfeestotal > 0 && (taxesEnable == 'Y' || feesEnable == 'Y') && leasepaymentmode != 'Upfront Fees'">(With Taxes & Fees)</div>
                                    <!-- for custom plan-->
                                    <div *ngIf="(leasemonthlytaxesval == undefined && leasemonthlytaxesval ==0) && custome_added_plan == 1 && leaseserviceprotection?.length > 0 && ((leasepaymentmode != 'Upfront Fees' && leasedetails.payload_taxes.in_lease_payment_mode != 'Standard') && leasedetails.payload_taxes.in_lease_payment_mode == 'dealer_fee_in_lease')  && leasetaxfeestotal > 0  && (taxesEnable == 'Y' || feesEnable == 'Y')">(Includes Service & Protection plans and Taxes & Fees)</div>
                                    <div *ngIf="(leasemonthlytaxesval != undefined && leasemonthlytaxesval > 0) && custome_added_plan == 1 && leaseserviceprotection?.length > 0 && ((leasepaymentmode != 'Upfront Fees' && leasedetails.payload_taxes.in_lease_payment_mode != 'Standard') && leasedetails.payload_taxes.in_lease_payment_mode == 'dealer_fee_in_lease')  && (taxesEnable == 'Y' || feesEnable == 'Y') && leasetaxfeestotal > 0">(Includes Service & Protection plans and Taxes & Fees)</div>

                                    <div *ngIf="custome_added_plan == 1 && leaseserviceprotection?.length > 0 && (leasepaymentmode == 'Upfront Fees' || leasedetails.payload_taxes.in_lease_payment_mode == 'Standard') && (taxesEnable == 'Y' || feesEnable == 'Y') && leasemonthlytaxesval == undefined && leasemonthlytaxesval ==0">(Includes Service & Protection plans)</div>
                                    <div *ngIf="custome_added_plan == 1 && leaseserviceprotection?.length > 0 && (leasepaymentmode == 'Upfront Fees' || leasedetails.payload_taxes.in_lease_payment_mode == 'Standard') && (taxesEnable == 'Y' || feesEnable == 'Y') && leasemonthlytaxesval != undefined && leasemonthlytaxesval >0">(With Taxes and Fees)</div>
                                    <!-- for custom plan end-->

                                </div>


                                <!-- new disclimeer with show more and show less   -->
                                <!-- <div class="disclaimer-text disclimerfont" *ngIf="(leasetfdisclaimertext != null || leasetfdisclaimertext != '' ) && !showFullDescriptionlease" [innerHTML]="fnSliceDisclaimer(leasetfdisclaimertext, 'finance')"></div>

                                <div class="disclaimer-text disclimerfont" *ngIf="(leasetfdisclaimertext == null || leasetfdisclaimertext == ''  )&& !showFullDescriptionlease" [innerHTML]="fnSliceDisclaimer(leasetfdisclaimertextwithouttaxesandfee, 'finance')"></div> -->

                                <div class="disclaimer-text disclimerfont" *ngIf="(leasetfdisclaimertext != null && leasetfdisclaimertext != '' ) && showFullDescriptionlease" [innerHTML]="leasetfdisclaimertext "></div>

                                <div class="disclaimer-text disclimerfont" *ngIf="(leasetfdisclaimertext == null || leasetfdisclaimertext == ''  )&& showFullDescriptionlease" [innerHTML]="leasetfdisclaimertextwithouttaxesandfee"></div>

                                <!-- <a class="showmore" (click)="toggleDescriptionlease()">{{ showFullDescriptionlease ? 'Show less' : '...Show more' }}</a> -->

                            </div>
                        </div>



                    </div>
                </div>
            </div>
            <!-- LEASE PAYMENT CALCULATOR ENDS -->
            <!-- FINANCE PAYMENT CALCULATOR STARTS -->
            <div id="widget_popup_payment_tabs_finance" *ngIf="activeTab == 'finance' && finaceResponseAvailable  " class="widget_popup_payment_tab-pane" role="tabpanel" aria-labelledby="widget_popup_payment_tabs_btn_finance">
                <!-- <h2 class="widget_popup_payment_amount">$730<span class="widget_popup_payment_amount_parameter">/mo<sup>*</sup></span></h2> -->

                <div *ngIf="financedetails && financedetails.status == 200">
                    <div class="widget_payment_term_duration_section">
                        <div class="widget-row">
                            <div class="widget-col-12 widget_payment_term_duration_bar">
                                <div class="widget_payment_term_duration_radio-toolbar">
                                    <!-- <mat-chip-listbox class="mat-chip-grid" name="terms_finance" id="terms_finance" [disabled]="isChipListDisabledFinance" (change)="onCheckboxChange_finance($event, 2, 0, '', 'term', '', 'lengthofLoan')" (click)="shiftdigitalevent()">

                                        <mat-chip-option *ngFor="let terms of financedetails?.payload_calculation?.terms_list" [value]="terms" [selected]="terms == defaultfinanceterm">
                                            {{terms}} <br><span>months</span>
                                        </mat-chip-option>

                                    </mat-chip-listbox> -->

                                    <mat-chip-listbox class="mat-chip-grid" name="terms_finance" id="terms_finance" [disabled]="isChipListDisabledFinance" [ngModel]="defaultfinanceterm" (ngModelChange)="onCheckboxChange_finance($event, 2, 0, '', 'term', '', 'lengthofLoan')" (click)="shiftdigitalevent()">
                                        <mat-chip-option *ngFor="let terms of financedetails?.payload_calculation?.terms_list" [value]="terms" [selected]="defaultfinanceterm === terms" [ngClass]="{ 'chip-background-color': terms === defaultfinanceterm }">
                                            {{ terms }} <br /><span>months</span>
                                        </mat-chip-option>
                                    </mat-chip-listbox>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="widget_popup_payment_summarise">
                        <div class="price-details">Price Details</div>
                        <!-- price -->
                        <div class="payment-form-row disp-block">
                            <!-- Finance Autonation -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="is_autoNationFinance_vin == 'Y' && autoNation_FinancelistPrice != '' && autoNation_FinancelistPrice != undefined && autoNation_FinancelistPrice != null && msrp_vin_details != autoNation_FinancelistPrice">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </div>
                                <div class="payOpt__bill__value">{{autoNation_FinancelistPrice| currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>

                            <!-- VAuto -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="finance_has_vauto_dlr_disc && msrp_vin_details_finance != finance_vauto_list_price &&  (finance_vauto_upfit == undefined || finance_vauto_upfit == '')">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </label>
                                <label class="payOpt__bill__value">{{finance_vauto_list_price | currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>
                            <!--(click)="dropdownToggle(upfitDropdownFinVauto,1,'','', 'upfitDropdownFinVauto_drop')"-->
                            <div class="payOpt__bill payOpt__bill__listprice payOpt__bill--dropdown" *ngIf="finance_has_vauto_dlr_disc && finance_vauto_list_price != '' && finance_vauto_upfit != undefined && finance_vauto_upfit != '' && msrp_vin_details_finance != finance_vauto_list_price && msrp_vin_details_finance != finance_vauto_price_wo_incentive">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                    <!-- <span class="payOpt__bill__includes">Includes MSRP, Upfits and Dealer fees</span> -->
                                </label>
                                <label class="payOpt__bill__value">{{finance_vauto_list_price| currency:'USD':'symbol':'1.0-0'}}</label>
                                <!-- <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></span> -->
                            </div>
                            <!-- <div class="upfitDropdownFinVauto_drop payOpt__dropContent_wrap payOpt__dropContent_upfit closeIt" #upfitDropdownFinVauto>
                                <div class="payOpt__dropContent ">
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">MSRP<span>{{finance_vin_msrp |
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">Upfits<span>{{finance_vauto_upfit | currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                </div>
                            </div> -->

                            <!-- Max Digital -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="finance_has_max_digital_dlr_disc && !finance_has_vauto_dlr_disc && finance_vin_msrp != finance_max_list_price">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </label>
                                <label class="payOpt__bill__value">{{finance_max_list_price | currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>

                            <!-- Ferrario -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="this.finance_ferrario_list_price != undefined && this.finance_ferrario_list_price != '' && finance_vin_msrp != finance_ferrario_list_price">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </label>
                                <label class="payOpt__bill__value">{{finance_ferrario_list_price | currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>

                            <!-- DAT List Price-->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="financeupfitflag == 1 && financeupfitstype =='L' && !finance_has_max_digital_dlr_disc && !finance_has_vauto_dlr_disc">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">List Price<span class="disclaimerTooltip__star" *ngIf="financeupfitsdisclaimer !=''">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="financeupfitsdisclaimer !=''">
                                            <p class="disclaimerTooltip__msg">{{financeupfitsdisclaimer}}</p>
                                        </div>
                                    </div>
                                    <span class="payOpt__bill__includes" *ngIf="financeupfitslabel !=''">{{financeupfitslabel}}</span>
                                    <span class="payOpt__bill__includes" *ngIf="financeupfitslabel =='' || !financeupfitslabel || financeupfitslabel == null">Includes MSRP,
                                        Upfits and Dealer fees</span>
                                </label>
                                <label class="payOpt__bill__value">{{msrp_finance| currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>

                            <!-- Homenet -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="finance_homenet_list_price != ''  &&  finance_vin_msrp != finance_homenet_list_price">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </label>
                                <label class="payOpt__bill__value">{{finance_homenet_list_price |
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>
                            <!-- <div class="payOpt__bill payOpt__bill__listprice payOpt__bill--dropdown" *ngIf="finance_homenet_list_price != '' && homenet_cache == 'N' " (click)="dropdownToggle(upfitDropdownfinancehomenet,1,'','', 'upfitDropdownfinancehomenet_drop')">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                    <span class="payOpt__bill__includes">Includes MSRP, Market Adjusted Cost</span>
                                </label>
                                <label class="payOpt__bill__value">{{finance_homenet_list_price|
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                                <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></span>
                            </div>
                            <div class="upfitDropdownfinancehomenet_drop payOpt__dropContent_wrap payOpt__dropContent_upfit closeIt" #upfitDropdownfinancehomenet>
                                <div class="payOpt__dropContent ">
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">MSRP <span>{{finance_vin_msrp |
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">Market Adjustment<span>{{homenet_market_adjustment_cost |
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                </div>
                            </div> -->

                            <!-- DAT Upfit-->
                            <!-- (click)="dropdownToggle(upfitDropdownfin,1,'','', 'upfitDropdownfin_drop')" -->
                            <div class="payOpt__bill payOpt__bill__listprice payOpt__bill--dropdown" *ngIf="(financeupfitflag == 1 || financediscounttotal > 0) && !finance_has_homenet_dlr_disc && msrp_finance != finance_vin_msrp  && !finance_has_max_digital_dlr_disc && !finance_has_vauto_dlr_disc  &&!(is_autoNationFinance_vin == 'Y' && autoNationFinance_listPrice != '' && autoNationFinance_listPrice != undefined && autoNationFinance_listPrice != null && msrp_vin_details_finance != autoNationFinance_listPrice)">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">List Price
                                        <span class="disclaimerTooltip__star" *ngIf="dat_financeupfitsdisclaimer !=''">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="dat_financeupfitsdisclaimer !=''">
                                            <p class="disclaimerTooltip__msg">{{dat_financeupfitsdisclaimer}}</p>
                                        </div>
                                    </div>
                                    <span class="payOpt__bill__includes" *ngIf="financeupfitslabel !=''">{{financeupfitslabel}}</span>
                                    <span class="payOpt__bill__includes" *ngIf="financeupfitslabel =='' || !financeupfitslabel || financeupfitslabel == null">Includes MSRP,
                                        Upfits and Dealer fees</span>
                                </label>
                                <label class="payOpt__bill__value">{{msrp_finance| currency:'USD':'symbol':'1.0-0'}}</label>
                                <!-- <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></span> -->
                            </div>
                            <!-- <div class="upfitDropdownfin_drop payOpt__dropContent_wrap payOpt__dropContent_upfit closeIt" #upfitDropdownfin>
                                <div class="payOpt__dropContent " *ngIf="financeupfitflag == 1">
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">MSRP <span>{{msrp_vin_details_finance|
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                    <div class="payOpt__checkItem ">
                                        <div><strong class="payOpt__checkItem__title">Upfits<span>{{financeupfitamount|
                                                    currency:'USD':'symbol':'1.0-0'}}</span></strong></div>
                                        <div class="payOpt__checkItem__content" *ngFor="let financeupfit of financeupfits">
                                            <label class="customCheckbox">
                                                <span class="customCheckbox_name" id="">{{financeupfit.description}}</span>
                                                <i class="disclaimer_bubble" data-title="{{financeupfit.disclaimer}}" *ngIf="financeupfit.disclaimer != ''">i</i>
                                            </label>

                                            <div class="payOpt__checkItem__price">{{financeupfit.total_price}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                            <div class="payOpt__bill widget_mb_20" *ngIf="vehicle_type == 'used'" style="margin-bottom: 12px;">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">Dealer Price<span class="disclaimerTooltip__star" *ngIf="!!financemsrpdisclaimer">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="!!financemsrpdisclaimer">
                                            <p class="disclaimerTooltip__msg" [innerHTML]="financemsrpdisclaimer"></p>
                                        </div>
                                    </div>
                                    (Sticker Price)
                                </label>
                                <label class="payOpt__bill__value">{{dealer_price_finance|
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>

                            <!-- MSRP-->
                            <div class="payOpt__bill widget_mb_20" *ngIf="this.vehicle_type == 'new' && financeupfitflag == 0">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">MSRP <span class="disclaimerTooltip__star" *ngIf="financemsrpdisclaimer != null">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="financemsrpdisclaimer != null">
                                            <p class="disclaimerTooltip__msg" [innerHTML]="financemsrpdisclaimer"></p>
                                        </div>
                                    </div>
                                    (Sticker Price)
                                </label>
                                <label class="payOpt__bill__value" *ngIf="(finance_max_list_price == '' || finance_max_list_price == undefined) && (finance_vauto_list_price == '' || finance_vauto_list_price == undefined)&& (finance_ferrario_list_price == '' || finance_ferrario_list_price == undefined)&& (finance_homenet_list_price == '' || finance_homenet_list_price == undefined) && (autoNation_FinancelistPrice == '' || autoNation_FinancelistPrice == undefined) ">{{msrp_vin_details_finance|
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                                <label class="payOpt__bill__value" *ngIf="(finance_max_list_price != '' && finance_max_list_price != undefined) || (finance_vauto_list_price != '' && finance_vauto_list_price != undefined)|| (finance_ferrario_list_price != '' && finance_ferrario_list_price != undefined)|| (finance_homenet_list_price != '' && finance_homenet_list_price != undefined) || (autoNation_FinancelistPrice != '' && autoNation_FinancelistPrice != undefined)">{{finance_vin_msrp|
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>
                            <div class="payOpt__bill widget_mb_20" *ngIf="financeupfitflag != 0 && !finance_has_max_digital_dlr_disc">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">MSRP <span class="disclaimerTooltip__star">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip">
                                            <p class="disclaimerTooltip__msg" [innerHTML]="financemsrpdisclaimer"></p>
                                        </div>
                                    </div>
                                    (Sticker Price)
                                </label>
                                <label class="payOpt__bill__value">{{msrp_vin_details_finance|
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>
                        </div>

                        <div class="" *ngIf="(customerzipcode !='' || zipcode !='') && financetaxfeestotal > 0 ">
                            <mat-form-field appearance="outline" style="width: 100%;" class="mat-mdc-form-field-infix">
                                <mat-label> Enter ZIP Code</mat-label>
                                <input name="zipcode" id="zipcode" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" (change)="invokepupulation($event)" maxlength="5" minlength="4" class="dropdown-calc" value="{{zipcode}}" matInput>
                                <!-- <mat-error class="error invalid-feedback" *ngIf="error==1">Please enter valid ZIP Code </mat-error> -->
                            </mat-form-field>
                            <span class="error error-zip" style="color:red;font-size:12px" *ngIf="error==1">Please enter valid ZIP Code </span>
                        </div>

                        <div class="payment-form-row" *ngIf="countycitylist?.length > 0 && (customerzipcode !='' || zipcode !='') && financetaxfeestotal > 0 && error == 0 " style="margin-top:-15px">
                            <div class="payment-input-fields">
                                <mat-form-field appearance="outline" style="width: 100%;">
                                    <mat-label>Select your County & City</mat-label>
                                    <mat-select class="dropdown-calc" name="countycity" id="countycity" [(value)]="selectedCountyCity" (selectionChange)="onDropdownChange($event)">
                                        <mat-option *ngFor="let data of countycitylist" [value]="data.county_city">
                                            {{data.county_city}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>


                        <!-- <div  *ngIf="countycitylist?.length > 0 && (customerzipcode !='' || zipcode !='') && leasetaxfeestotal > 0">
                    <div class="form-group">
                        <label class="calc-label">Select your County & City</label>
                        <select class="dropdown-calc" name="countycity" id="countycity" (change)="onDropdownChange($event)">
                            <option *ngFor="let data of countycitylist" value="{{data.county_city}}">
                                {{data.county_city}} </option>
                        </select>
                    </div>
                </div> -->

                        <div class="payment-form-row">
                            <div class="payment-input-fields">
                                <mat-form-field appearance="outline" style="width: 100%;" class="mat-mdc-form-field-infix">
                                    <mat-label> Down Payment({{financedownpaymentper}}%)</mat-label>
                                    <input name="financedown" id="down_payment_finance" [disabled]="finance_lock == 0" type="text" (focus)="clearIfZero($event,'downpay')" (blur)="resetIfEmpty($event,'downpay')" [(ngModel)]="financedownpayment_disp" maxlength="6" (change)="onCheckboxChange_finance($event, 3, 0, 'downpay')" (keypress)="keyPressDn($event)" (click)="shiftdigitalevent()" matInput>
                                </mat-form-field>
                                <span class="error error-zip" style="color:red;font-size:12px" *ngIf="showfinancedownpaymenterror">Dealer requests a minimum {{minimumDownPercent}}% down payment.</span>
                            </div>
                        </div>

                        <!-- Trade In -->
                        <div class="payment-form-row">
                            <div class="payment-input-fields">
                                <mat-form-field appearance="outline" style="width: 100%;">
                                    <mat-label>Trade-in Value</mat-label>
                                    <input id="trade_in_finance" [disabled]="finance_lock == 0" (focus)="clearIfZero($event,'tradein')" (blur)="resetIfEmpty($event,'tradein')" type="text" [maxLength]=6 (change)="onCheckboxChange_finance($event, 3, 0, 'tradein')" (click)="shiftdigitalevent()" value="{{financetradein}}" (keypress)="keyPressDn($event)" matInput (input)="validateNumericInput($event)">
                                </mat-form-field>
                            </div>
                        </div>
                        <!-- conditional offer finance -->
                        <div *ngIf="vehicle_type === 'new'" class="payOpt__bill payOpt__bill--dropdown payOpt__bill--dropdown--open" (click)="dropdownToggle(exploreConditionalOfferFinance, conditionalFinanceDataToShow.length,'finance','conditional-offer', 'exploreConditionalOfferFinance')">
                            <div class="payOpt__bill__label">Explore Conditional Offers<i class="disclaimer_bubble" data-title="Please contact dealer for more details." *ngIf="is_homenet_vin_finance == 'Y'">i</i></div>
                            <div class="payOpt__bill__value" *ngIf="!hideConditionalOffter && is_homenet_vin_finance == 'N'"><i class="payOpt__bill__value__minus"></i>{{financeconditionaltotal|
                                currency:'USD':'symbol':'1.0-0'}}</div>
                            <span class="down_arrow_svg" *ngIf="conditionalFinanceDataToShow.length > 0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                </svg></span>
                        </div>
                        <div class="exploreConditionalOfferFinance payOpt__dropContent_wrap" #exploreConditionalOfferFinance>
                            <div *ngIf="conditionalFinanceDataToShow != undefined && conditionalFinanceDataToShow.length > 0" class="payOpt__dropContent">
                                <div *ngFor="let data of conditionalFinanceDataToShow" class="incentive-heading">
                                    <p class="Checkbox-heading" style="font-weight: bold !important; margin-bottom: 0px!important;" *ngIf="data.name != ' '">{{data.name}}</p>
                                    <b class="Checkbox-heading" *ngIf="data.name == ' '"><br></b>
                                    <div class="payOpt__checkItem" *ngFor="let condition of data.data">
                                        <div class="payOpt__checkItem__content">
                                            <label class="customCheckbox" [ngClass]="{ 'noCheckbox': hideConditionalOffter }">
                                                <input type="checkbox" value="{{condition.programId}}" [checked]="condition.isChecked" (click)="conditionalCheckFinance($event, condition.programId)" *ngIf="!hideConditionalOffter && is_homenet_vin_finance != 'Y'">
                                                <span [ngClass]="{'customCheckboxStrike': condition.noeligible == true}" class="customCheckbox_name">{{condition.programName}}</span>
                                                <i class="disclaimer_bubble" attr.data-title="{{condition.programRules}}">i</i>
                                            </label>
                                            <div class="payOpt__checkItem__price" [ngClass]="{'customCheckboxStrike': condition.noeligible == true}">{{condition.amount| currency:'USD':'symbol':'1.0-0'}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="price-breakdown">
                            <div class="widget_price_calculations_section">
                                <!-- Incentive -->
                                <div *ngIf="vehicle_type === 'new'" class="payOpt__bill payOpt__bill--dropdown">
                                    <div class="payOpt__bill__label">Incentives <span *ngIf="is_homenet_incentives == false ">&nbsp;Included</span><i class="disclaimer_bubble" data-title="Please contact dealer for more details." *ngIf="is_homenet_vin_finance == 'Y'">i</i></div>
                                    <div class="payOpt__bill__value" *ngIf="is_homenet_vin_finance != 'Y'"><i class="payOpt__bill__value__minus"></i>{{financeincentivetotal|
                                        currency:'USD':'symbol':'1.0-0'}}</div>
                                    <span class="down_arrow_svg" (click)="dropdownToggle(incentiveFinance, financeincentivedataToShow.length, 'finance', 'incentive', 'incentiveFinance')" *ngIf="financeincentivedataToShow.length > 0 && financeincentivetotal > 0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="incentiveFinance payOpt__dropContent_wrap closeIt" #incentiveFinance>
                                    <div *ngIf="financeincentivedataToShow != undefined && financeincentivedataToShow.length > 0" class="payOpt__dropContent">
                                        <div *ngFor="let data of financeincentivedataToShow">
                                            <div class="payOpt__checkItem payOpt__dropContent_due">
                                                <div class="payOpt__checkItem__content">
                                                    <label class="customCheckbox">
                                                        <span class="customCheckbox_name" [ngClass]="{'hideIncentive' : data.checked == -1}">{{data.programName}}</span>
                                                        <i class="disclaimer_bubble" attr.data-title="{{data.programRules}}">i</i>
                                                    </label>


                                                    <div class="payOpt__checkItem__price">{{data.amount| currency:'USD':'symbol':'1.0-0'}}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Conditional Offer -->
                                <div>
                                    <div class="payOpt__bill payOpt__bill--dropdown">
                                        <div class="payOpt__bill__label">Conditional Offer</div>
                                        <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{financeconditionaltotal|
                                            currency:'USD':'symbol':'1.0-0'}}</div>
                                    </div>
                                </div>

                                <!-- Dealer Discount -->
                                <div *ngIf="isDealerDiscountNormalVisible">
                                    <div class="payOpt__bill--dropdown" [className]="financediscountdata.length > 0 && !finance_has_vauto_dlr_disc ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'" (click)="dropdownToggle(financedealerDropdown,financediscountdata.length,'finance','dealer-discount', 'financedealerDropdown_drop')" *ngIf="(viewoffer == 0 || finance_has_vauto_dlr_disc || finance_has_max_digital_dlr_disc || finance_has_ferrario_dlr_disc == true|| finance_has_homenet_dlr_disc == true) && financediscounttotal > 0">
                                        <div class="payOpt__bill__label" *ngIf="is_homenet_vin_finance != 'Y'">Dealer Discount</div>
                                        <div class="payOpt__bill__label" *ngIf="is_homenet_vin_finance == 'Y'">Dealer Discount/Bonus <i class="disclaimer_bubble" data-title="Please contact dealer for more details.">i</i></div>
                                        <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{financediscounttotal|
                                            currency:'USD':'symbol':'1.0-0'}}</div>
                                        <span class="down_arrow_svg" *ngIf="financediscountdata.length > 0 && !finance_has_vauto_dlr_disc"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                            </svg></span>
                                    </div>
                                </div>
                                <div *ngIf="isDealerDiscountBoldVisible">
                                    <div class="payOpt__bill--dropdown" [className]="financediscountdata.length > 0 && !finance_has_vauto_dlr_disc ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'" (click)="dropdownToggle(financedealerDropdown,financediscountdata.length,'finance','dealer-discount', 'financedealerDropdown_drop')" *ngIf="(viewoffer == 0 || finance_has_vauto_dlr_disc || finance_has_max_digital_dlr_disc || finance_has_ferrario_dlr_disc == true|| finance_has_homenet_dlr_disc == true) && financediscounttotal > 0">
                                        <div class="payOpt__bill__label"><b class="discountbold">Dealer Discount</b></div>
                                        <div class="payOpt__bill__value"><b class="discountbold"><i class="payOpt__bill__value__minus"></i>{{financediscounttotal|
                                                currency:'USD':'symbol':'1.0-0'}}</b></div>
                                        <span class="down_arrow_svg" *ngIf="financediscountdata.length > 0 && !finance_has_vauto_dlr_disc"><b class="discountbold"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                </svg></b></span>
                                    </div>
                                </div>


                                <div class="financedealerDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_discount closeIt" #financedealerDropdown>
                                    <div class="payOpt__dropContent" *ngIf="financediscountdata.length > 0">
                                        <div class="payOpt__checkItem" *ngFor="let disc of financediscountdata">
                                            <div class="payOpt__checkItem__content">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name">{{disc.discount_name}}</span>
                                                    <i class="disclaimer_bubble" data-title="{{disc.discount_disclaimer}}">i</i>
                                                </label>
                                                <div class="payOpt__checkItem__price"> {{disc.discount_amount|
                                                    currency:'USD':'symbol':'1.0-0'}}</div>
                                                <!-- <div class="payOpt__checkItem__price" *ngIf="disc.discount_amount.indexOf('%') == -1">
                                                    {{disc.discount_amount|
                                                    currency:'USD':'symbol':'1.0-0'}}</div>
                                                <div class="payOpt__checkItem__price" *ngIf="disc.discount_amount.indexOf('%') > -1">
                                                    {{disc.discount_amount}}</div> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Dealer Finance Upfits -->
                                <div class="payOpt__bill--dropdown" [className]="financeupfitamount != '' && financeupfitamount != 0 && financeupfitamount != undefined  ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'" *ngIf="financeupfitamount !='' && financeupfitamount != 0 && financeupfitamount != undefined && is_autoNationFinance_vin != 'Y'  && is_homenet_vin_finance != 'Y' && finance_priceDispalyType == 'L' ">
                                    <label class="payOpt__bill__label">Dealer Upfit</label>
                                    <label class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{financeupfitamount|
                                        currency:'USD':'symbol':'1.0-0'}}</label>
                                    <span class="down_arrow_svg" (click)="dropdownToggle(financeupfitDropdown, financeupfits?.length, 'finance', 'upfits', 'financeupfitDropdown_drop')" *ngIf="financeupfits?.length >0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="financeupfitDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_discount closeIt" #financeupfitDropdown>
                                    <div class="payOpt__dropContent" *ngIf="financeupfits.length > 0">
                                        <div class="payOpt__checkItem__content" *ngFor="let financeupfit of financeupfits">
                                            <label class="customCheckbox">
                                                <span class="customCheckbox_name">{{financeupfit.description}}</span>
                                                <i class="disclaimer_bubble" attr.data-title="{{financeupfit.upfit_disclaimer}}" *ngIf="financeupfit.disclaimer != ''">i</i>
                                            </label>

                                            <div class="payOpt__checkItem__price">{{financeupfit.total_price}}</div>

                                        </div>
                                    </div>
                                </div>

                                <!-- Autonation Upfits Finance -->
                                <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="autoNationFinance_upfits != '' && autoNationFinance_upfits != undefined && autoNationFinance_upfits != 0 && finance_priceDispalyType !== 'M'">
                                    <div class="payOpt__bill_label">Dealer Accessories</div>
                                    <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>${{autoNationFinance_upfits}}</div>
                                </div>

                                <!-- Homenet Upfits Finance -->
                                <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="is_homenet_vin_finance == 'Y' && homenet_market_adjustment_cost != undefined && homenet_market_adjustment_cost != '' ">
                                    <div class="payOpt__bill_label">Dealer Upfits <i class="disclaimer_bubble" data-title="Please contact dealer for more details.">i</i></div>
                                    <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>${{homenet_market_adjustment_cost}}</div>
                                </div>

                                <!-- FFF -->
                                <div>
                                    <div class="payOpt__bill payOpt__bill--dropdown">
                                        <div class="payOpt__bill__label">Downpayment</div>
                                        <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>${{financedownpayment_disp}}</div>
                                    </div>
                                </div>

                                <!-- trade-in -->
                                <div class="payOpt__bill payOpt__bill--dropdown">
                                    <div class="payOpt__bill__label">Trade-in</div>
                                    <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>${{financetradein}}</div>
                                </div>

                                <!-- Incentives -->
                                <!-- <div>
                                                                        <div class="payOpt__bill payOpt__bill--dropdown">
                                                                            <div class="payOpt__bill__label">Incentives</div>
                                                                            <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{financeincentivetotal|
                                                                            currency:'USD':'symbol':'1.0-0'}}</div>
                                                                        </div>
                                                                    </div> -->

                                <!--Service and protection starts-->
                                <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(spFDropdown,'3','Finance',financedetails?.payload_service_protection?.total_sp, 'spFDropdown_drop')" *ngIf="financeserviceprotection?.length > 0">

                                    <div class="payOpt__bill__label">Service & Protection Plans <i *ngIf="customeplan == 0" class="disclaimer_bubble monthly_taxes" data-title="Paid - monthly">i</i></div>
                                    <div class="payOpt__bill__value">
                                        <i class="payOpt__bill__value__minus"></i>{{financedetails?.payload_service_protection?.total_sp|
                                        currency:'USD':'symbol':'1.2-2'}}
                                    </div>
                                    <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="spFDropdown_drop payOpt__dropContent_wrap closeIt  payOpt__dropContent_due" #spFDropdown>
                                    <div class="payOpt__dropContent" *ngIf="financeserviceprotection?.length > 0">
                                        <div class="payOpt__checkItem">
                                            <div class="payOpt__checkItem__content" *ngFor="let serviceprotection of financeserviceprotection">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">{{serviceprotection.fee_type.toLowerCase( )}}</span>
                                                </label>
                                                <div class="payOpt__checkItem__price">{{serviceprotection.Amount|
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--Service and protection ends-->

                                <!-- Accessories -->
                                <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="finance_payload_mopar_accessries != undefined && finance_payload_mopar_accessries.length > 0" (click)="dropdownToggle(financeAccessoriesDropdown,finance_payload_mopar_accessries.length,'finance','mopar', 'financeAccessoriesDropdown_drop')">
                                    <div class="payOpt__bill__label">Accessories</div>
                                    <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{finance_mopar_accessries_total|
                                        currency:'USD':'symbol':'1.2-2'}}</div>
                                    <span class="down_arrow_svg" *ngIf="finance_payload_mopar_accessries != undefined && finance_payload_mopar_accessries.length > 0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="financeAccessoriesDropdown_drop payOpt__dropContent_wrap closeIt" #financeAccessoriesDropdown>
                                    <div *ngIf="finance_payload_mopar_accessries != undefined && finance_payload_mopar_accessries.length > 0" class="payOpt__dropContent">
                                        <div class="payOpt__checkItem" *ngFor="let mopar of finance_payload_mopar_accessries">
                                            <div class="payOpt__checkItem__content">
                                                <label class="customCheckbox">
                                                    <input type="checkbox" name="lease_mopar" id="{{mopar.part_no}}" value="{{mopar.part_no}}" [checked]="mopar.checked==undefined || !mopar.checked" (click)="onCheckboxChange_finance($event, 1, 0, 'mopar', mopar.part_no);" (click)="shiftdigitalevent()">
                                                    <span id="li_{{mopar.part_no}}" class="customCheckbox_name">{{mopar.title}}</span>
                                                    <!-- <div id="li_{{mopar.id}}" *ngIf="mopar.checked == -1">{{mopar.title}}</div> -->
                                                </label>
                                                <!-- <i class="disclaimer_bubble" data-title='Ball Mount Adapter is designed for a 2 Hitch Receiver and allows a 2.75" rise or 4" drop in ball position. The adapter features a 1" ball shank, is 9" long and is rated to handle up to a 6,000 lb load and 600 lb of tongue weight.'>i</i> -->
                                                <div class="payOpt__checkItem__price">{{mopar.msrp|
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <!-- Accessories -->
                                <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="finance_dlr_accessories != '' && finance_dlr_accessories != undefined">
                                    <div class="payOpt__bill__label">Accessories</div>
                                    <div class="payOpt__bill__value">{{finance_dlr_accessories | currency:'USD':'symbol':'1.0-0'}}</div>
                                </div>

                                <div class="payment-form-row">
                                    <div class="payOpt__bill payOpt__bill__adjusted">
                                        <div class="payOpt__bill__label">
                                            <strong>AMOUNT TO FINANCE</strong>
                                            <span *ngIf="vehicle_type === 'new'">Includes available offers and incentives.</span>
                                        </div>

                                        <div class="payOpt__bill__value" *ngIf="financeflag == 1 && viewoffer==0 && !finance_has_vauto_dlr_disc && is_homenet_vin != 'Y'">{{financecapitalizedcost?.toString().replace(',','')
                                            | currency:'USD':'symbol':'1.0-0'}}</div>
                                        <div class="payOpt__bill__value" *ngIf="financeflag == 1 && viewoffer==1 && !finance_has_vauto_dlr_disc && finance_homenet_list_price == ''">{{financecapitalizedcostxdiscount |
                                            currency:'USD':'symbol':'1.0-0'}}</div>
                                        <div class="payOpt__bill__value" *ngIf="finance_has_vauto_dlr_disc">{{financecapitalizedcost?.toString().replace(',','') |
                                            currency:'USD':'symbol':'1.0-0'}}</div>
                                        <div class="payOpt__bill__value" *ngIf="is_homenet_vin == 'Y'">{{financecapitalizedcost?.toString().replace(',','') |
                                            currency:'USD':'symbol':'1.0-0'}}</div>
                                    </div>
                                </div>
                                <!--  Taxes and Fees Section -->
                                <div class="payOpt__bill payOpt__bill--dropdown payOpt__bill__taxesfee" (click)="dropdownToggle(taxfeeFDropdown,'2','Finance','', 'taxfeeFDropdown_drop')" *ngIf="financetaxfeestotal > 0 ">
                                    <div class="payOpt__bill__label">
                                        <span *ngIf="taxesFinEnable == 'Y'">Taxes & Fees <i class="tax_fees_bubble disclaimer_bubble" data-title="Sales tax applicable as per the respective state, city of the dealership or where you will register the vehicle. May include the first-year state registration fees for your new car, collected by the dealer; Documentation fee charged by the dealer, to prepare the sales contract">i</i></span>
                                        <span *ngIf="taxesFinEnable != 'Y'"> Dealer Fees <i class="disclaimer_bubble" data-title="Sales tax applicable as per the respective state, city of the dealership or where you will register the vehicle. May include the first-year state registration fees for your new car, collected by the dealer; Documentation fee charged by the dealer, to prepare the sales contract">i</i></span>
                                        <br /><span *ngIf="customerzipcode !=''" class="zipcode-dummy">ZIP Code</span>
                                    </div>
                                    <div class="payOpt__bill__value">
                                        <i class="payOpt__bill__value__minus"></i>{{financetaxfeestotal|
                                        currency:'USD':'symbol':'1.2-2'}}
                                    </div>
                                    <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <!-- <div *ngIf="(customerzipcode !='' || zipcode !='') && financetaxfeestotal > 0" class="zipcode-edit">
                                    <span>Zip Code {{customerzipcode||zipcode}}<span class="down_arrow_svg" title="Edit"
                                            (click)="estimatepopupFn('zip');">edit</span></span>
                                </div> -->
                                <div class="taxfeeFDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_taxfee closeIt" #taxfeeFDropdown>
                                    <div class="payOpt__dropContent">
                                        <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(taxFDropdown,'3','Finance','taxes', 'taxFDropdown_drop')" *ngIf="financetaxdetails?.length > 0">
                                            <div class="payOpt__bill__label">Taxes</div>
                                            <div class="payOpt__bill__value">
                                                <i class="payOpt__bill__value__minus"></i>{{financedetails?.payload_taxes?.feedetails?.total|
                                                currency:'USD':'symbol':'1.2-2'}}
                                            </div>
                                            <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                </svg></span>
                                        </div>
                                        <div class="taxFDropdown_drop payOpt__dropContent_wrap closeIt" #taxFDropdown>
                                            <div class="payOpt__dropContent" *ngIf="financetaxdetails?.length > 0">
                                                <div class="payOpt__checkItem">
                                                    <div class="payOpt__checkItem__content" *ngFor="let tax of financetaxdetails">
                                                        <label class="customCheckbox">
                                                            <span class="customCheckbox_name" id="">{{tax.FeeName}}
                                                                <span class="customCheckbox_name_sub" id="" *ngIf="tax.FeeDescription != null && tax.FeeDescription !='Title Fee' ">({{tax.FeeDescription}})</span>
                                                            </span>
                                                        </label>
                                                        <div class="payOpt__checkItem__price">{{tax.Amount|
                                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(feeFDropdown,'3','Finance','fees', 'feeFDropdown_drop')" *ngIf="financefeesdetails?.length > 0">
                                            <div class="payOpt__bill__label">Fees</div>
                                            <div class="payOpt__bill__value">
                                                <i class="payOpt__bill__value__minus"></i>{{financedetails?.payload_fees?.total_fees|
                                                currency:'USD':'symbol':'1.2-2'}}
                                            </div>
                                            <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                </svg></span>
                                        </div>
                                        <div class="feeFDropdown_drop payOpt__dropContent_wrap closeIt" #feeFDropdown>
                                            <div class="payOpt__dropContent" *ngIf="financefeesdetails?.length > 0">
                                                <div class="payOpt__checkItem">
                                                    <div class="payOpt__checkItem__content" *ngFor="let fees of financefeesdetails">
                                                        <label class="customCheckbox">
                                                            <span class="customCheckbox_name" id="">{{fees.fee_type}}</span>
                                                            <i class="disclaimer_bubble" data-title="{{fees.Disclaimer}}" *ngIf="fees.Disclaimer != null ">i</i>
                                                        </label>

                                                        <div class="payOpt__checkItem__price">{{fees.Amount|
                                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="widget-row row-5" *ngIf="vehicle_type == 'used'">
                                    <div class="col-12">
                                        <div class="payOpt__annual">
                                            <label class="payOpt__annual__label"><strong>Annual Percentage Rate(APR)</strong></label><br>

                                            <mat-radio-group name="finance_apr_rate_radio" class="apr-rate-radio-group" [(ngModel)]="financeaprradio">
                                                <mat-radio-button name="finance_apr_rate_radio" class="apr-rate-radio-button" value="defaultapr" (change)="radioAprRateChange($event)" [checked]="financeaprradio === 'defaultapr'">
                                                    <label class="payOpt__annual__rate">{{financeapr}}%(CCAP<i class="disclaimer_bubble" data-title="This rate is based on the ‘Term Duration’ selected and available compatible cash incentives. Rate is for well qualified buyers; not all buyers will qualify. Your rate may vary. See dealer for details.">i</i>
                                                        )</label>
                                                </mat-radio-button><br>

                                                <mat-radio-button name="finance_apr_rate_radio" class="apr-rate-radio-button" value="thirdpartyapr" (change)="radioAprRateChange($event)" [checked]="financeaprradio === 'thirdpartyapr'">
                                                    <div class="payOpt__annual__rate">
                                                        <input id="apr_rate_in_finance" type="text"(keypress)="keyPressin($event)" (keyup)="thirdpartyaprChange($event);" [maxLength]=5 value="{{financeaprthirdparty}}" [disabled]="financeaprradio === 'defaultapr'" pattern="/^[0-9.]{0,10}$/" style="width: 50px;">
                                                       % (Third Party
                                                        <i class="disclaimer_bubble" data-title="If you obtain financing from a third party, enter your financing here. Your total Estimated Amount Financed may be lower due to a Cash Incentive Offer.">i</i>
                                                        )
                                                    </div>
                                                </mat-radio-button>
                                            </mat-radio-group>
                                        </div>
                                    </div>
                                </div>
                                <!-- Subvented or Non-Subvented & Term Duration-->
                                <div class="widget-row row-5 payOpt__payment__selectrow term-duration">

                                    <!-- Subvented or Non-Subvented -->
                                    <div class="col-7 term-option-section payOpt__bill__label" *ngIf="vehicle_type == 'new'">
                                        <b>Annual Percentage Rate (APR)</b>
                                          <div class="widget-form-check" *ngFor="let prograDetails of lenderProgramDetails">
                                            <input class="widget-form-check-input" (change)="updatePaymentSNS($event, prograDetails.programType ,prograDetails.value)" id="{{prograDetails.programType}}_{{prograDetails.value}}" type="radio" name="location" [checked]="prograDetails.checked" />
                                            <label class="widget-form-check-label sns_lable" for="{{prograDetails.programType}}_{{prograDetails.value}}">{{prograDetails.value}}%({{prograDetails.name}}) </label>
                                        </div>
                                      <!--  <div class="widget-form-check" *ngIf="lender_programType_subvented === 'Subvented Retail Finance'">
                                            <input class="widget-form-check-input" (change)="updatePaymentSNS($event, 'lowest_apr',apr_rate_subvented)" id="drs_apr" type="radio" name="location" [checked]="lowestType == 'lowest_apr'" />
                                            <label class="widget-form-check-label sns_lable" for="drs_apr">{{apr_rate_subvented}}%({{lender_program_name_subvented}})</label>
                                        </div>
                                        <div class="widget-form-check" *ngIf="lender_programType_nonsubvented === 'Non-subvented Finance'">
                                            <input class="widget-form-check-input" (change)="updatePaymentSNS($event, 'lowest_price',apr_rate_nonsubvented)" id="drs_price" type="radio" [checked]="lowestType == 'lowest_price'" name="location" />
                                            <label class="widget-form-check-label sns_lable" for="drs_price"> {{apr_rate_nonsubvented}}%({{lender_program_name_nonsubvented}})</label>
                                        </div>
                                        <div class="widget-form-check" *ngIf="lease_lender_program_name_dealerdefine=='Estimated APR'">
                                            <input class="widget-form-check-input" (change)="updatePaymentSNS($event, 'dealer_price',lease_apr_rate_dealerdefine)" id="drs_price" type="radio" [checked]="lowestType == 'dealer_price'" name="location" />
                                            <label class="widget-form-check-label sns_lable" for="drs_price">{{lease_apr_rate_dealerdefine}}%({{lease_lender_program_name_dealerdefine}})</label>
                                        </div> -->
                                    </div>
                                    <!-- <div class="col-7 term-option-section payOpt__bill__label" *ngIf="(!subventedProgramStatus || !nonSubventedProgramStatus) && vehicle_type == 'new'">
                                        <b>Annual Percentage Rate (APR)</b>
                                        <div *ngIf="subventedProgramStatus && !nonSubventedProgramStatus">
                                            <label class="form-control-label sns_lable" for="drs_apr">{{apr_rate_subvented}}% ({{lender_program_name_subvented}})</label>
                                        </div>
                                        <div *ngIf="!subventedProgramStatus && nonSubventedProgramStatus">
                                            <label class="form-control-label sns_lable" for="drs_price">{{apr_rate_nonsubvented}}% ({{lender_program_name_nonsubvented}})</label>
                                        </div>
                                    </div> -->

                                </div>

                                <div class="widget-row row-5 payOpt__bill__selectrow payment-form-row" *ngIf="financerangearr.length > 0">
                                    <div class="col-12">
                                        <!-- <div class="form-group choose-credit">
                                            <label for="">Choose your Credit Range</label>
                                            <mat-form-field class="demo-full-width select-parent" appearance="outline" style="width:100%">
                                                <select class="select-box" matNativeControl placeholder="Tier-{{financetier}}" name="financetiers" id="financetiers" (change)="onCheckboxChange_finance($event, 1, 1, 'credit', '', '', 'creditRating')" (click)="shiftdigitalevent()">
                                                    <option *ngFor="let tier of financerangearr" [value]="tier.code" [selected]="tier.code == financetier || financerangearr.length == 1">Tier-{{tier.code}} [{{tier.low}} - {{tier.high}}] - {{tier.txtdisp}}</option>
                                                </select>
                                            </mat-form-field>
                                        </div> -->
                                        <mat-form-field appearance="outline" style="width: 100%;">
                                            <mat-label>Choose your Credit Range</mat-label>
                                            <mat-select class="dropdown-calc" [(value)]="financetier" matNativeControl placeholder="Tier-{{financetier}}" name="financetiers" id="financetiers" (change)="onCheckboxChange_finance($event, 1, 1, 'credit', '', '', 'creditRating')" (click)="shiftdigitalevent()">
                                                <mat-option *ngFor="let tier of financerangearr" [value]="tier.code">
                                                    Tier-{{tier.code}} [{{tier.low}} - {{tier.high}}] - {{tier.txtdisp}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                </div>

                                <!-- Cash Down-->
                                <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(cashdnDropdown,'1','','', 'cashdnDropdown_drop')" *ngIf="financedueatsigningval != undefined && financedueatsigningval?.toString().replace(',','') > 0 && (taxesFinEnable == 'Y' || feesFinEnable == 'Y')">
                                    <div class="payOpt__bill__label">Cash Down</div>
                                    <div class="payOpt__bill__value" *ngIf="financeserviceprotection?.length <= 0">
                                        <i class="payOpt__bill__value"></i>{{financedueatsigningval?.toString().replace(',','')|
                                        currency:'USD':'symbol':'1.0-0'}}
                                    </div>
                                    <div class="payOpt__bill__value" *ngIf="financeserviceprotection?.length > 0">
                                        <i class="payOpt__bill__value"></i>{{financedueatSandP|
                                        currency:'USD':'symbol':'1.0-0'}}
                                    </div>
                                    <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="cashdnDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_due closeIt" #cashdnDropdown>
                                    <div class="payOpt__dropContent" *ngIf="financedueatsigningval != undefined && financedueatsigningval?.toString().replace(',','') != 0 ">
                                        <div class="payOpt__checkItem">
                                            <div class="payOpt__checkItem__content">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">Down Payment</span>
                                                </label>
                                                <div class="payOpt__checkItem__price">${{financedownpayment}}</div>
                                            </div>
                                            <div class="payOpt__checkItem__content">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">Taxes & Fees</span>
                                                </label>
                                                <div class="payOpt__checkItem__price">{{financetaxfeestotal |
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                            <div class="payOpt__checkItem__content" *ngIf="financeserviceprotection?.length > 0">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">Service & Protection</span>
                                                </label>
                                                <div class="payOpt__checkItem__price">{{financedetails?.payload_service_protection?.total_sp|
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Disclaimer -->
                            <div class="disclaimer-content">
                                <div class="downpaymenterror" *ngIf="(financemonthlycost <= 0 || financeamountwithSandP <= 0)"><b>Downpayment + Trade-in value is higher than the financing cost of the vehicle. You may be eligible to receive an amount from the dealer. Your dealer will confirm the final pricing based on the incentives, discounts, trade-in value and taxes & fees.</b> </div>

                                <div class="lease-total-price" *ngIf="financeserviceprotection?.length == 0">
                                    <span class="widget_calc_final_price">Buy for </span>
                                    <span class="widget_calc_final_price">{{financemonthlycost | currency:'USD':'symbol':'1.0-0'}} <sup><i class="disclaimer_bubble" data-title="This value is for estimation purposes only. You may not be able to finance your vehicle at this rate. See dealer for details.">i</i></sup></span>

                                    <div class="widget_calc_final_sub">per month for {{defaultfinanceterm}} months.</div>
                                </div>


                                <div class="lease-total-price" *ngIf="financeserviceprotection?.length > 0">
                                    <div *ngIf="financetaxfeestotal == 0 || custome_added_plan == 0">
                                        <span class="widget_calc_final_price">MONTHLY PAYMENT IN FINANCE </span>
                                        <span class="widget_calc_final_price" *ngIf="custome_added_plan == 1 &&(taxesEnable=='N' && feesEnable=='N')">{{financeamountwithSandP_taxesandfeedisable| currency:'USD':'symbol':'1.0-0'}}</span>
                                        <span class="widget_calc_final_price" *ngIf="custome_added_plan == 1 &&!(taxesEnable=='N' && feesEnable=='N')">{{financeamountwithSandP| currency:'USD':'symbol':'1.0-0'}}</span>
                                        <span class="widget_calc_final_price" *ngIf="custome_added_plan == 0">{{financemonthlycost| currency:'USD':'symbol':'1.0-0'}}</span>
                                        <div span class="widget_calc_final_sub" *ngIf="custome_added_plan == 1">(first month payment with service protection)</div>
                                    </div>

                                    <div>
                                        <span class="widget_calc_final_price">Buy for</span>
                                        <span class="widget_calc_final_price">{{financeamountwithSandP| currency:'USD':'symbol':'1.0-0'}} <sup><i class="disclaimer_bubble" data-title="This value is for estimation purposes only. You may not be able to finance your vehicle at this rate. See dealer for details.">i</i></sup></span>
                                        <div class="widget_calc_final_sub">per month for {{defaultfinanceterm}} months.</div>
                                        <div class="widget_calc_final_sub" *ngIf="custome_added_plan == 0 && financeserviceprotection?.length > 0">(Includes Service & Protection plans)</div>
                                    </div>

                                </div>

                                <!-- <div class="disclaimer-text disclimerfont" *ngIf="(financedisclaimertext != null || financedisclaimertext != '' ) && !showFullDescriptionfinance" [innerHTML]="fnSliceDisclaimer(financedisclaimertext, 'finance')"></div>
                                <div class="disclaimer-text disclimerfont" *ngIf="(financedisclaimertext == null || financedisclaimertext == ''  )&& !showFullDescriptionfinance" [innerHTML]="fnSliceDisclaimer(financedisclaimertextwithouttaxesandfee, 'finance')"></div> -->

                                <div class="disclaimer-text disclimerfont" *ngIf="(financedisclaimertext != null && financedisclaimertext != '' ) && showFullDescriptionfinance" [innerHTML]="financedisclaimertext "></div>
                                <div class="disclaimer-text disclimerfont" *ngIf="(financedisclaimertext == null || financedisclaimertext == ''  )&& showFullDescriptionfinance" [innerHTML]="financedisclaimertextwithouttaxesandfee"></div>

                                <!-- <a class="showmore" (click)="toggleDescriptionfinance()">{{ showFullDescriptionfinance ? 'Show less' : '...Show more' }}</a> -->
                            </div>
                        </div>


                    </div>
                </div>
            </div>
            <!-- FINANCE PAYMENT CALCULATOR ENDS -->
            <!-- CASH PAYMENT CALCULATOR STARTS -->
            <div id="widget_popup_payment_tabs_cash" *ngIf="activeTab == 'cash'  " class="widget_popup_payment_tab-pane" role="tabpanel" aria-labelledby="widget_popup_payment_tabs_btn_cash">

                <div *ngIf="cashdetails && cashdetails.status == 200">
                    <div class="widget_popup_payment_summarise">
                        <!-- Price -->
                        <div class="payment-form-row disp-block">
                            <!-- VAuto -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="cash_has_vauto_dlr_disc && msrp_vin_details_cash != cash_vauto_list_price  && (cash_vauto_upfit == undefined || cash_vauto_upfit =='') &&(is_vauto_vin == 'Y' && price_display_type == 'L')">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </label>

                                <label class="payOpt__bill__value">{{cash_vauto_list_price | currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>

                            <!--  (click)="dropdownToggle(upfitDropdownCashVauto,1,'','', 'upfitDropdownCashVauto_drop')"-->
                            <div class="payOpt__bill payOpt__bill__listprice payOpt__bill--dropdown" *ngIf="cash_has_vauto_dlr_disc && cash_vauto_list_price != '' && cash_vauto_upfit != undefined && cash_vauto_upfit != '' && msrp_vin_details_cash != cash_vauto_list_price && cash_homenet_list_price == ''">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                    <!-- <span class="payOpt__bill__includes">Includes MSRP, Upfits and Dealer fees</span> -->
                                </label>
                                <label class="payOpt__bill__value">{{cash_vauto_list_price| currency:'USD':'symbol':'1.0-0'}}</label>
                                <!-- <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></span> -->
                            </div>
                            <!-- <div class="upfitDropdownCashVauto_drop payOpt__dropContent_wrap payOpt__dropContent_upfit closeIt" #upfitDropdownCashVauto>
                                <div class="payOpt__dropContent ">
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">MSRP <span>{{cash_vin_msrp |
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">Upfits<span>{{cash_vauto_upfit |
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                </div>
                            </div> -->

                            <!-- Max Digital -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="cash_has_max_digital_dlr_disc && !cash_has_vauto_dlr_disc && cash_vin_msrp != cash_max_list_price">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </label>
                                <label class="payOpt__bill__value">{{cash_max_list_price | currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>

                            <!-- Ferrario -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="this.cash_ferrario_list_price != undefined && this.cash_ferrario_list_price != '' && cash_vin_msrp != cash_ferrario_list_price">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </label>
                                <label class="payOpt__bill__value">{{cash_ferrario_list_price | currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>

                            <!-- Cash Autonation -->
                            <div class="payOpt__bill__listprice" *ngIf="is_autoNationCash_vin == 'Y' && autoNation_CashlistPrice != '' && autoNation_CashlistPrice != undefined && autoNation_CashlistPrice != null && msrp_vin_details != autoNation_CashlistPrice">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </div>
                                <div class="payOpt__bill__value">{{autoNation_CashlistPrice| currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>

                            <!-- Homenet -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="cash_homenet_list_price != ''  && cash_vin_msrp != cash_homenet_list_price ">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </label>
                                <label class="payOpt__bill__value">{{cash_homenet_list_price |
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>
                            <!-- <div class="payOpt__bill payOpt__bill__listprice payOpt__bill--dropdown" *ngIf="cash_homenet_list_price != '' && homenet_cache == 'N' " (click)="dropdownToggle(upfitDropdowncashhomenet,1,'','', 'upfitDropdowncashhomenet_drop')">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                    <span class="payOpt__bill__includes">Includes MSRP, market Adjustment Cost</span>
                                </label>
                                <label class="payOpt__bill__value">{{cash_homenet_list_price|
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                                <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></span>
                            </div>
                            <div class="upfitDropdowncashhomenet_drop payOpt__dropContent_wrap payOpt__dropContent_upfit closeIt" #upfitDropdowncashhomenet>
                                <div class="payOpt__dropContent ">
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">MSRP <span>{{cash_vin_msrp |
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">Market Adjustment<span>{{homenet_market_adjustment_cost |
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                </div>
                            </div> -->

                            <!-- DAT List Price-->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="cashupfitflag == 1 && cashupfitstype =='L' && !cash_has_max_digital_dlr_disc && !cash_has_vauto_dlr_disc">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">List Price<span class="disclaimerTooltip__star" *ngIf="cashupfitsdisclaimer !=''">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="cashupfitsdisclaimer !=''">
                                            <p class="disclaimerTooltip__msg">{{cashupfitsdisclaimer}}</p>
                                        </div>
                                    </div>
                                    <span class="payOpt__bill__includes" *ngIf="cashupfitslabel !=''">{{cashupfitslabel}}</span>
                                    <span class="payOpt__bill__includes" *ngIf="cashupfitslabel =='' || !cashupfitslabel || cashupfitslabel == null">Includes MSRP,
                                        Upfits and Dealer fees</span>
                                </label>
                                <label class="payOpt__bill__value">{{msrp_cash| currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>

                            <!-- DAT Upfit-->
                            <!-- (click)="dropdownToggle(upfitDropdownch,1,'','', 'upfitDropdownch_drop')"  &&  cashupfitstype =='U'-->
                            <div class="payOpt__bill payOpt__bill__listprice payOpt__bill--dropdown" *ngIf="(cashupfitflag == 1 || cashdiscounttotal > 0)  &&  !cash_has_homenet_dlr_disc && msrp_cash != vin_msrp &&!cash_has_max_digital_dlr_disc && !cash_has_vauto_dlr_disc && cash_homenet_list_price == '' &&   !(is_autoNationCash_vin == 'Y' && autoNationCash_listPrice != '' && autoNationCash_listPrice != null && autoNationCash_listPrice != undefined && msrp_vin_details_cash != autoNationCash_listPrice)">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">List Price
                                        <span class="disclaimerTooltip__star" *ngIf="dat_cashupfitsdisclaimer !=''">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="dat_cashupfitsdisclaimer !=''">
                                            <p class="disclaimerTooltip__msg">{{dat_cashupfitsdisclaimer}}</p>
                                        </div>
                                    </div>
                                    <span class="payOpt__bill__includes" *ngIf="cashupfitslabel !=''">{{cashupfitslabel}}</span>
                                    <span class="payOpt__bill__includes" *ngIf="cashupfitslabel =='' || !cashupfitslabel || cashupfitslabel == null">Includes MSRP,
                                        Upfits and Dealer fees</span>
                                </label>
                                <label class="payOpt__bill__value">{{msrp_cash| currency:'USD':'symbol':'1.0-0'}}</label>
                                <!-- <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></span> -->
                            </div>
                            <!-- <div class="upfitDropdownch_drop payOpt__dropContent_wrap payOpt__dropContent_upfit closeIt" #upfitDropdownch>
                                <div class="payOpt__dropContent " *ngIf="cashupfitflag == 1">
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">MSRP <span>{{msrp_vin_details_cash|
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                    <div class="payOpt__checkItem ">
                                        <div><strong class="payOpt__checkItem__title">Upfits<span>{{cashupfitamount|
                                                    currency:'USD':'symbol':'1.0-0'}}</span></strong></div>
                                        <div class="payOpt__checkItem__content" *ngFor="let cashupfit of cashupfits">
                                            <label class="customCheckbox">
                                                <span class="customCheckbox_name" id="">{{cashupfit.description}}</span>
                                                <i class="disclaimer_bubble" data-title="{{cashupfit.disclaimer}}" *ngIf="cashupfit.disclaimer != ''">i</i>
                                            </label>

                                            <div class="payOpt__checkItem__price">{{cashupfit.total_price}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                            <div class="payOpt__bill widget_mb_20" *ngIf="vehicle_type == 'used'">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">Dealer Price<span class="disclaimerTooltip__star" *ngIf="cashmsrpdisclaimer != null">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="cashmsrpdisclaimer != null">
                                            <p class="disclaimerTooltip__msg" [innerHTML]="cashmsrpdisclaimer"></p>
                                        </div>
                                    </div>
                                    (Sticker Price)
                                </label>
                                <label class="payOpt__bill__value">{{dealer_price_cash|
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>

                            <!-- MSRP-->
                            <div class="payOpt__bill widget_mb_20" *ngIf="this.vehicle_type == 'new'&& cashupfitflag == 0">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">MSRP <span class="disclaimerTooltip__star" *ngIf="cashmsrpdisclaimer != null">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="cashmsrpdisclaimer != null">
                                            <p class="disclaimerTooltip__msg" [innerHTML]="cashmsrpdisclaimer"></p>
                                        </div>
                                    </div>
                                    (Sticker Price)
                                </label>
                                <label class="payOpt__bill__value" *ngIf="(cash_max_list_price == '' || cash_max_list_price == undefined) && (cash_vauto_list_price == '' || cash_vauto_list_price == undefined)&& (cash_ferrario_list_price == '' || cash_ferrario_list_price == undefined) && (autoNation_CashlistPrice == '' || autoNation_CashlistPrice == undefined) ">{{cash_vin_msrp|
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                                <label class="payOpt__bill__value" *ngIf="(cash_max_list_price != '' && cash_max_list_price != undefined) || (cash_vauto_list_price != '' && cash_vauto_list_price != undefined)|| (cash_ferrario_list_price != '' && cash_ferrario_list_price != undefined ) || (autoNation_CashlistPrice != '' && autoNation_CashlistPrice != undefined)">{{cash_vin_msrp|
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>
                            <div class="payOpt__bill widget_mb_20" *ngIf="cashupfitflag != 0 && !cash_has_max_digital_dlr_disc ">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">MSRP <span class="disclaimerTooltip__star">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip">
                                            <p class="disclaimerTooltip__msg" [innerHTML]="cashmsrpdisclaimer"></p>
                                        </div>
                                    </div>
                                    (Sticker Price)
                                </label>
                                <label class="payOpt__bill__value">{{msrp_vin_details_cash|
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>
                        </div>

                        <!-- Zipcode -->
                        <div class="" *ngIf="(customerzipcode !='' || zipcode !='') && cashtaxfeestotal > 0 ">
                            <mat-form-field appearance="outline" style="width: 100%;" class="mat-mdc-form-field-infix">
                                <mat-label> Enter ZIP Code</mat-label>
                                <input name="zipcode" id="zipcode" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" (change)="invokepupulation($event)" maxlength="5" minlength="4" class="dropdown-calc" value="{{zipcode}}" matInput>
                                <!-- <mat-error class="error invalid-feedback" *ngIf="error==1">Please enter valid ZIP Code </mat-error> -->
                            </mat-form-field>
                            <span class="error error-zip" style="color:red;font-size:12px" *ngIf="error==1">Please enter valid ZIP Code </span>
                        </div>

                        <!-- state and county -->
                        <div class="payment-form-row" *ngIf="countycitylist?.length > 0 && (customerzipcode !='' || zipcode !='') && cashtaxfeestotal > 0  && error == 0" style="margin-top:-15px">
                            <div class="payment-input-fields">
                                <mat-form-field appearance="outline" style="width: 100%;">
                                    <mat-label>Select your County & City</mat-label>
                                    <mat-select class="dropdown-calc" name="countycity" id="countycity" [(value)]="selectedCountyCity" (selectionChange)="onDropdownChange($event)">
                                        <mat-option *ngFor="let data of countycitylist" [value]="data.county_city">
                                            {{data.county_city}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>

                        <!-- Trade In -->
                        <div class="payment-form-row" style="margin-top:10px;">
                            <div class="payment-input-fields cash-trade">
                                <mat-form-field appearance="outline" style="width: 100%;">
                                    <mat-label> Trade-in Value</mat-label>
                                    <input id="trade_in_cash" type="text" (focus)="clearIfZero($event,'tradein')" (blur)="resetIfEmpty($event,'tradein')" [disabled]="cash_lock == 0" [maxLength]=6 (change)="onCheckboxChange_cash($event, 'tradein')" (click)="shiftdigitalevent()" value="{{cashtradein}}" (keypress)="keyPressDn($event)" matInput (input)="validateNumericInput($event)">
                                </mat-form-field>
                            </div>
                        </div>
                        <div *ngIf="vehicle_type === 'new'" class="payOpt__bill payOpt__bill--dropdown payOpt__bill--dropdown--open" (click)="dropdownToggle(exploreConditionalOfferCash, conditionalCashDataToShow.length,'cash','conditional-offer', 'exploreConditionalOfferCash')">
                            <div class="payOpt__bill__label">Explore Conditional Offers <i class="disclaimer_bubble" data-title="Please contact dealer for more details." *ngIf="is_homenet_vin_cash == 'Y'">i</i></div>
                            <div class="payOpt__bill__value" *ngIf="!hideConditionalOffterCash && is_homenet_vin_cash != 'Y'"><i class="payOpt__bill__value__minus"></i>{{cashconditionaltotal|
                                currency:'USD':'symbol':'1.0-0'}}</div>
                            <span class="down_arrow_svg" *ngIf="conditionalCashDataToShow.length > 0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                </svg></span>
                        </div>
                        <div class="exploreConditionalOfferCash payOpt__dropContent_wrap" #exploreConditionalOfferCash>
                            <div *ngIf="conditionalCashDataToShow != undefined && conditionalCashDataToShow.length > 0" class="payOpt__dropContent">
                                <div *ngFor="let data of conditionalCashDataToShow" class="incentive-heading">
                                    <p class="Checkbox-heading" style="font-weight: bold !important; margin-bottom: 0px!important;" *ngIf="data.name != ' '">{{data.name}}</p>
                                    <b class="Checkbox-heading" *ngIf="data.name == ' '"><br></b>
                                    <div class="payOpt__checkItem" *ngFor="let condition of data.data">
                                        <div class="payOpt__checkItem__content">
                                            <label class="customCheckbox" [ngClass]="{ 'noCheckbox': hideConditionalOffterCash }">
                                                <input type="checkbox" value="{{condition.programId}}" [checked]="condition.isChecked" (click)="conditionalCheckCash($event, condition.programId)" *ngIf="!hideConditionalOffterCash && is_homenet_vin_cash != 'Y'">
                                                <span [ngClass]="{'customCheckboxStrike': condition.noeligible == true}" class="customCheckbox_name">{{condition.programName}}</span>
                                                <i class="disclaimer_bubble" attr.data-title="{{condition.programRules}}">i</i>
                                            </label>
                                            <div class="payOpt__checkItem__price" [ngClass]="{'customCheckboxStrike': condition.noeligible == true}">{{condition.amount| currency:'USD':'symbol':'1.0-0'}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>




                        <div class="price-breakdown">
                            <div class="widget_price_calculations_section">
                                <!-- Incentive -->
                                <div *ngIf="vehicle_type === 'new'" class="payOpt__bill payOpt__bill--dropdown">
                                    <div class="payOpt__bill__label">Incentives <span *ngIf="is_homenet_incentives == false ">&nbsp;Included</span><i class="disclaimer_bubble" data-title="Please contact dealer for more details." *ngIf="is_homenet_vin_cash == 'Y'">i</i></div>
                                    <div class="payOpt__bill__value" *ngIf="is_homenet_vin_cash != 'Y'"><i class="payOpt__bill__value__minus"></i>{{cashincentivetotal|
                                        currency:'USD':'symbol':'1.0-0'}}</div>
                                    <span class="down_arrow_svg" (click)="dropdownToggle(incentiveCash, cashincentivedata.length, 'cash', 'incentive', 'incentiveCash')" *ngIf="cashincentivedata.length > 0 && cashincentivetotal > 0 "><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="incentiveCash payOpt__dropContent_wrap closeIt" #incentiveCash>
                                    <div *ngIf="cashincentivedata != undefined && cashincentivedata.length > 0" class="payOpt__dropContent">
                                        <div *ngFor="let data of cashincentivedata">
                                            <div class="payOpt__checkItem payOpt__dropContent_due">
                                                <div class="payOpt__checkItem__content">

                                                    <label class="customCheckbox">
                                                        <span class="customCheckbox_name" [ngClass]="{'hideIncentive' : data.checked == -1}">{{data.programName}}</span>
                                                        <i class="disclaimer_bubble" attr.data-title="{{data.programRules}}">i</i>
                                                    </label>


                                                    <div class="payOpt__checkItem__price">{{data.amount| currency:'USD':'symbol':'1.0-0'}}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Conditional Offer -->
                                <div>
                                    <div class="payOpt__bill payOpt__bill--dropdown">
                                        <div class="payOpt__bill__label">Conditional Offer</div>
                                        <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{cashconditionaltotal|
                                            currency:'USD':'symbol':'1.0-0'}}</div>
                                    </div>
                                </div>

                                <!-- Dealer Discount -->
                                <div *ngIf="isDealerDiscountNormalVisible">
                                    <div class="payOpt__bill--dropdown" (click)="dropdownToggle(cashdealerDropdown,cashdiscountdata.length,'cash','dealer-discount', 'cashdealerDropdown_drop')" *ngIf="(viewoffer == 0 || cash_has_vauto_dlr_disc || cash_has_max_digital_dlr_disc || cash_has_ferrario_dlr_disc == true|| cash_has_homenet_dlr_disc == true) && cashdiscounttotal > 0" [className]="cashdiscountdata.length > 0 && !cash_has_vauto_dlr_disc ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'">
                                        <div class="payOpt__bill__label" *ngIf="is_homenet_vin_cash != 'Y'">Dealer Discount</div>
                                        <div class="payOpt__bill__label" *ngIf="is_homenet_vin_cash == 'Y'">Dealer Discount/Bonus <i class="disclaimer_bubble" data-title="Please contact dealer for more details.">i</i></div>
                                        <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{cashdiscounttotal|
                                            currency:'USD':'symbol':'1.0-0'}}</div>
                                        <span class="down_arrow_svg" *ngIf="cashdiscountdata.length > 0 && !cash_has_vauto_dlr_disc"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                            </svg></span>
                                    </div>
                                </div>
                                <div *ngIf="isDealerDiscountBoldVisible">
                                    <div class="payOpt__bill--dropdown" (click)="dropdownToggle(cashdealerDropdown,cashdiscountdata.length,'cash','dealer-discount', 'cashdealerDropdown_drop')" *ngIf="(viewoffer == 0 || cash_has_vauto_dlr_disc || cash_has_max_digital_dlr_disc || cash_has_ferrario_dlr_disc == true|| cash_has_homenet_dlr_disc == true) && cashdiscounttotal > 0" [className]="cashdiscountdata.length > 0 && !cash_has_vauto_dlr_disc ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'">
                                        <div class="payOpt__bill__label"><b class="discountbold">Dealer Discount</b></div>
                                        <div class="payOpt__bill__value"><b class="discountbold"><i class="payOpt__bill__value__minus"></i>{{cashdiscounttotal|
                                                currency:'USD':'symbol':'1.0-0'}}</b></div>
                                        <span class="down_arrow_svg" *ngIf="cashdiscountdata.length > 0 && !cash_has_vauto_dlr_disc"><b class="discountbold"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                </svg></b></span>
                                    </div>
                                </div>

                                <div class="cashdealerDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_discount closeIt" #cashdealerDropdown>
                                    <div class="payOpt__dropContent" *ngIf="cashdiscountdata.length > 0">
                                        <div class="payOpt__checkItem" *ngFor="let disc of cashdiscountdata">
                                            <div class="payOpt__checkItem__content">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name">{{disc.discount_name}}</span>
                                                    <i class="disclaimer_bubble" data-title="{{disc.discount_disclaimer}}">i</i>
                                                </label>
                                                <div class="payOpt__checkItem__price"> {{disc.discount_amount|
                                                    currency:'USD':'symbol':'1.0-0'}}</div>
                                                <!-- <div class="payOpt__checkItem__price" *ngIf="disc.discount_amount.indexOf('%') == -1">
                                                    {{disc.discount_amount|
                                                    currency:'USD':'symbol':'1.0-0'}}</div>
                                                <div class="payOpt__checkItem__price" *ngIf="disc.discount_amount.indexOf('%') > -1">
                                                    {{disc.discount_amount}}</div> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Dealer Cash Upfits -->
                                <div class="payOpt__bill--dropdown" *ngIf="cashupfitamount !=  '' && cashupfitamount != 0 && cashupfitamount != undefined && is_autoNationCash_vin != 'Y' && is_homenet_vin_cash == 'N'" [className]="cashupfitamount !=  '' && cashupfitamount != 0 && cashupfitamount != undefined ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'">
                                    <label class="payOpt__bill__label">Dealer Upfit</label>
                                    <label class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{cashupfitamount|
                                        currency:'USD':'symbol':'1.0-0'}}</label>
                                    <span class="down_arrow_svg" (click)="dropdownToggle(cashupfitDropdown, cashupfits.length, 'cash', 'upfits', 'cashupfitDropdown_drop')" *ngIf="cashupfits.length > 0 "><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="cashupfitDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_discount closeIt" #cashupfitDropdown>
                                    <div class="payOpt__dropContent" *ngIf="cashupfits.length > 0">
                                        <div class="payOpt__checkItem__content" *ngFor="let cashupfit of cashupfits">
                                            <label class="customCheckbox">
                                                <span class="customCheckbox_name">{{cashupfit.description}}</span>
                                                <i class="disclaimer_bubble" attr.data-title="{{cashupfit.upfit_disclaimer}}" *ngIf="cashupfit.disclaimer != ''">i</i>
                                            </label>

                                            <div class="payOpt__checkItem__price">{{cashupfit.total_price}}</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Autonation Upfits Cash -->
                                <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="autoNationCash_upfits != '' && autoNationCash_upfits != undefined && autoNationCash_upfits != 0 && price_display_type !== 'M'">
                                    <div class="payOpt__bill_label">Dealer Accessories</div>
                                    <div class="payOpt__bill__value">{{autoNationCash_upfits}}</div>
                                </div>

                                <!-- Homenet Upfits Finance -->
                                <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="is_homenet_vin_cash == 'Y' && homenet_market_adjustment_cost != undefined && homenet_market_adjustment_cost != '' ">
                                    <div class="payOpt__bill_label">Dealer Upfits <i class="disclaimer_bubble" data-title="Please contact dealer for more details.">i</i></div>
                                    <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>${{homenet_market_adjustment_cost}}</div>
                                </div>
                                
                                <!-- trade-in -->
                                <div class="payOpt__bill payOpt__bill--dropdown">
                                    <div class="payOpt__bill__label">Trade-in</div>
                                    <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>${{cashtradein}}</div>
                                </div>

                                <!-- Incentives -->
                                <!-- <div>
                                    <div class="payOpt__bill payOpt__bill--dropdown">
                                        <div class="payOpt__bill__label">Incentives</div>
                                        <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{cashincentivetotal|
                                        currency:'USD':'symbol':'1.0-0'}}</div>
                                    </div>
                                </div> -->

                                <!--Service and protection starts-->
                                <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(spCDropdown,'3','cash',cashdetails?.payload_service_protection?.total_sp, 'spCDropdown_drop')" *ngIf="cashserviceprotection?.length > 0">
                                    <div class="payOpt__bill__label">Service
                                        & Protection Plans</div>
                                    <div class="payOpt__bill__value">
                                        <i class="payOpt__bill__value__minus"></i>{{cashdetails?.payload_service_protection?.total_sp|
                                        currency:'USD':'symbol':'1.2-2'}}
                                    </div>
                                    <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="spCDropdown_drop payOpt__dropContent_wrap closeIt  payOpt__dropContent_due" #spCDropdown>
                                    <div class="payOpt__dropContent" *ngIf="cashserviceprotection?.length > 0">
                                        <div class="payOpt__checkItem">
                                            <div class="payOpt__checkItem__content" *ngFor="let serviceprotection of cashserviceprotection">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">{{serviceprotection.fee_type.toLowerCase( )}}</span>
                                                </label>
                                                <div class="payOpt__checkItem__price">{{serviceprotection.Amount|
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--Service and protection ends-->

                                <!-- Accessories -->
                                <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="cash_payload_mopar_accessries != undefined && cash_payload_mopar_accessries.length > 0" (click)="dropdownToggle(cashAccessoriesDropdown, cash_payload_mopar_accessries.length,'cash','mopar', 'cashAccessoriesDropdown_drop')">
                                    <div class="payOpt__bill__label">Accessories</div>
                                    <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{cash_mopar_accessries_total|
                                        currency:'USD':'symbol':'1.2-2'}}</div>
                                    <span class="down_arrow_svg" *ngIf="cash_payload_mopar_accessries != undefined && cash_payload_mopar_accessries.length > 0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="cashAccessoriesDropdown_drop payOpt__dropContent_wrap closeIt" #cashAccessoriesDropdown>
                                    <div *ngIf="cash_payload_mopar_accessries != undefined && cash_payload_mopar_accessries.length > 0" class="payOpt__dropContent">
                                        <div class="payOpt__checkItem" *ngFor="let mopar of cash_payload_mopar_accessries">
                                            <div class="payOpt__checkItem__content">
                                                <label class="customCheckbox">
                                                    <input type="checkbox" name="lease_mopar" id="{{mopar.part_no}}" value="{{mopar.part_no}}" [checked]="mopar.checked==undefined || !mopar.checked" (click)="onCheckboxChange_cash($event, 'mopar', mopar.part_no);" (click)="shiftdigitalevent()">
                                                    <span id="li_{{mopar.part_no}}" class="customCheckbox_name">{{mopar.title}}</span>
                                                    <!-- <div id="li_{{mopar.id}}" *ngIf="mopar.checked == -1">{{mopar.title}}</div> -->
                                                </label>
                                                <!-- <i class="disclaimer_bubble" data-title='Ball Mount Adapter is designed for a 2 Hitch Receiver and allows a 2.75" rise or 4" drop in ball position. The adapter features a 1" ball shank, is 9" long and is rated to handle up to a 6,000 lb load and 600 lb of tongue weight.'>i</i> -->


                                                <div class="payOpt__checkItem__price">{{mopar.msrp|
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <!-- Accessories -->
                                <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="cash_dlr_accessories != '' && cash_dlr_accessories != undefined">
                                    <div class="payOpt__bill__label">Accessories</div>
                                    <div class="payOpt__bill__value">{{cash_dlr_accessories | currency:'USD':'symbol':'1.0-0'}}</div>
                                </div>
                                <!--  Taxes and Fees Section -->
                                <div class="payOpt__bill payOpt__bill--dropdown payOpt__bill__taxesfee" (click)="dropdownToggle(taxfeeCDropdown,'2','Cash','', 'taxfeeCDropdown_drop')" *ngIf="cashtaxfeestotal > 0 ">
                                    <div class="payOpt__bill__label">
                                        <span *ngIf="taxesFinEnable == 'Y'">Taxes & Fees <i class="tax_fees_bubble disclaimer_bubble" data-title="Sales tax applicable as per the respective state, city of the dealership or where you will register the vehicle. May include the first-year state registration fees for your new car, collected by the dealer; Documentation fee charged by the dealer, to prepare the sales contract">i</i></span>
                                        <span *ngIf="taxesFinEnable != 'Y'"> Dealer Fees <i class="disclaimer_bubble" data-title="Sales tax applicable as per the respective state, city of the dealership or where you will register the vehicle. May include the first-year state registration fees for your new car, collected by the dealer; Documentation fee charged by the dealer, to prepare the sales contract">i</i></span>
                                        <br /><span *ngIf="customerzipcode !=''" class="zipcode-dummy">ZIP Code</span>
                                    </div>
                                    <div class="payOpt__bill__value">
                                        <i class="payOpt__bill__value__minus"></i>{{cashtaxfeestotal|
                                        currency:'USD':'symbol':'1.2-2'}}
                                    </div>
                                    <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>

                                <div class="taxfeeCDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_taxfee closeIt" #taxfeeCDropdown>
                                    <div class="payOpt__dropContent">
                                        <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(taxCDropdown,'3','Cash','taxes', 'taxCDropdown_drop')" *ngIf="cashtaxdetails?.length > 0">
                                            <div class="payOpt__bill__label">Taxes</div>
                                            <div class="payOpt__bill__value">
                                                <i class="payOpt__bill__value__minus"></i>{{cashdetails?.payload_taxes?.feedetails?.total|
                                                currency:'USD':'symbol':'1.2-2'}}
                                            </div>
                                            <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                </svg></span>
                                        </div>
                                        <div class="taxCDropdown_drop payOpt__dropContent_wrap closeIt" #taxCDropdown>
                                            <div class="payOpt__dropContent" *ngIf="cashtaxdetails?.length > 0">
                                                <div class="payOpt__checkItem">
                                                    <div class="payOpt__checkItem__content" *ngFor="let tax of cashtaxdetails">
                                                        <label class="customCheckbox">
                                                            <span class="customCheckbox_name" id="">{{tax.FeeName}}
                                                                <span class="customCheckbox_name_sub" id="" *ngIf="tax.FeeDescription != null && tax.FeeDescription !='Title Fee' ">({{tax.FeeDescription}})</span>
                                                            </span>
                                                        </label>
                                                        <div class="payOpt__checkItem__price">{{tax.Amount|
                                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(feeCDropdown,'3','cash','Fees', 'feeCDropdown_drop')" *ngIf="cashfeesdetails?.length > 0">
                                            <div class="payOpt__bill__label">Fees</div>
                                            <div class="payOpt__bill__value">
                                                <i class="payOpt__bill__value__minus"></i>{{cashdetails?.payload_fees?.total_fees|
                                                currency:'USD':'symbol':'1.2-2'}}
                                            </div>
                                            <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                </svg></span>
                                        </div>

                                        <div class="feeCDropdown_drop payOpt__dropContent_wrap closeIt" #feeCDropdown>
                                            <div class="payOpt__dropContent" *ngIf="cashfeesdetails?.length > 0">
                                                <div class="payOpt__checkItem">
                                                    <div class="payOpt__checkItem__content" *ngFor="let fees of cashfeesdetails">
                                                        <div class="customCheckbox">
                                                            <span class="customCheckbox_name" id="">{{fees.fee_type}}</span>
                                                            <i class="disclaimer_bubble" attr.data-title="{{fees.Disclaimer}}" *ngIf="fees.Disclaimer != null ">i</i>
                                                        </div>

                                                        <div class="payOpt__checkItem__price">{{fees.Amount|
                                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Disclaimer -->
                            <div class="disclaimer-content">
                                <div class="downpaymenterror" *ngIf="(cashmonthlycost <= 0 || cashmonthlycostxdiscount <= 0)"><b>Trade-in value is higher than the price of the vehicle. You may be eligible to receive an amount from the dealer. Your dealer will confirm the final pricing based on the incentives, discounts, trade-in value and taxes & fees.</b> </div>

                                <div class="lease-total-price" *ngIf="cashserviceprotection?.length <= 0">
                                    
                                    <!-- max -->
                                    <span class="widget_calc_final_price" *ngIf="viewoffer==0 && !cash_has_vauto_dlr_disc && !cash_has_ferrario_dlr_disc == true  && cash_homenet_list_price == ''">{{cashmonthlycost|currency:'USD':'symbol':'1.0-0'}}
                                        <sup><i *ngIf="taxesFinEnable == 'Y'" class="disclaimer_bubble" data-title="*Estimated Net Price includes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>
                                        <sup><i *ngIf="taxesFinEnable == 'N'" class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>
<!-- <sup>
                                 <i *ngIf="estimated_net_price_disclaimer" class="disclaimer_bubble" [attr.data-title]="estimated_net_price_disclaimer">i</i>
                                 </sup> -->

                                    </span>
                                    <span class="widget_calc_final_price" *ngIf="viewoffer==1 && !cash_has_vauto_dlr_disc && !cash_has_ferrario_dlr_disc == true">{{cashmonthlycostxdiscount|
                                        currency:'USD':'symbol':'1.0-0'}}


                                        <sup><i  class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>

                                    </span>
                                    <!-- vauto -->
                                    <span class="widget_calc_final_price" *ngIf="cash_has_vauto_dlr_disc && !cash_has_ferrario_dlr_disc && cash_homenet_list_price == ''">{{cashmonthlycost|currency:'USD':'symbol':'1.0-0'}}
                                        <sup><i *ngIf="taxesEnable == 'Y'" class="disclaimer_bubble" data-title="*Estimated Net Price includes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>
                                        <sup><i *ngIf="taxesEnable == 'N'" class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>

                                    </span>
                                    <!-- ferrario-->
                                    <span class="widget_calc_final_price" *ngIf="cash_has_ferrario_dlr_disc  && cash_homenet_list_price == ''">{{cashmonthlycost|currency:'USD':'symbol':'1.0-0'}}

                                        <sup><i *ngIf="taxesFinEnable == 'Y'" class="disclaimer_bubble" data-title="*Estimated Net Price includes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>
                                        <sup> <i *ngIf="taxesFinEnable == 'N'" class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>

                                    </span>
                                    <!-- homenet -->
                                    <span class="widget_calc_final_price" *ngIf="cash_homenet_list_price != '' ">{{cashmonthlycost|currency:'USD':'symbol':'1.0-0'}}
                                        <sup> <i *ngIf="taxesEnable == 'Y'" class="disclaimer_bubble" data-title="*Estimated Net Price includes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>
                                        <sup> <i *ngIf="taxesEnable == 'N'" class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>


                                    </span>
                                    <div class="widget_calc_final_sub">Estimated Net Price</div>
                                    
                                </div>

                                <div class="lease-total-price" *ngIf="cashserviceprotection?.length > 0">
                                    <span class="widget_calc_final_price" *ngIf="viewoffer==0 && !cash_has_vauto_dlr_disc && !cash_has_ferrario_dlr_disc == true && cash_homenet_list_price == ''">{{cashmonthlycost|currency:'USD':'symbol':'1.0-0'}}<sup><i class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup></span>
                                    <span class="widget_calc_final_price" *ngIf="viewoffer==1 && !cash_has_vauto_dlr_disc && !cash_has_ferrario_dlr_disc == true && cash_homenet_list_price == ''">{{cashmonthlycostxdiscount|
                                        currency:'USD':'symbol':'1.0-0'}}<sup><i class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup></span>
                                    <span class="widget_calc_final_price" *ngIf="cash_has_vauto_dlr_disc && cash_has_ferrario_dlr_disc != true && cash_homenet_list_price == ''">Est.Net Price{{cashmonthlycost|currency:'USD':'symbol':'1.0-0'}}<sup><i class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup></span>
                                    <span class="widget_calc_final_price" *ngIf="cash_has_ferrario_dlr_disc == true && cash_homenet_list_price == ''">{{cashmonthlycost|currency:'USD':'symbol':'1.0-0'}}<sup><i class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup></span>
                                    <span class="widget_calc_final_price" *ngIf="cash_homenet_list_price != '' ">{{cashmonthlycost|currency:'USD':'symbol':'1.0-0'}}<sup><i class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup></span>
                                    <div class="widget_calc_final_sub">Estimated Net Price</div>
                                </div>
                                <!-- <div class="disclaimer-text disclimerfont" *ngIf="(cashdisclaimertext != null || cashdisclaimertext != '' ) && !showFullDescriptioncash" [innerHTML]="fnSliceDisclaimer(cashdisclaimertext, 'cash')"></div>
                                <div class="disclaimer-text disclimerfont" *ngIf="(cashdisclaimertext == null || cashdisclaimertext == '' )&& !showFullDescriptioncash" [innerHTML]="fnSliceDisclaimer(cashdisclaimertextwithouttaxesandfee, 'cash')"></div> -->

                                <div class="disclaimer-text disclimerfont" *ngIf="(cashdisclaimertext != null && cashdisclaimertext != '' ) && showFullDescriptioncash" [innerHTML]="cashdisclaimertext "></div>
                                <div class="disclaimer-text disclimerfont" *ngIf="(cashdisclaimertext == null || cashdisclaimertext == '')&& showFullDescriptioncash" [innerHTML]="cashdisclaimertextwithouttaxesandfee"></div>

                                <!-- <a class="showmore" (click)="toggleDescriptioncash()">{{ showFullDescriptioncash ? 'Show less' : '...Show more' }}</a> -->
                            </div>


                        </div>
                    </div>
                </div>
            </div>
            <!-- CASH PAYMENT CALCULATOR ENDS -->
        </div>
    </div>
    <!-- POPUP FOR PAYMENT CALCULATOR ENDS -->
</div>
<!--   PAYMENT CALCULATOR for Mobile ENDS -->
<!--   PAYMENT CALCULATOR for Desktop STARTS -->
<div *ngIf="!isMobileScreen">
    <div class="calculator_container">
        <button *ngIf="!hideCash || hideCash === undefined" id="closeCalculator" class="mD__close position-absolute" aria-label="Close" (click)="closePopup()">
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 8 8" fill="none">
                <path d="M7.77295 6.97699C7.87862 7.08266 7.93799 7.22599 7.93799 7.37543C7.93799 7.52487 7.87862 7.66819 7.77295 7.77387C7.66728 7.87954 7.52395 7.9389 7.37451 7.9389C7.22507 7.93891 7.08175 7.87954 6.97607 7.77387L3.99998 4.79683L1.02295 7.77293C0.917276 7.8786 0.773954 7.93797 0.624511 7.93797C0.475068 7.93797 0.331746 7.8786 0.226073 7.77293C0.120401 7.66726 0.0610352 7.52393 0.0610352 7.37449C0.0610352 7.22505 0.120401 7.08173 0.226073 6.97605L3.2031 3.99996L0.227011 1.02293C0.121339 0.917256 0.0619727 0.773934 0.0619727 0.624491C0.0619727 0.475048 0.121339 0.331726 0.227011 0.226054C0.332683 0.120382 0.476005 0.0610155 0.625448 0.0610155C0.774891 0.0610155 0.918214 0.120382 1.02389 0.226054L3.99998 3.20309L6.97701 0.225585C7.08268 0.119913 7.226 0.0605469 7.37545 0.0605469C7.52489 0.0605469 7.66821 0.119913 7.77389 0.225585C7.87956 0.331257 7.93892 0.474579 7.93892 0.624022C7.93892 0.773466 7.87956 0.916788 7.77389 1.02246L4.79685 3.99996L7.77295 6.97699Z"
                    fill="black" />
            </svg>
        </button>
        <div class="widget-row widget-payment-heading-row">
            <div class="widget-col-lg-4 widget-p-0">
                <div class="payment-heading">Payment Estimator</div>
            </div>
            <div class="widget-col-lg-6">
                <div class="widget_purchase-options">
                    <mat-button-toggle-group style="margin-left:20%" [(ngModel)]="activeTab" (valueChange)="paymentSelctionChange($event)" name="payType" aria-label="Pay Type" style="margin-left:20%">
                        <mat-button-toggle *ngIf="vehicle_type == 'new' && leaseResponseAvailable" value="lease" (click)="leasetabga4()">Lease</mat-button-toggle>
                        <mat-button-toggle value="finance" (click)="financetabga4()" *ngIf="finaceResponseAvailable">Finance</mat-button-toggle>
                        <mat-button-toggle value="cash" (click)="cashtabga4()" *ngIf="!hideCash || hideCash === undefined">Cash</mat-button-toggle>
                    </mat-button-toggle-group>
                </div>
            </div>
        </div>
        <div class="loading-text" *ngIf="loaderImage">Loading...</div>
        <!-- LEASE PAYMENT CALCULATOR STARTS -->
        <div id="widget_popup_payment_tabs_lease" *ngIf="activeTab == 'lease' && vehicle_type=='new' && leaseResponseAvailable" class="widget_popup_payment_tab-pane active" role="tabpanel" aria-labelledby="widget_popup_payment_tabs_btn_lease">
            <form action="" class="inWidgetForm">

                <div class="d-flex widget-row" *ngIf="leasedetails && leasedetails.status == 200">
                    <div class="widget-col-6">
                        <div class="price-details">Price Details</div>
                        <!-- Price -->
                        <div class="payment-form-row disp-block">
                            <!-- VAuto -->
                            <div class="payOpt__bill__listprice" *ngIf="has_vauto_dlr_disc && msrp_vin_details != vauto_list_price && vauto_list_price != ''  && (vauto_upfit == undefined || vauto_upfit == '')">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </label>
                                <label class="payOpt__bill__value">{{vauto_list_price| currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>
                            <!-- (click)="dropdownToggle(upfitDropdownVauto,1,'','', 'upfitDropdownVauto_drop')"-->
                            <div class="payOpt__bill__listprice payOpt__bill--dropdown" *ngIf="has_vauto_dlr_disc && vauto_list_price != '' && vauto_upfit != undefined && vauto_upfit != '' && msrp_vin_details != vauto_list_price && msrp_vin_details != vauto_price_wo_incentive">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                    <!-- <span class="payOpt__bill__includes">Includes MSRP, Upfits and Dealer fees</span> -->
                                </label>
                                <label class="payOpt__bill__value">{{vauto_list_price| currency:'USD':'symbol':'1.0-0'}}</label>
                                <!-- <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></span> -->
                            </div>
                            <!-- <div class="upfitDropdownVauto_drop payOpt__dropContent_wrap payOpt__dropContent_upfit closeIt" #upfitDropdownVauto>
                                <div class="payOpt__dropContent payOpt__bill__listprice">
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">MSRP <span>{{vin_msrp |
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">Upfits<span>{{vauto_upfit |
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                </div>
                            </div> -->

                            <!-- Max Digital -->
                            <div class="payOpt__bill__listprice" *ngIf="has_max_digital_dlr_disc && !has_vauto_dlr_disc && vin_msrp != max_list_price">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </div>
                                <div class="payOpt__bill__value">{{max_list_price | currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>

                            <!-- Ferrario -->
                            <div class="payOpt__bill__listprice" *ngIf="this.ferrario_list_price != undefined && this.ferrario_list_price != '' && vin_msrp != ferrario_list_price">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </div>
                                <div class="payOpt__bill__value">{{ferrario_list_price | currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>

                            <!-- Lease Autonation -->
                            <div class="payOpt__bill__listprice" *ngIf="is_autoNation_vin == 'Y' && autoNation_listPrice != '' && autoNation_listPrice != undefined && autoNation_listPrice != null && msrp_vin_details != autoNation_listPrice">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </div>
                                <div class="payOpt__bill__value">{{autoNation_listPrice| currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>

                            <!-- DAT List Price-->
                            <div class="payOpt__bill__listprice" *ngIf="leaseupfitflag == 1 && leaseupfitstype =='L' && !has_max_digital_dlr_disc && !has_vauto_dlr_disc">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">List Price<span class="disclaimerTooltip__star" *ngIf="leaseupfitsdisclaimer !=''">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="leaseupfitsdisclaimer !=''">
                                            <p class="disclaimerTooltip__msg">{{leaseupfitsdisclaimer}}</p>
                                        </div>
                                    </div>
                                    <span class="payOpt__bill__includes" *ngIf="leaseupfitslabel !=''">{{leaseupfitslabel}}</span>
                                    <span class="payOpt__bill__includes" *ngIf="leaseupfitslabel =='' || !leaseupfitslabel || leaseupfitslabel == null">Includes
                                        MSRP, Upfits and Dealer fees</span>
                                </div>
                                <div class="payOpt__bill__value">{{msrp| currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>

                            <!-- DAT upfit-->
                            <!-- (click)="dropdownToggle(upfitDropdown,1,'','', 'upfitDropdown_drop')" &&  leaseupfitstype =='U' -->
                            <div class="payOpt__bill__listprice payOpt__bill--dropdown" *ngIf="(leaseupfitflag == 1 || discounttotal > 0)  && !has_max_digital_dlr_disc && !has_vauto_dlr_disc && msrp != msrp_vin_details  && !(is_autoNation_vin == 'Y' && autoNation_listPrice != '' && autoNation_listPrice != undefined && autoNation_listPrice != null && msrp_vin_details != autoNation_listPrice)">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">List Price

                                        <span class="disclaimerTooltip__star" *ngIf="dat_leaseupfitsdisclaimer !=''">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="dat_leaseupfitsdisclaimer !=''">
                                            <p class="disclaimerTooltip__msg">{{dat_leaseupfitsdisclaimer}}</p>
                                        </div>

                                    </div>
                                    <span class="payOpt__bill__includes" *ngIf="leaseupfitslabel !=''">{{leaseupfitslabel}}</span>
                                    <span class="payOpt__bill__includes" *ngIf="leaseupfitslabel =='' || !leaseupfitslabel || leaseupfitslabel == null">Includes MSRP, Upfits and
                                        Dealer fees</span>
                                </div>
                                <div class="payOpt__bill__value">{{msrp| currency:'USD':'symbol':'1.0-0'}}</div>
                                <!-- <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></span> -->
                            </div>
                            <!-- <div class="upfitDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_upfit closeIt" #upfitDropdown>
                                <div class="payOpt__dropContent " *ngIf="leaseupfitflag == 1">
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">MSRP <span>{{msrp_vin_details|
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">Upfits<span>{{leaseupfitamount|
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                        <div class="payOpt__checkItem__content" *ngFor="let leaseupfit of leaseupfits">
                                            <label class="customCheckbox">
                                                <span class="customCheckbox_name" id="">{{leaseupfit.description}}</span>
                                                <i class="disclaimer_bubble" data-title="{{leaseupfit.disclaimer}}" *ngIf="leaseupfit.disclaimer != ''">i</i>
                                            </label>

                                            <div class="payOpt__checkItem__price">{{leaseupfit.total_price}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div> -->

                            <!-- MSRP & VAuto MSRP-->
                            <div *ngIf="leaseupfitflag == 0" class="payOpt__bill widget_mb_20 payOpt__bill__listprice">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">MSRP <span class="disclaimerTooltip__star" *ngIf="leasemsrpdisclaimer != null">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="leasemsrpdisclaimer != null">
                                            <p class="disclaimerTooltip__msg" [innerHTML]="leasemsrpdisclaimer"></p>
                                        </div>
                                    </div>
                                    (Sticker Price)
                                </div>
                                <div class="payOpt__bill__value" *ngIf="(max_list_price == '' || max_list_price == undefined) && (vauto_list_price == '' || vauto_list_price == undefined)&& (ferrario_list_price == '' || ferrario_list_price == undefined) && (autoNation_listPrice == '' || autoNation_listPrice == undefined)">{{vin_msrp|
                                    currency:'USD':'symbol':'1.0-0'}}</div>
                                <div class="payOpt__bill__value" *ngIf="(max_list_price != '' && max_list_price != undefined) || (vauto_list_price != '' && vauto_list_price != undefined)|| (ferrario_list_price != '' && ferrario_list_price != undefined) || (autoNation_listPrice != '' && autoNation_listPrice != undefined)">{{msrp_vin_details|
                                    currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>
                            <div *ngIf="leaseupfitflag != 0 && !has_max_digital_dlr_disc" class="payOpt__bill widget_mb_20 payOpt__bill__listprice">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">MSRP <span class="disclaimerTooltip__star">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip">
                                            <p class="disclaimerTooltip__msg" [innerHTML]="leasemsrpdisclaimer"></p>
                                        </div>
                                    </div>
                                    (Sticker Price)
                                </div>
                                <div class="payOpt__bill__value">{{msrp_vin_details| currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>

                            <!-- vAuto Upfit -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="vauto_list_price == '' && vauto_upfit != undefined && vauto_upfit != ''">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">Upfits</div>
                                </div>
                                <div class="payOpt__bill__value">{{vauto_upfit | currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>
                        </div>


                        <!-- <div class="form-group" *ngIf="(customerzipcode !='' || zipcode !='') && leasetaxfeestotal > 0 ">
                    <label for="zipcode" class="calc-label">Enter Zip Code5</label>
                    <input aria-hidden="true" name="zipcode" id="zipcode" (change)="invokepupulation($event)" 
                        maxlength="5" minlength="4" class="dropdown-calc" value="{{zipcode}}"
                        />
                    <span class="error" *ngIf="error==1">Please enter valid zipcode</span>
                </div> -->

                        <div class="" *ngIf="(customerzipcode !='' || zipcode !='') && leasetaxfeestotal > 0 ">
                            <mat-form-field appearance="outline" style="width: 100%;" class="mat-mdc-form-field-infix">
                                <mat-label> Enter ZIP Code</mat-label>
                                <input name="zipcode" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" id="zipcode" (change)="invokepupulation($event)" maxlength="5" minlength="4" class="dropdown-calc" value="{{zipcode}}" matInput>
                                <!-- <mat-error class="error invalid-feedback" *ngIf="error==1">Please enter valid zipcode</mat-error> -->
                            </mat-form-field>
                            <span class="error error-zip" style="color:red;font-size:12px" *ngIf="error==1">Please enter valid ZIP Code </span>
                        </div>


                        <!-- <div  *ngIf="countycitylist?.length > 0">
                    <div class="form-group">
                        <label class="calc-label">Select your County & City</label>
                        <select class="dropdown-calc" name="countycity" id="countycity" (change)="onDropdownChange($event)">
                            <option *ngFor="let data of countycitylist" value="{{data.county_city}}">
                                {{data.county_city}} </option>
                        </select>
                    </div>
                </div>  -->

                        <div class="payment-form-row" *ngIf="countycitylist?.length > 0 && (customerzipcode !='' || zipcode !='') && leasetaxfeestotal > 0 && error == 0 " style="margin-top:-15px">
                            <div class="payment-input-fields">
                                <mat-form-field appearance="outline" style="width: 100%;">
                                    <mat-label>Select your County & City</mat-label>
                                    <mat-select class="dropdown-calc" name="countycity" id="countycity" [(value)]="selectedCountyCity" (selectionChange)="onDropdownChange($event)">
                                        <mat-option *ngFor="let data of countycitylist" [value]="data.county_city">
                                            {{data.county_city}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>


                        <div class="payment-form-row widget_mt_23">
                            <div class="payment-input-fields">
                                <mat-form-field appearance="outline" style="width: 100%;" class="mat-mdc-form-field-infix">
                                    <mat-label> Down Payment({{leasedownpaymentper}}%)</mat-label>
                                    <input name="leasedown" id="down_payment_lease" type="text" (focus)="clearIfZero($event,'downpay')" (blur)="resetIfEmpty($event,'downpay')" [disabled]="lease_lock == 0" [(ngModel)]="leasedownpayment_disp" maxlength="6" (change)="onCheckboxChange_lease($event, 1, 0, 'downpay')" (click)="shiftdigitalevent()" (keypress)="keyPressDn($event)" matInput>
                                </mat-form-field>
                                <span class="error error-zip" style="color:red;font-size:12px" *ngIf="showleasedownpaymenterror">Dealer requests a minimum {{minimumDownPercent}}% down payment.</span>
                            </div>
                        </div>


                        <!-- Trade In -->
                        <div class="payment-form-row" style="margin-top:-5px">
                            <div class="payment-input-fields">
                                <mat-form-field appearance="outline" style="width: 100%;">
                                    <mat-label> Trade-in Value</mat-label>
                                    <input id="trade_in_lease" [disabled]="lease_lock == 0" (focus)="clearIfZero($event,'tradein')" (blur)="resetIfEmpty($event,'tradein')" [maxLength]=6 type="text" (change)="onCheckboxChange_lease($event, 1, 0, 'tradein')" (click)="shiftdigitalevent()" value="{{leasetradein}}" (keypress)="keyPress($event)" matInput>
                                </mat-form-field>
                            </div>
                        </div>

                        <!-- Conditional Offer -->
                        <div class="payOpt__bill payOpt__bill--dropdown payOpt__bill--dropdown--open" (click)="dropdownToggle(exploreConditionalOfferLease, conditionalLeaseDataToShow.length,'lease','conditional-offer', 'exploreConditionalOfferLease')">
                            <label class="payOpt__bill__label fontsize">Explore Conditional Offers</label>
                            <label class="payOpt__bill__value" *ngIf="!hideConditionalOffter"><i class="payOpt__bill__value__minus"></i>{{conditionaltotal|
                                currency:'USD':'symbol':'1.0-0'}}</label>
                            <span class="down_arrow_svg" *ngIf="conditionalLeaseDataToShow.length > 0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                </svg></span>
                        </div>
                        <div class="exploreConditionalOfferLease payOpt__dropContent_wrap" #exploreConditionalOfferLease>
                            <div *ngIf="conditionalLeaseDataToShow != undefined && conditionalLeaseDataToShow.length > 0" class="payOpt__dropContent">
                                <div *ngFor="let data of conditionalLeaseDataToShow" class="incentive-heading">
                                    <p class="Checkbox-heading" style="font-weight: bold !important; margin-bottom: 0px!important;" *ngIf="data.name != ' '">{{data.name}}</p>
                                    <b class="Checkbox-heading" *ngIf="data.name == ' '"><br></b>
                                    <div class="payOpt__checkItem" *ngFor="let condition of data.data">
                                        <div class="payOpt__checkItem__content">
                                            <label class="customCheckbox" [ngClass]="{ 'noCheckbox': hideConditionalOffter }">

                                                <input type="checkbox" value="{{condition.programId}}" [checked]="condition.isChecked" (click)="conditionalCheckLease($event, condition.programId)" *ngIf="!hideConditionalOffter">
                                                <span [ngClass]="{'customCheckboxStrike': condition.noeligible == true}" class="customCheckbox_name">{{condition.programName}}</span>
                                                <i class="disclaimer_bubble" attr.data-title="{{condition.programRules}}">i</i>
                                            </label>

                                            <div class="payOpt__checkItem__price" [ngClass]="{'customCheckboxStrike': condition.noeligible == true}">{{condition.amount| currency:'USD':'symbol':'1.0-0'}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <!-- Annual Milage & Term Duration-->
                        <div class="payment-form-row" style="margin-top:30px">
                            <div class="payment-form-row mileage-outer">
                                <!-- Annual Milage -->
                                <!-- <div class="form-fields form-fields-50 mileage-info">
                                    <div for="">Annual Mileage
                                        <i class="disclaimer_bubble" data-title="Lease pays for excess wear & tear and mileage for each mile over the annual contracted lease miles, if the vehicle is returned at the end of the term.">i</i>
                                    </div>

                                    <mat-form-field class="demo-full-width select-parent" appearance="outline" style="width: 100%;">
                                        <select class="select-box" matNativeControl placeholder="{{defualtmileage}} Mileage" name="mileage_lease" id="mileage_lease" (change)="onCheckboxChange_lease($event, 3)" (click)="shiftdigitalevent()">
                                            <option *ngFor="let mileage of leasedetails.payload_calculation.mileage_list" [value]="mileage.mileage" [selected]="mileage.mileage == defualtmileage">{{mileage.mileage}} Mileage</option>
                                        </select>
                                    </mat-form-field>
                                </div> -->
                                <div class="payment-form-row">
                                    <div class="payment-input-fields">
                                        <mat-form-field appearance="outline" style="width: 100%;">
                                            <mat-label>Annual Mileage</mat-label>
                                            <mat-select class="dropdown-calc" name="mileage_lease" id="mileage_lease" [(value)]="defualtmileage" (selectionChange)="onCheckboxChange_lease($event, 3 , 0 , '', '', '', 'annualMileage' )">
                                                <mat-option *ngFor="let mileage of leasedetails.payload_calculation.mileage_list" [value]="mileage.mileage">
                                                    {{mileage.mileage}} Mileage
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                </div>

                            </div>
                        </div>


                        <!-- Credit Range -->
                        <div class="widget-row row-5 payOpt__bill__selectrow payment-form-row" *ngIf="leaserangearr?.length > 0">
                            <div class="col-12">
                                <!-- <div class="form-group">
                                    <label for="">Choose your Credit Range</label>
                                    <mat-form-field appearance="outline" style="width: 100%;" class="demo-full-width select-parent">
                                        <select class="select-box" matNativeControl placeholder="Tier-{{leasetier}}" name="leasetiers" id="leasetiers" (change)="onCheckboxChange_lease($event, 1, 1, 'credit', '', '', 'creditRating')" (click)="shiftdigitalevent()">
                                            <option *ngFor="let tier of leaserangearr" [value]="tier.code" [selected]="tier.code == leasetier">Tier-{{tier.code}} [{{tier.low}} - {{tier.high}}] - {{tier.txtdisp}}</option>
                                        </select>
                                    </mat-form-field>
                                </div> -->
                                <mat-form-field appearance="outline" style="width: 100%;">
                                    <mat-label>Choose your Credit Range</mat-label>
                                    <mat-select class="dropdown-calc" [(value)]="leasetier" placeholder="Tier-{{leasetier}}" name="leasetiers" id="leasetiers" (change)="onCheckboxChange_lease($event, 1, 1, 'credit','', '', 'creditRating')" (click)="shiftdigitalevent()">
                                        <mat-option *ngFor="let tier of leaserangearr" [value]="tier.code">
                                            Tier-{{tier.code}} [{{tier.low}} - {{tier.high}}] - {{tier.txtdisp}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                    <div class="widget-col-6">
                        <div class="btns-container">
                            <label for="">Term Duration</label>
                            <!-- <mat-chip-listbox class="btns-container" name="terms_lease" id="terms_lease" [disabled]="isChipListDisabled" (change)="onCheckboxChange_lease($event, 2, 0, '', 'term','','lengthofLoan')" (click)="shiftdigitalevent()">

                                <mat-chip-option class=".CalculatorBtns.active" *ngFor="let terms of leasedetails.payload_calculation.terms_list" [value]="terms" [selected]="terms == defaultterm">
                                    {{terms}} <br><span>months</span>
                                </mat-chip-option>

                            </mat-chip-listbox> -->

                            <mat-chip-listbox class="btns-container" name="terms_lease" id="terms_lease" [disabled]="isChipListDisabled" [ngModel]="defaultterm" (ngModelChange)="onCheckboxChange_lease($event, 2, 0, '', 'term', '' , 'lengthofLoan')" (click)="shiftdigitalevent()">
                                <mat-chip-option class="CalculatorBtns active" *ngFor="let terms of leasedetails?.payload_calculation?.terms_list" [value]="terms" [selected]="defaultterm === terms" [ngClass]="{ 'chip-background-color': terms === defaultterm }">
                                    {{ terms }} <br /><span>months</span>
                                </mat-chip-option>
                            </mat-chip-listbox>
                        </div>
                        <div class="price-breakdown">
                            <div class="widget_price_calculations_section">
                                <div class="payOpt__bill payOpt__bill--dropdown">
                                    <div class="payOpt__bill__label">Incentives</div>
                                    <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{incentivetotal|
                                        currency:'USD':'symbol':'1.0-0'}}</div>
                                    <span class="down_arrow_svg" (click)="dropdownToggle(incentiveLease, incentivedata.length,'lease','incentive', 'incentiveLease')" *ngIf="incentivedata.length > 0 && incentivetotal > 0 "><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="incentiveLease payOpt__dropContent_wrap closeIt" #incentiveLease>
                                    <div *ngIf="incentivedata != undefined && incentivedata.length > 0" class="payOpt__dropContent">
                                        <div *ngFor="let data of incentivedata">
                                            <div class="payOpt__checkItem payOpt__dropContent_due">
                                                <div class="payOpt__checkItem__content">

                                                    <label class="customCheckbox">
                                                        <span class="customCheckbox_name" [ngClass]="{'hideIncentive' : data.checked == -1}">{{data.programName}}</span>
                                                        <i class="disclaimer_bubble" attr.data-title="{{data.programRules}}">i</i>
                                                    </label>


                                                    <div class="payOpt__checkItem__price">{{data.amount| currency:'USD':'symbol':'1.0-0'}}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Incentive end -->

                                <!-- Conditional Offer -->
                                <div *ngIf="vehicle_type == 'new' ">
                                    <div class="payOpt__bill payOpt__bill--dropdown">
                                        <div class="payOpt__bill__label">Conditional Offer</div>
                                        <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{conditionaltotal|
                                            currency:'USD':'symbol':'1.0-0'}}</div>
                                    </div>
                                </div>

                                <!-- Dealer Discount -->
                                <div *ngIf="isDealerDiscountNormalVisible">
                                    <div class="payOpt__bill--dropdown" (click)="dropdownToggle(leasedealerDropdown,discountdata.length,'lease','dealer-discount', 'leasedealerDropdown_drop')" *ngIf="(viewoffer == 0 || has_vauto_dlr_disc || has_max_digital_dlr_disc || has_ferrario_dlr_disc == true) && discounttotal > 0" [className]="discountdata.length > 0 && !has_vauto_dlr_disc ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'">
                                        <div class="payOpt__bill__label">Dealer Discount</div>
                                        <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{discounttotal |
                                            currency:'USD':'symbol':'1.0-0'}}</div>
                                        <span class="down_arrow_svg" *ngIf="discountdata.length > 0 && !has_vauto_dlr_disc"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                            </svg></span>
                                    </div>
                                </div>

                                <div *ngIf="isDealerDiscountBoldVisible">
                                    <div class="payOpt__bill--dropdown" (click)="dropdownToggle(leasedealerDropdown,discountdata.length,'lease','dealer-discount', 'leasedealerDropdown_drop')" *ngIf="(viewoffer == 0 || has_vauto_dlr_disc || has_max_digital_dlr_disc || has_ferrario_dlr_disc == true) && discounttotal > 0" [className]="discountdata.length > 0 && !has_vauto_dlr_disc ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'">
                                        <div class="payOpt__bill__label"><b class="discountbold"> Dealer Discount</b></div>
                                        <div class="payOpt__bill__value"><b class="discountbold"><i class="payOpt__bill__value__minus"></i>{{discounttotal |
                                                currency:'USD':'symbol':'1.0-0'}}</b></div>
                                        <span class="down_arrow_svg" *ngIf="discountdata.length > 0 && !has_vauto_dlr_disc"><b class="discountbold"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                </svg></b></span>
                                    </div>
                                </div>


                                <div class="leasedealerDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_discount closeIt " #leasedealerDropdown>
                                    <div class="payOpt__dropContent" *ngIf="discountdata.length > 0">
                                        <div class="payOpt__checkItem" *ngFor="let disc of discountdata">
                                            <div class="payOpt__checkItem__content">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name">{{disc.discount_name}}</span>
                                                    <i class="disclaimer_bubble" data-title="{{disc.discount_disclaimer}}">i</i>
                                                </label>
                                                <div class="payOpt__checkItem__price"> {{disc.discount_amount|
                                                    currency:'USD':'symbol':'1.0-0'}}</div>
                                                <!-- <div class="payOpt__checkItem__price" *ngIf="disc.discount_amount.indexOf('%') == -1">
                                                    {{disc.discount_amount|
                                                    currency:'USD':'symbol':'1.0-0'}}</div>
                                                <div class="payOpt__checkItem__price" *ngIf="disc.discount_amount.indexOf('%') > -1">
                                                    {{disc.discount_amount}}</div> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Dealer Upfits Lease -->
                                <div class="payOpt__bill--dropdown" *ngIf="leaseupfitamount != '' && leaseupfitamount != 0 && leaseupfitamount != null && is_autoNation_vin != 'Y' && homenet_lease_vin != 'Y'" [className]="leaseupfitamount != '' && leaseupfitamount != 0 && leaseupfitamount != null  ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'">
                                    <label class="payOpt__bill__label">Dealer Upfit</label>
                                    <label class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{leaseupfitamount |
                                        currency:'USD':'symbol':'1.0-0'}}</label>
                                    <span class="down_arrow_svg" *ngIf="leaseupfits.length > 0" (click)="dropdownToggle(upfitDropdown,1,'','', 'upfitDropdown_drop')"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="upfitDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_discount closeIt " #upfitDropdown>
                                    <div class="payOpt__dropContent" *ngIf="leaseupfits.length > 0">
                                        <div class="payOpt__checkItem" *ngFor="let leaseupfit of leaseupfits">
                                            <div class="payOpt__checkItem__content">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">{{leaseupfit.description}}</span>
                                                    <i class="disclaimer_bubble" attr.data-title="{{leaseupfit.upfit_disclaimer}}" *ngIf="leaseupfit.upfit_disclaimer != ''">i</i>
                                                </label>

                                                <div class="payOpt__checkItem__price">{{leaseupfit.total_price}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- downpayment -->
                                <div>
                                    <div class="payOpt__bill payOpt__bill--dropdown">
                                        <div class="payOpt__bill__label">Downpayment</div>
                                        <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>${{leasedownpayment}}</div>
                                    </div>
                                </div>

                                <!-- trade-in -->
                                <div class="payOpt__bill payOpt__bill--dropdown">
                                    <div class="payOpt__bill__label">Trade-in</div>
                                    <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>${{leasetradein}}</div>
                                </div>

                                <!--Service and protection starts-->
                                <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(spLDropdown,'3','lease',leasedetails?.payload_service_protection?.total_sp, 'spLDropdown_drop')" *ngIf="leaseserviceprotection?.length > 0">
                                    <div class="payOpt__bill__label">Service
                                        & Protection Plans <i *ngIf="customeplan == 0" class="disclaimer_bubble monthly_taxes" data-title="Paid in lease - monthly">i</i></div>
                                    <div class="payOpt__bill__value">
                                        <i class="payOpt__bill__value__minus"></i>{{leasedetails?.payload_service_protection?.total_sp|
                                        currency:'USD':'symbol':'1.2-2'}}
                                    </div>
                                    <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="spLDropdown_drop payOpt__dropContent_wrap closeIt payOpt__dropContent_due" #spLDropdown>
                                    <div class="payOpt__dropContent" *ngIf="leaseserviceprotection?.length > 0">
                                        <div class="payOpt__checkItem">
                                            <div class="payOpt__checkItem__content" *ngFor="let serviceprotection of leaseserviceprotection">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">{{serviceprotection.fee_type.toLowerCase( )}}</span>
                                                </label>
                                                <div class="payOpt__checkItem__price">{{serviceprotection.Amount|
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--Service and protection ends-->

                                <!-- Accessories -->
                                <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="payload_mopar_accessries != undefined && payload_mopar_accessries.length > 0" (click)="dropdownToggle(leaseAccessoriesDropdown,payload_mopar_accessries.length,'lease','mopar', 'leaseAccessoriesDropdown_drop')">
                                    <div class="payOpt__bill__label">Accessories</div>
                                    <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{mopar_accessries_total|
                                        currency:'USD':'symbol':'1.2-2'}}</div>
                                    <span class="down_arrow_svg" *ngIf="payload_mopar_accessries != undefined && payload_mopar_accessries.length > 0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="leaseAccessoriesDropdown_drop payOpt__dropContent_wrap closeIt" #leaseAccessoriesDropdown>
                                    <div *ngIf="payload_mopar_accessries != undefined && payload_mopar_accessries.length > 0" class="payOpt__dropContent">
                                        <div class="payOpt__checkItem" *ngFor="let mopar of payload_mopar_accessries">
                                            <div class="payOpt__checkItem__content">
                                                <label class="customCheckbox">
                                                    <input type="checkbox" name="lease_mopar" id="{{mopar.part_no}}" value="{{mopar.part_no}}" [checked]="mopar.checked==undefined || !mopar.checked" (click)="onCheckboxChange_lease($event, 1, 0, 'mopar', mopar.part_no)" (click)="shiftdigitalevent()">
                                                    <span id="li_{{mopar.part_no}}" class="customCheckbox_name">{{mopar.title}}</span>
                                                    <!-- <div id="li_{{mopar.id}}" *ngIf="mopar.checked == -1">{{mopar.title}}</div> -->
                                                </label>
                                                <!-- <i class="disclaimer_bubble" data-title='Ball Mount Adapter is designed for a 2 Hitch Receiver and allows a 2.75" rise or 4" drop in ball position. The adapter features a 1" ball shank, is 9" long and is rated to handle up to a 6,000 lb load and 600 lb of tongue weight.'>i</i> -->
                                                <div class="payOpt__checkItem__price">{{mopar.msrp|
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>



                                <!-- Accessories -->
                                <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="dlr_accessories != '' && dlr_accessories != undefined">
                                    <div class="payOpt__bill__label">Accessories</div>
                                    <div class="payOpt__bill__value">{{dlr_accessories | currency:'USD':'symbol':'1.0-0'}}</div>
                                </div>

                                <!-- <div class="payOpt__bill payOpt__bill--dropdown" >
                                <div class="payOpt__bill__label">Trade-in</div>
                                <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>${{leasetradein}}</div>
                                </div> -->

                                <!-- Adjusted Cost -->
                                <div class="payOpt__bill payOpt__bill--dropdown">
                                    <div class="payOpt__bill__label form-fields capilize-text">
                                        <b>ADJUSTED CAPITALIZED COSTS</b>
                                        <p>Include available offers and incentives</p>
                                    </div>
                                    <!-- <div class="form-fields capilize-text" *ngIf="leasetfdisclaimerlabel">
                                    <b>ESTIMATED CAPITALIZED COSTS</b><br />
                                    Include available offers and incentives
                                </div> -->

                                    <div class="payOpt__bill__value">
                                        <span *ngIf="viewoffer == 0 && !has_vauto_dlr_disc">{{capitalizedcost?.replace(',','') | currency:'USD':'symbol':'1.0-0'}}</span>
                                        <span *ngIf="viewoffer == 1 && !has_vauto_dlr_disc">{{capitalizedcostxdiscount | currency:'USD':'symbol':'1.0-0'}}</span>
                                        <span *ngIf="has_vauto_dlr_disc">{{capitalizedcost?.replace(',','') | currency:'USD':'symbol':'1.0-0'}}</span>
                                    </div>

                                </div>



                                <!--  Taxes and Fees Section -->
                                <div class="payOpt__bill payOpt__bill--dropdown payOpt__bill__taxesfee" (click)="dropdownToggle(taxfeeLDropdown,'2','lease','', 'taxfeeLDropdown_drop')" *ngIf="leasetaxfeestotal > 0 ">
                                    <div class="payOpt__bill__label">
                                        <span *ngIf="taxesEnable == 'Y'"> Taxes & Fees <i class="tax_fees_bubble disclaimer_bubble" data-title="Sales tax applicable as per the respective state, city of the dealership or where you will register the vehicle. May include the first-year state registration fees for your new car, collected by the dealer; Documentation fee charged by the dealer, to prepare the sales contract">i</i></span>

                                        <span *ngIf="taxesEnable != 'Y'"> Dealer Fees <i class="disclaimer_bubble" data-title="Sales tax applicable as per the respective state, city of the dealership or where you will register the vehicle. May include the first-year state registration fees for your new car, collected by the dealer; Documentation fee charged by the dealer, to prepare the sales contract">i</i></span>
                                        <!-- <br /><span *ngIf="customerzipcode !=''" class="zipcode-dummy">ZIP Code</span> -->
                                    </div>
                                    <div class="payOpt__bill__value">
                                        <i class="payOpt__bill__value__minus"></i>{{leasetaxfeestotal|
                                        currency:'USD':'symbol':'1.2-2'}}
                                    </div>
                                    <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <!-- <div *ngIf="(customerzipcode !='' || zipcode !='') && leasetaxfeestotal > 0 " class="zipcode-edit">
                                <span>2Zip Code {{customerzipcode||zipcode}}<span class="down_arrow_svg" title="Edit"
                                        (click)="estimatepopupFn('zip');">edit</span></span>
                                    </div> -->
                                <div class="taxfeeLDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_taxfee closeIt" #taxfeeLDropdown>
                                    <div class="payOpt__dropContent">
                                        <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(taxLDropdown,'3','lease','taxes', 'taxLDropdown_drop')" *ngIf="leasetaxdetails?.length > 0">
                                            <div class="payOpt__bill__label">Taxes</div>
                                            <div class="payOpt__bill__value">
                                                <i class="payOpt__bill__value__minus"></i>{{leasedetails?.payload_taxes?.feedetails?.total|
                                                currency:'USD':'symbol':'1.2-2'}}
                                            </div>
                                            <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                </svg></span>
                                        </div>
                                        <div class="taxLDropdown_drop payOpt__dropContent_wrap closeIt" #taxLDropdown>
                                            <div class="payOpt__dropContent" *ngIf="leasetaxdetails?.length > 0">
                                                <div class="payOpt__checkItem">
                                                    <div class="payOpt__checkItem__content" *ngFor="let tax of leasetaxdetails">
                                                        <label class="customCheckbox">
                                                            <span class="customCheckbox_name" id="">{{tax.FeeName}}
                                                                <span class="customCheckbox_name_sub" id="" *ngIf="tax.FeeDescription != null && tax.FeeDescription !='Title Fee'">({{tax.FeeDescription}})</span>
                                                            </span>
                                                        </label>
                                                        <div class="payOpt__checkItem__price">{{tax.Amount|
                                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="leasemonthlytaxes?.length > 0 && leasedetails?.payload_taxes?.feedetails?.taxes?.monthly_tax_total == 0">
                                            <div class="payOpt__bill__label">Estimated Monthly Taxes <i class="disclaimer_bubble monthly_taxes" data-title="Paid in lease - monthly">i</i></div>
                                            <div class="payOpt__bill__value"> $0 </div>
                                        </div>
                                        <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(monthlyTaxLDropdown,'3','lease','Monthly-Taxes', 'monthlyTaxLDropdown_drop')" *ngIf="leasemonthlytaxes?.length > 0 && leasedetails?.payload_taxes?.feedetails?.taxes?.monthly_tax_total != 0">
                                            <div class="payOpt__bill__label">Estimated Monthly Taxes <i class="disclaimer_bubble monthly_taxes" data-title="Paid in lease - monthly">i</i></div>
                                            <div class="payOpt__bill__value">
                                                <i class="payOpt__bill__value__minus"></i>{{leasedetails?.payload_taxes?.feedetails?.taxes?.monthly_tax_total|
                                                currency:'USD':'symbol':'1.2-2'}}
                                            </div>
                                            <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                </svg></span>
                                        </div>
                                        <div class="monthlyTaxLDropdown_drop payOpt__dropContent_wrap closeIt" #monthlyTaxLDropdown>
                                            <div class="payOpt__dropContent" *ngIf="leasemonthlytaxes?.length > 0 && leasedetails?.payload_taxes?.feedetails?.taxes?.monthly_tax_total != 0">
                                                <div class="payOpt__checkItem">
                                                    <div class="payOpt__checkItem__content" *ngFor="let monthly_tax of leasemonthlytaxes">
                                                        <label class="customCheckbox">
                                                            <span class="customCheckbox_name" id="">{{monthly_tax.FeeName}}</span>
                                                        </label>
                                                        <div class="payOpt__checkItem__price">{{monthly_tax.Amount|
                                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(upTaxLDropdown,'3','lease','Upfront-Taxes', 'upTaxLDropdown_drop')" *ngIf="leaseupfronttaxes?.length > 0">
                                            <div class="payOpt__bill__label">Estimated Upfront Taxes</div>
                                            <div class="payOpt__bill__value">
                                                <i class="payOpt__bill__value__minus"></i>{{leasedetails?.payload_taxes?.feedetails?.taxes?.upfront_tax_total|
                                                currency:'USD':'symbol':'1.2-2'}}
                                            </div>
                                            <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                </svg></span>
                                        </div>
                                        <div class="upTaxLDropdown_drop payOpt__dropContent_wrap closeIt" #upTaxLDropdown>
                                            <div class="payOpt__dropContent" *ngIf="leaseupfronttaxes?.length > 0">
                                                <div class="payOpt__checkItem">
                                                    <div class="payOpt__checkItem__content" *ngFor="let upfront_tax of leaseupfronttaxes">
                                                        <label class="customCheckbox">
                                                            <span class="customCheckbox_name" id="">{{upfront_tax.FeeName}}
                                                                <span class="customCheckbox_name_sub" *ngIf="upfront_tax.FeeDescription != null && upfront_tax.FeeDescription !='Title Fee' ">({{upfront_tax.FeeDescription}})</span>
                                                            </span>
                                                        </label>
                                                        <div class="payOpt__checkItem__price">{{upfront_tax.Amount|
                                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(upFeeLDropdown,'3','lease',leasepaymentmode, 'upFeeLDropdown_drop')" *ngIf="leaseupfrontfees?.length > 0 && leasedetails?.payload_fees?.total_fees > 0">
                                            <div class="payOpt__bill__label" *ngIf="leasepaymentmode == 'Upfront Fees' ">Upfront
                                                Fees</div>
                                            <div class="payOpt__bill__label" *ngIf="leasepaymentmode == 'Standard' ">Upfront
                                                Fees</div>
                                            <div class="payOpt__bill__label" *ngIf="leasepaymentmode == 'dealer_fee_in_lease' || leasepaymentmode == ''">Monthly
                                                Fees</div>

                                            <div class="payOpt__bill__value">
                                                <i class="payOpt__bill__value__minus"></i>{{leasedetails?.payload_fees?.total_fees|
                                                currency:'USD':'symbol':'1.2-2'}}
                                            </div>
                                            <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                </svg></span>
                                        </div>
                                        <div class="upFeeLDropdown_drop payOpt__dropContent_wrap closeIt" #upFeeLDropdown>
                                            <div class="payOpt__dropContent" *ngIf="leaseupfrontfees?.length > 0">
                                                <div class="payOpt__checkItem">
                                                    <div class="payOpt__checkItem__content" *ngFor="let upfront_fees of leaseupfrontfees">
                                                        <label class="customCheckbox">
                                                            <span class="customCheckbox_name" id="" *ngIf="upfront_fees.Amount != 0">{{upfront_fees.fee_type}}</span>
                                                            <i class="disclaimer_bubble" attr.data-title="{{upfront_fees.Disclaimer}}" *ngIf="upfront_fees.Disclaimer != null && upfront_fees.Disclaimer != ''">i</i>
                                                        </label>

                                                        <div class="payOpt__checkItem__price" *ngIf="upfront_fees.Amount != 0"> {{upfront_fees.Amount|
                                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Subvented or Non-Subvented Lease-->
                                <div class="widget-row row-5 payOpt__payment__selectrow term-duration">


                                    <div class="col-7 term-option-section payOpt__bill__label" *ngIf="vehicle_type == 'new'">
                                        <b>Financial Institutions</b>
                                        <div class="widget-form-check" *ngFor="let prgm of leasedetails.payload_calculation?.LenderProgramDetails">
                                            <input class="widget-form-check-input" (change)="updateProgramtype($event,prgm.programType)" id="drs_apr" type="radio" [checked]="leasedetails.payload_calculation?.selectedLenderProgram === prgm.programType" />
                                            <label class="widget-form-check-label sns_lable" for="drs_apr">{{prgm.name}}</label>
                                        </div>

                                    </div>


                                </div>

                                <!--  Due at Signing -->
                                <div class="payOpt__bill payOpt__bill--dropdown payOpt__bill__due" (click)="dropdownToggle(DueDropdown,'1','','', 'DueDropdown_drop')" *ngIf="leasedueatsigningval != undefined && leasedueatsigningval?.toString().replace(',','') > 0 && (taxesEnable == 'Y' || feesEnable == 'Y')">
                                    <div class="payOpt__bill__label">
                                        <span>Due At Signing</span>
                                        <span>(Lease taxes paid upfront)</span>
                                    </div>
                                    <div class="payOpt__bill__value">
                                        <i class="payOpt__bill__value"></i>{{leasedueatsigningval | currency:'USD':'symbol':'1.0-0'}}
                                    </div>
                                    <span class="down_arrow_svg" *ngIf="leasedueatsigningval != 0 "><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="DueDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_due closeIt" #DueDropdown>
                                    <div class="payOpt__dropContent" *ngIf="leasedueatsigningval != undefined && leasedueatsigningval != 0 ">
                                        <div class="payOpt__checkItem">
                                            <div class="payOpt__checkItem__content">
                                                <div class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">Down Payment</span>
                                                </div>
                                                <div class="payOpt__checkItem__price">${{leasedownpayment}}</div>
                                            </div>
                                            <div class="payOpt__checkItem__content">
                                                <div class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">Taxes & Fees</span>
                                                </div>
                                                <div class="payOpt__checkItem__price" *ngIf="leasedetails?.payload_taxes?.tax_payment_mode == 'in_lease'">{{ (
                                                    leasedetails?.payload_taxes?.feedetails?.taxes?.monthly_tax_total
                                                    +leasedetails?.payload_taxes?.feedetails?.taxes?.upfront_tax_total +
                                                    leasedetails?.total_fee ) |
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                                <div class="payOpt__checkItem__price" *ngIf="leasedetails?.payload_taxes?.tax_payment_mode == 'due_upfront'">{{
                                                    (convertToNumber(leasedetails?.total_taxs_and_fees.replace(",","")) ) |
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                            <div class="payOpt__checkItem__content">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">First Month Payment</span>
                                                </label>
                                                <div class="payOpt__checkItem__price">{{monthlycost?.toString().replace(",","")|
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                            <div class="payOpt__checkItem__content" *ngIf="leaseserviceprotection?.length > 0">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">Service And Protection</span>
                                                </label>
                                                <div class="payOpt__checkItem__price">{{leasedetails?.payload_service_protection?.total_sp|
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Estimated Monthly payment -->
                            <div class="payment-form-row" *ngIf="leasemonthlytaxesval != undefined && leasemonthlytaxesval > 0 && (leaseserviceprotection?.length == 0 || leaseserviceprotection?.length == undefined ) &&  (taxesEnable=='Y' || feesEnable=='Y') && leasepaymentmode != 'Upfront Fees'">
                                <div class="payOpt__bill payOpt__bill__adjusted">
                                    <div class="payOpt__bill__label">
                                        <strong>ESTIMATED MONTHLY PAYMENT</strong>
                                        <span>(without Taxes & Fees)</span>
                                    </div>
                                    <div class="payOpt__bill__value">{{monthlycost?.toString().replace(',','')|
                                        currency:'USD':'symbol':'1.2-2'}}</div>
                                </div>
                            </div>
                            <div class="payment-form-row" *ngIf="leaseserviceprotection?.length > 0 && leasepaymentmode != 'Upfront Fees' && !(customeplan == 1 && leasedetails.payload_tax_payment_mode == 'due_upfront' && (taxesEnable=='Y' || feesEnable=='Y'))">
                                <div class="payOpt__bill payOpt__bill__adjusted">
                                    <div class="payOpt__bill__label">
                                        <strong>ESTIMATED MONTHLY PAYMENT</strong>
                                        <span *ngIf="customeplan==1 && leasetaxfeestotal == 0">(first month payment with service protection)</span>
                                    </div>
                                    <div class="payOpt__bill__value" *ngIf="customeplan == 0">{{monthlycost?.toString().replace(',','') |
                                        currency:'USD':'symbol':'1.2-2'}}</div>

                                    <div class="payOpt__bill__value" *ngIf="customeplan == 1 && (leasetaxfeestotal == 0 || leasepaymentmode == 'Upfront Fees')">{{monthlycostSandPTotal?.toString().replace(',','')| currency:'USD':'symbol':'1.2-2'}}</div>

                                    <div class="payOpt__bill__value" *ngIf="customeplan == 1 && leasetaxfeestotal > 0 && leasepaymentmode != 'Upfront Fees'">{{monthlycost?.toString().replace(',','')| currency:'USD':'symbol':'1.2-2'}}</div>
                                </div>
                            </div>



                            <!-- Disclaimer -->
                            <div class="disclaimer-content">
                                <!-- --- -->
                                <div class="downpaymenterror" *ngIf="leaseAmountForDisplay <= 0"><b>Downpayment + Trade-in value is higher than the leasing cost of the vehicle. You may be eligible to receive an amount from the dealer. Your dealer will confirm the final pricing based on the incentives, discounts, trade-in value and taxes & fees.</b> </div>
                                <div class="lease-total-price">
                                    <span class="widget_calc_final_price"> LEASE FOR {{leaseAmountForDisplay?.toString().replace(',','') | currency:'USD':'symbol':'1.0-0'}}<sup><i class="disclaimer_bubble" data-title="This value is for estimation purposes only. You may not be able to lease at this rate.Your dealer will confirm the final pricing.">i</i></sup>
                                    </span>

                                    <span class="widget_calc_final_sub">per month for {{defaultterm}} <span>months</span>.</span>
                                    <span class="widget_calc_final_sub" *ngIf="leasemonthlytaxesval != undefined && leasemonthlytaxesval !=0 && leaseserviceprotection?.length > 0  && custome_added_plan == 0 && leasetaxfeestotal > 0  && (taxesEnable == 'Y' || feesEnable == 'Y')">(Includes Service & Protection plans and Taxes & Fees)</span>
                                    <span class="widget_calc_final_sub" *ngIf="leaseserviceprotection?.length > 0  && custome_added_plan == 0 && leasetaxfeestotal == 0  && taxesEnable == 'N'">(Includes Service & Protection plans)</span>
                                    <span class="widget_calc_final_sub" *ngIf="(leasemonthlytaxesval != undefined && leasemonthlytaxesval !=0 )&& custome_added_plan == 0 && leaseserviceprotection?.length > 0  && (taxesEnable == 'Y' || feesEnable == 'Y') && leasetaxfeestotal == 0">(Includes Service & Protection plans)</span>
                                    <span class="widget_calc_final_sub" *ngIf="(leasemonthlytaxesval == undefined || leasemonthlytaxesval ==0 )&& custome_added_plan == 0 && leaseserviceprotection?.length > 0  && (taxesEnable == 'Y' || feesEnable == 'Y')&&taxesEnable != 'N'">(Includes Service & Protection plans)</span>
                                    <span class="widget_calc_final_sub" *ngIf="leasemonthlytaxesval != undefined && leasemonthlytaxesval !=0 && leaseserviceprotection?.length == 0  && leasetaxfeestotal > 0 && (taxesEnable == 'Y' || feesEnable == 'Y') && leasepaymentmode != 'Upfront Fees'">(With Taxes & Fees)</span>
                                    <!-- for custom plan-->
                                    <span class="widget_calc_final_sub" *ngIf="(leasemonthlytaxesval == undefined && leasemonthlytaxesval ==0) && custome_added_plan == 1 && leaseserviceprotection?.length > 0 && ((leasepaymentmode != 'Upfront Fees' && leasedetails.payload_taxes.in_lease_payment_mode != 'Standard') && leasedetails.payload_taxes.in_lease_payment_mode == 'dealer_fee_in_lease')  && leasetaxfeestotal > 0  && (taxesEnable == 'Y' || feesEnable == 'Y')">(Includes Service & Protection plans and Taxes & Fees)</span>
                                    <span class="widget_calc_final_sub" *ngIf="(leasemonthlytaxesval != undefined && leasemonthlytaxesval > 0) && custome_added_plan == 1 && leaseserviceprotection?.length > 0 && ((leasepaymentmode != 'Upfront Fees' && leasedetails.payload_taxes.in_lease_payment_mode != 'Standard') && leasedetails.payload_taxes.in_lease_payment_mode == 'dealer_fee_in_lease')  && (taxesEnable == 'Y' || feesEnable == 'Y') && leasetaxfeestotal > 0">(Includes Service & Protection plans and Taxes & Fees)</span>
                                    <span class="widget_calc_final_sub" *ngIf="custome_added_plan == 1 && leaseserviceprotection?.length > 0 && (leasepaymentmode == 'Upfront Fees' || leasedetails.payload_taxes.in_lease_payment_mode == 'Standard') && (taxesEnable == 'Y' || feesEnable == 'Y') && leasemonthlytaxesval == undefined && leasemonthlytaxesval ==0">(Includes Service & Protection plans)</span>
                                    <span class="widget_calc_final_sub" *ngIf="custome_added_plan == 1 && leaseserviceprotection?.length > 0 && (leasepaymentmode == 'Upfront Fees' || leasedetails.payload_taxes.in_lease_payment_mode == 'Standard') && (taxesEnable == 'Y' || feesEnable == 'Y') && leasemonthlytaxesval != undefined && leasemonthlytaxesval >0">(With Taxes and Fees)</span>
                                    <!-- for custom plan end-->
                                </div>


                                <!-- new disclimeer with show more and show less   -->
                                <!-- <div class="disclaimer-text disclimerfont" *ngIf="(leasetfdisclaimertext != null || leasetfdisclaimertext != '' ) && !showFullDescriptionlease" [innerHTML]="fnSliceDisclaimer(leasetfdisclaimertext, 'finance')"></div>

                                <div class="disclaimer-text disclimerfont" *ngIf="(leasetfdisclaimertext == null || leasetfdisclaimertext == ''  )&& !showFullDescriptionlease" [innerHTML]="fnSliceDisclaimer(leasetfdisclaimertextwithouttaxesandfee, 'finance')"></div> -->

                                <div class="disclaimer-text disclimerfont" *ngIf="(leasetfdisclaimertext != null && leasetfdisclaimertext != '' ) && showFullDescriptionlease" [innerHTML]="leasetfdisclaimertext "></div>

                                <div class="disclaimer-text disclimerfont" *ngIf="(leasetfdisclaimertext == null || leasetfdisclaimertext == ''  )&& showFullDescriptionlease" [innerHTML]="leasetfdisclaimertextwithouttaxesandfee"></div>

                                <!-- <a class="showmore" (click)="toggleDescriptionlease()">{{ showFullDescriptionlease ? 'Show less' : '...Show more' }}</a> -->

                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <!-- FINANCE PAYMENT CALCULATOR STARTS -->
        <div id="widget_popup_payment_tabs_finance" *ngIf="activeTab == 'finance' && finaceResponseAvailable " class="widget_popup_payment_tab-pane active" role="tabpanel" aria-labelledby="widget_popup_payment_tabs_btn_finance">
            <form action="" class="inWidgetForm">
                <div class="d-flex widget-row" *ngIf="financedetails && financedetails.status == 200">
                    <div class="widget-col-6">
                        <div class="price-details">Price Details</div>
                        <!-- price -->
                        <div class="payment-form-row disp-block">
                            <!-- Finance Autonation -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="is_autoNationFinance_vin == 'Y' && autoNation_FinancelistPrice != '' && autoNation_FinancelistPrice != undefined && autoNation_FinancelistPrice != null && msrp_vin_details != autoNation_FinancelistPrice">
                                <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </div>
                                <div class="payOpt__bill__value">{{autoNation_FinancelistPrice| currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>

                            <!-- VAuto -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="finance_has_vauto_dlr_disc && msrp_vin_details_finance != finance_vauto_list_price &&  (finance_vauto_upfit == undefined || finance_vauto_upfit == '')">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </label>
                                <label class="payOpt__bill__value">{{finance_vauto_list_price | currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>
                            <!--  (click)="dropdownToggle(upfitDropdownFinVauto,1,'','', 'upfitDropdownFinVauto_drop')"-->
                            <div class="payOpt__bill payOpt__bill__listprice payOpt__bill--dropdown" *ngIf="finance_has_vauto_dlr_disc && finance_vauto_list_price != '' && finance_vauto_upfit != undefined && finance_vauto_upfit != '' && msrp_vin_details_finance != finance_vauto_list_price && msrp_vin_details_finance != finance_vauto_price_wo_incentive">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                    <!-- <span class="payOpt__bill__includes">Includes MSRP, Upfits and Dealer fees</span> -->
                                </label>
                                <label class="payOpt__bill__value">{{finance_vauto_list_price| currency:'USD':'symbol':'1.0-0'}}</label>
                                <!-- <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></span> -->
                            </div>
                            <!-- <div class="upfitDropdownFinVauto_drop payOpt__dropContent_wrap payOpt__dropContent_upfit closeIt" #upfitDropdownFinVauto>
                                <div class="payOpt__dropContent ">
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">MSRP <span>{{finance_vin_msrp |
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">Upfits<span>{{finance_vauto_upfit | currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                </div>
                            </div> -->

                            <!-- Max Digital -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="finance_has_max_digital_dlr_disc && !finance_has_vauto_dlr_disc && finance_vin_msrp != finance_max_list_price">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </label>
                                <label class="payOpt__bill__value">{{finance_max_list_price | currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>

                            <!-- Ferrario -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="this.finance_ferrario_list_price != undefined && this.finance_ferrario_list_price != '' && finance_vin_msrp != finance_ferrario_list_price">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </label>
                                <label class="payOpt__bill__value">{{finance_ferrario_list_price | currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>

                            <!-- DAT List Price-->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="financeupfitflag == 1 && financeupfitstype =='L' && !finance_has_max_digital_dlr_disc && !finance_has_vauto_dlr_disc">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">List Price<span class="disclaimerTooltip__star" *ngIf="financeupfitsdisclaimer !=''">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="financeupfitsdisclaimer !=''">
                                            <p class="disclaimerTooltip__msg">{{financeupfitsdisclaimer}}</p>
                                        </div>
                                    </div>
                                    <span class="payOpt__bill__includes" *ngIf="financeupfitslabel !=''">{{financeupfitslabel}}</span>
                                    <span class="payOpt__bill__includes" *ngIf="financeupfitslabel =='' || !financeupfitslabel || financeupfitslabel == null">Includes MSRP,
                                        Upfits and Dealer fees</span>
                                </label>
                                <label class="payOpt__bill__value">{{msrp_finance| currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>

                            <!-- Homenet -->
                            <div class="payOpt__bill payOpt__bill__listprice" *ngIf="finance_homenet_list_price !=''  &&  finance_vin_msrp != finance_homenet_list_price">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                </label>
                                <label class="payOpt__bill__value">{{finance_homenet_list_price |
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>
                            <!-- <div class="payOpt__bill payOpt__bill__listprice payOpt__bill--dropdown" *ngIf="finance_homenet_list_price != '' && homenet_cache == 'N' " (click)="dropdownToggle(upfitDropdownfinancehomenet,1,'','', 'upfitDropdownfinancehomenet_drop')">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="">List Price</div>
                                    <span class="payOpt__bill__includes">Includes MSRP, Market Adjusted Cost</span>
                                </label>
                                <label class="payOpt__bill__value">{{finance_homenet_list_price|
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                                <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></span>
                            </div>
                            <div class="upfitDropdownfinancehomenet_drop payOpt__dropContent_wrap payOpt__dropContent_upfit closeIt" #upfitDropdownfinancehomenet>
                                <div class="payOpt__dropContent ">
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">MSRP <span>{{finance_vin_msrp |
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">Market Adjustment<span>{{homenet_market_adjustment_cost |
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                </div>
                            </div> -->

                            <!-- DAT Upfit-->
                            <!-- (click)="dropdownToggle(upfitDropdownfin,1,'','', 'upfitDropdownfin_drop')" &&  financeupfitstype =='U'-->
                            <div class="payOpt__bill payOpt__bill__listprice payOpt__bill--dropdown" *ngIf="(financeupfitflag == 1 || financediscounttotal > 0)  && !finance_has_homenet_dlr_disc && msrp_finance != finance_vin_msrp &&!finance_has_max_digital_dlr_disc && !finance_has_vauto_dlr_disc &&!(is_autoNationFinance_vin == 'Y' && autoNationFinance_listPrice != '' && autoNationFinance_listPrice != undefined && autoNationFinance_listPrice != null && msrp_vin_details_finance != autoNationFinance_listPrice)">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">List Price
                                        <span class="disclaimerTooltip__star" *ngIf="dat_financeupfitsdisclaimer !=''">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="dat_financeupfitsdisclaimer !=''">
                                            <p class="disclaimerTooltip__msg">{{dat_financeupfitsdisclaimer}}</p>
                                        </div>

                                    </div>
                                    <span class="payOpt__bill__includes" *ngIf="financeupfitslabel !=''">{{financeupfitslabel}}</span>
                                    <span class="payOpt__bill__includes" *ngIf="financeupfitslabel =='' || !financeupfitslabel || financeupfitslabel == null">Includes MSRP,
                                        Upfits and Dealer fees</span>
                                </label>
                                <label class="payOpt__bill__value">{{msrp_finance| currency:'USD':'symbol':'1.0-0'}}</label>
                                <!-- <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></span> -->
                            </div>
                            <!-- <div class="upfitDropdownfin_drop payOpt__dropContent_wrap payOpt__dropContent_upfit closeIt" #upfitDropdownfin>
                                <div class="payOpt__dropContent " *ngIf="financeupfitflag == 1">
                                    <div class="payOpt__checkItem ">
                                        <strong class="payOpt__checkItem__title">MSRP <span>{{msrp_vin_details_finance|
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                    </div>
                                    <div class="payOpt__checkItem ">
                                        <div><strong class="payOpt__checkItem__title">Upfits<span>{{financeupfitamount|
                                                    currency:'USD':'symbol':'1.0-0'}}</span></strong></div>
                                        <div class="payOpt__checkItem__content" *ngFor="let financeupfit of financeupfits">
                                            <label class="customCheckbox">
                                                <span class="customCheckbox_name" id="">{{financeupfit.description}}</span>
                                                <i class="disclaimer_bubble" data-title="{{financeupfit.disclaimer}}" *ngIf="financeupfit.disclaimer != ''">i</i>
                                            </label>

                                            <div class="payOpt__checkItem__price">{{financeupfit.total_price}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                            <div class="payOpt__bill widget_mb_20" *ngIf="vehicle_type == 'used'">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">Dealer Price<span class="disclaimerTooltip__star" *ngIf="!!financemsrpdisclaimer">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="!!financemsrpdisclaimer">
                                            <p class="disclaimerTooltip__msg" [innerHTML]="financemsrpdisclaimer"></p>
                                        </div>
                                    </div>
                                    (Sticker Price)
                                </label>
                                <label class="payOpt__bill__value">{{dealer_price_finance|
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>

                            <!-- MSRP-->
                            <div class="payOpt__bill widget_mb_20" *ngIf="vehicle_type == 'new' && financeupfitflag == 0">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">MSRP <span class="disclaimerTooltip__star" *ngIf="financemsrpdisclaimer != null">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip" *ngIf="financemsrpdisclaimer != null">
                                            <p class="disclaimerTooltip__msg" [innerHTML]="financemsrpdisclaimer"></p>
                                        </div>
                                    </div>
                                    (Sticker Price)
                                </label>
                                <label class="payOpt__bill__value" *ngIf="(finance_max_list_price == '' || finance_max_list_price == undefined) && (finance_vauto_list_price == '' || finance_vauto_list_price == undefined) && (finance_ferrario_list_price == '' || finance_ferrario_list_price == undefined) && (finance_homenet_list_price == '' || finance_homenet_list_price == undefined) && (autoNation_FinancelistPrice == undefined || autoNation_FinancelistPrice == '')">{{msrp_vin_details_finance|
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                                <label class="payOpt__bill__value" *ngIf="(finance_max_list_price != '' && finance_max_list_price != undefined) || (finance_vauto_list_price != '' && finance_vauto_list_price != undefined)|| (finance_ferrario_list_price != '' && finance_ferrario_list_price != undefined) || (finance_homenet_list_price != '' && finance_homenet_list_price != undefined) || (autoNation_FinancelistPrice != undefined && autoNation_FinancelistPrice != '')">{{finance_vin_msrp|
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>
                            <div class="payOpt__bill widget_mb_20" *ngIf="financeupfitflag != 0 && !finance_has_max_digital_dlr_disc ">
                                <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                    <div class="disclaimerTooltip__trigger">MSRP <span class="disclaimerTooltip__star">*</span>
                                        <div class="vTheme__bColor disclaimerTooltip">
                                            <p class="disclaimerTooltip__msg" [innerHTML]="financemsrpdisclaimer"></p>
                                        </div>
                                    </div>
                                    (Sticker Price)
                                </label>
                                <label class="payOpt__bill__value">{{msrp_vin_details_finance|
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>
                        </div>
                        <!-- Zipcode -->
                        <div class="" *ngIf="(customerzipcode !='' || zipcode !='') && financetaxfeestotal > 0">
                            <mat-form-field appearance="outline" style="width: 100%;" class="mat-mdc-form-field-infix">
                                <mat-label> Enter ZIP Code</mat-label>
                                <input name="zipcode" id="zipcode" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" (change)="invokepupulation($event)" maxlength="5" minlength="4" class="dropdown-calc" value="{{zipcode}}" matInput>
                                <!-- <mat-error class="error invalid-feedback" *ngIf="error==1">Please enter valid ZIP Code </mat-error> -->
                            </mat-form-field>
                            <span class="error error-zip" style="color:red;font-size:12px" *ngIf="error==1">Please enter valid ZIP Code </span>
                            <!-- <label for="zipcode" class="calc-label">Enter Zip Code3</label>
                <input aria-hidden="true" name="zipcode" id="zipcode" (change)="invokepupulation($event)" 
                    maxlength="5" minlength="4" class="dropdown-calc" value="{{zipcode}}"
                    />
                <span class="error" *ngIf="error==1">Please enter valid zipcode</span> -->
                        </div>

                        <!-- state and county -->
                        <div class="payment-form-row" *ngIf="countycitylist?.length > 0 && (customerzipcode !='' || zipcode !='') && financetaxfeestotal > 0 && error == 0" style="margin-top:-15px">
                            <div class="payment-input-fields">
                                <mat-form-field appearance="outline" style="width: 100%;">
                                    <mat-label>Select your County & City</mat-label>
                                    <mat-select class="dropdown-calc" name="countycity" id="countycity" [(value)]="selectedCountyCity" (selectionChange)="onDropdownChange($event)">
                                        <mat-option *ngFor="let data of countycitylist" [value]="data.county_city">
                                            {{data.county_city}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <!-- <div class="form-group">
                    <label class="calc-label">Select your County & City</label>
                    <select class="dropdown-calc" name="countycity" id="countycity" (change)="onDropdownChange($event)">
                        <option *ngFor="let data of countycitylist" value="{{data.county_city}}">
                            {{data.county_city}} </option>
                    </select>
                </div> -->
                        </div>


                        <!-- Down Payment -->
                        <div class="payment-form-row mt-1">
                            <div class="payment-input-fields">
                                <mat-form-field appearance="outline" style="width: 100%;">
                                    <mat-label> Down Payment({{financedownpaymentper}}%)</mat-label>
                                    <input name="financedown" id="down_payment_finance" [disabled]="finance_lock == 0" type="text" (focus)="clearIfZero($event,'downpay')" (blur)="resetIfEmpty($event,'downpay')" [(ngModel)]="financedownpayment_disp" maxlength="6" (change)="onCheckboxChange_finance($event, 3, 0, 'downpay')" (keypress)="keyPressDn($event)" (click)="shiftdigitalevent()" matInput>
                                </mat-form-field>
                                <span class="error error-zip" style="color:red;font-size:12px" *ngIf="showfinancedownpaymenterror">Dealer requests a minimum {{minimumDownPercent}}% down payment.</span>
                            </div>
                        </div>

                        <!-- Trade In -->
                        <div class="payment-form-row">
                            <div class="payment-input-fields">
                                <mat-form-field appearance="outline" style="width: 100%;">
                                    <mat-label> Trade-in Value</mat-label>
                                    <input id="trade_in_finance" [disabled]="finance_lock == 0" type="text" (focus)="clearIfZero($event,'tradein')" (blur)="resetIfEmpty($event,'tradein')" [maxLength]=6 (change)="onCheckboxChange_finance($event, 3, 0, 'tradein')" (click)="shiftdigitalevent()" value="{{financetradein}}" (keypress)="keyPress($event)" matInput>
                                </mat-form-field>
                            </div>
                        </div>

                        <!-- Conditional Offer -->
                        <div *ngIf="vehicle_type === 'new'" class="payOpt__bill payOpt__bill--dropdown payOpt__bill--dropdown--open" (click)="dropdownToggle(exploreConditionalOfferFinance, conditionalFinanceDataToShow.length,'finance','conditional-offer', 'exploreConditionalOfferFinance')">
                            <div class="payOpt__bill__label">Explore Conditional Offers <i class="disclaimer_bubble" data-title="Please contact dealer for more details." *ngIf="is_homenet_vin_finance == 'Y'">i</i></div>
                            <div class="payOpt__bill__value" *ngIf="!hideConditionalOffter && is_homenet_vin_finance == 'N'"><i class="payOpt__bill__value__minus"></i>{{financeconditionaltotal|
                                currency:'USD':'symbol':'1.0-0'}}</div>
                            <span class="down_arrow_svg" *ngIf="conditionalFinanceDataToShow.length > 0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                </svg></span>
                        </div>
                        <div class="exploreConditionalOfferFinance payOpt__dropContent_wrap" #exploreConditionalOfferFinance>
                            <div *ngIf="conditionalFinanceDataToShow != undefined && conditionalFinanceDataToShow.length > 0" class="payOpt__dropContent">
                                <div *ngFor="let data of conditionalFinanceDataToShow" class="incentive-heading">
                                    <p class="Checkbox-heading" style="font-weight: bold !important; margin-bottom: 0px!important;" *ngIf="data.name != ' '">{{data.name}}</p>
                                    <b class="Checkbox-heading" *ngIf="data.name == ' '"><br></b>
                                    <div class="payOpt__checkItem" *ngFor="let condition of data.data">
                                        <div class="payOpt__checkItem__content">
                                            <label class="customCheckbox" [ngClass]="{ 'noCheckbox': hideConditionalOffter }">
                                                <input type="checkbox" value="{{condition.programId}}" [checked]="condition.isChecked" (click)="conditionalCheckFinance($event, condition.programId)" *ngIf="!hideConditionalOffter && is_homenet_vin_finance != 'Y'">
                                                <span [ngClass]="{'customCheckboxStrike': condition.noeligible == true}" class="customCheckbox_name">{{condition.programName}}</span>
                                                <i class="disclaimer_bubble" attr.data-title="{{condition.programRules}}">i</i>
                                            </label>
                                            <div class="payOpt__checkItem__price" [ngClass]="{'customCheckboxStrike': condition.noeligible == true}">{{condition.amount| currency:'USD':'symbol':'1.0-0'}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>



                        <!-- Credit Range -->
                        <div class="widget-row row-5 payOpt__bill__selectrow payment-form-row" *ngIf="financerangearr.length > 0">
                            <div class="col-12">
                                <!-- <div class="form-group">
                                    <label for="">Choose your Credit Range</label>
                                    <mat-form-field class="demo-full-width select-parent" appearance="outline" style="width: 100%;">
                                        <select class="select-box" matNativeControl placeholder="Tier-{{financetier}}" name="financetiers" id="financetiers" (change)="onCheckboxChange_finance($event, 1, 1, 'credit', '', '', 'creditRating')" (click)="shiftdigitalevent()">
                                            <option *ngFor="let tier of financerangearr" [value]="tier.code" [selected]="tier.code == financetier || financerangearr.length == 1">Tier-{{tier.code}} [{{tier.low}} - {{tier.high}}] - {{tier.txtdisp}}</option>
                                        </select>
                                    </mat-form-field>
                                </div> -->
                                <mat-form-field appearance="outline" style="width: 100%;">
                                    <mat-label>Choose your Credit Range</mat-label>
                                    <mat-select class="dropdown-calc" matNativeControl placeholder="Tier-{{financetier}}" [(value)]="financetier" name="financetiers" id="financetiers" (change)="onCheckboxChange_finance($event, 1, 1, 'credit', '', '', 'creditRating')" (click)="shiftdigitalevent()">
                                        <mat-option *ngFor="let tier of financerangearr" [value]="tier.code">
                                            Tier-{{tier.code}} [{{tier.low}} - {{tier.high}}] - {{tier.txtdisp}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                    <div class="widget-col-6">
                        <div class="btns-container">
                            <label for="terms_finance">Term Duration</label>
                            <!-- <mat-chip-listbox class="mat-chip-grid" name="terms_finance" id="terms_finance" [disabled]="isChipListDisabledFinance" (change)="onCheckboxChange_finance($event, 2, 0, '', 'term', '', 'lengthofLoan' )" (click)="shiftdigitalevent()">

                                <mat-chip-option *ngFor="let terms of financedetails?.payload_calculation?.terms_list" [value]="terms" [selected]="terms == defaultfinanceterm">
                                    {{terms}} <br><span>months</span>
                                </mat-chip-option>

                            </mat-chip-listbox> -->

                            <mat-chip-listbox class="mat-chip-grid" name="terms_finance" id="terms_finance" [disabled]="isChipListDisabledFinance" [ngModel]="defaultfinanceterm" (ngModelChange)="onCheckboxChange_finance($event, 2, 0, '', 'term', '', 'lengthofLoan')" (click)="shiftdigitalevent()">
                                <mat-chip-option class="CalculatorBtns active" *ngFor="let terms of financedetails?.payload_calculation?.terms_list" [value]="terms" [selected]="defaultfinanceterm === terms" [ngClass]="{ 'chip-background-color': terms === defaultfinanceterm }">
                                    {{ terms }} <br /><span>months</span>
                                </mat-chip-option>
                            </mat-chip-listbox>
                        </div>
                        <!-- Incentive -->
                        <div *ngIf="vehicle_type === 'new'" class="payOpt__bill payOpt__bill--dropdown">
                            <div class="payOpt__bill__label">Incentives<span *ngIf="is_homenet_incentives == false ">&nbsp;Included</span><i class="disclaimer_bubble" data-title="Please contact dealer for more details." *ngIf="is_homenet_vin_finance == 'Y'">i</i></div>
                            <div class="payOpt__bill__value" *ngIf="is_homenet_vin_finance == 'N'"><i class="payOpt__bill__value__minus"></i>{{financeincentivetotal|
                                currency:'USD':'symbol':'1.0-0'}}</div>
                            <span class="down_arrow_svg" (click)="dropdownToggle(incentiveFinance, financeincentivedataToShow.length, 'finance', 'incentive', 'incentiveFinance')" *ngIf="financeincentivedataToShow.length > 0 && financeincentivetotal > 0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                </svg></span>
                        </div>
                        <div class="incentiveFinance payOpt__dropContent_wrap closeIt" #incentiveFinance>
                            <div *ngIf="financeincentivedataToShow != undefined && financeincentivedataToShow.length > 0" class="payOpt__dropContent">
                                <div *ngFor="let data of financeincentivedataToShow">
                                    <div class="payOpt__checkItem payOpt__dropContent_due">
                                        <div class="payOpt__checkItem__content">
                                            <label class="customCheckbox">
                                                <span class="customCheckbox_name" [ngClass]="{'hideIncentive' : data.checked == -1}">{{data.programName}}</span>
                                                <i class="disclaimer_bubble" attr.data-title="{{data.programRules}}">i</i>

                                            </label>


                                            <div class="payOpt__checkItem__price">{{data.amount| currency:'USD':'symbol':'1.0-0'}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Conditional Offer -->
                        <div>
                            <div *ngIf="!hideConditionalOffter && is_homenet_vin_finance == 'N' && vehicle_type == 'new' " class="payOpt__bill payOpt__bill--dropdown">
                                <div class="payOpt__bill__label">Conditional Offers</div>
                                <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{financeconditionaltotal|
                                    currency:'USD':'symbol':'1.0-0'}}</div>
                            </div>
                        </div>

                        <!-- Dealer Discount -->
                        <div *ngIf="isDealerDiscountNormalVisible">
                            <div class="payOpt__bill--dropdown" [className]="financediscountdata.length > 0 && !finance_has_vauto_dlr_disc ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'" (click)="dropdownToggle(financedealerDropdown,financediscountdata.length,'finance','dealer-discount', 'financedealerDropdown_drop')" *ngIf="(viewoffer == 0 || finance_has_vauto_dlr_disc || finance_has_max_digital_dlr_disc || finance_has_ferrario_dlr_disc == true|| finance_has_homenet_dlr_disc == true) && financediscounttotal > 0">
                                <div class="payOpt__bill__label" *ngIf="is_homenet_vin_finance != 'Y'">Dealer Discount</div>
                                <div class="payOpt__bill__label" *ngIf="is_homenet_vin_finance == 'Y'">Dealer Discount/Bonus <i class="disclaimer_bubble" data-title="Please contact dealer for more details.">i</i></div>
                                <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{financediscounttotal|
                                    currency:'USD':'symbol':'1.0-0'}}</div>
                                <span class="down_arrow_svg" *ngIf="financediscountdata.length > 0 && !finance_has_vauto_dlr_disc"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                    </svg></span>
                            </div>
                        </div>
                        <div *ngIf="isDealerDiscountBoldVisible">
                            <div class="payOpt__bill--dropdown" [className]="financediscountdata.length > 0 && !finance_has_vauto_dlr_disc ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'" (click)="dropdownToggle(financedealerDropdown,financediscountdata.length,'finance','dealer-discount', 'financedealerDropdown_drop')" *ngIf="(viewoffer == 0 || finance_has_vauto_dlr_disc || finance_has_max_digital_dlr_disc || finance_has_ferrario_dlr_disc == true|| finance_has_homenet_dlr_disc == true) && financediscounttotal > 0">
                                <div class="payOpt__bill__label"><b class="discountbold">Dealer Discount</b></div>
                                <div class="payOpt__bill__value"><b class="discountbold"><i class="payOpt__bill__value__minus"></i>{{financediscounttotal|
                                        currency:'USD':'symbol':'1.0-0'}}</b></div>
                                <span class="down_arrow_svg" *ngIf="financediscountdata.length > 0 && !finance_has_vauto_dlr_disc"><b class="discountbold"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></b></span>
                            </div>
                        </div>


                        <div class="financedealerDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_discount closeIt" #financedealerDropdown>
                            <div class="payOpt__dropContent" *ngIf="financediscountdata.length > 0">
                                <div class="payOpt__checkItem" *ngFor="let disc of financediscountdata">
                                    <div class="payOpt__checkItem__content">
                                        <div class="customCheckbox">
                                            <span class="customCheckbox_name">{{disc.discount_name}}</span>
                                            <i class="disclaimer_bubble" data-title="{{disc.discount_disclaimer}}">i</i>
                                        </div>
                                        <div class="payOpt__checkItem__price"> {{disc.discount_amount|
                                            currency:'USD':'symbol':'1.0-0'}}</div>
                                        <!-- <div class="payOpt__checkItem__price" *ngIf="disc.discount_amount.indexOf('%') == -1">
                                            {{disc.discount_amount|
                                            currency:'USD':'symbol':'1.0-0'}}</div>
                                        <div class="payOpt__checkItem__price" *ngIf="disc.discount_amount.indexOf('%') > -1">
                                            {{disc.discount_amount}}</div> -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Dealer Finance Upfits -->
                        <div class="payOpt__bill--dropdown" [className]="financeupfitamount != '' && financeupfitamount != 0 && financeupfitamount != undefined  ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'" *ngIf="financeupfitamount !='' && financeupfitamount != 0 && financeupfitamount != undefined && is_autoNationFinance_vin != 'Y'  && is_homenet_vin_finance != 'Y' && finance_priceDispalyType == 'L'">
                            <label class="payOpt__bill__label">Dealer Upfit</label>
                            <label class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{financeupfitamount|
                                currency:'USD':'symbol':'1.0-0'}}</label>
                            <span class="down_arrow_svg" (click)="dropdownToggle(financeupfitDropdown, financeupfits?.length, 'finance', 'upfits', 'financeupfitDropdown_drop')" *ngIf="financeupfits?.length >0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                </svg></span>
                        </div>
                        <div class="financeupfitDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_discount closeIt" #financeupfitDropdown>
                            <div class="payOpt__dropContent" *ngIf="financeupfits.length > 0">
                                <div class="payOpt__checkItem__content" *ngFor="let financeupfit of financeupfits">
                                    <label class="customCheckbox">
                                        <span class="customCheckbox_name">{{financeupfit.description}}</span>
                                        <i class="disclaimer_bubble" attr.data-title="{{financeupfit.upfit_disclaimer}}" *ngIf="financeupfit.disclaimer != ''">i</i>
                                    </label>

                                    <div class="payOpt__checkItem__price">{{financeupfit.total_price}}</div>

                                </div>
                            </div>
                        </div>

                        <!-- Autonation Upfits Finance -->
                        <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="autoNationFinance_upfits != '' && autoNationFinance_upfits != undefined && autoNationFinance_upfits != 0 && finance_priceDispalyType !== 'M'">
                            <div class="payOpt__bill_label">Dealer Accessories</div>
                            <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>${{autoNationFinance_upfits}}</div>
                        </div>

                        <!-- Homenet Upfits Finance -->
                        <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="is_homenet_vin_finance == 'Y' && homenet_market_adjustment_cost != undefined && homenet_market_adjustment_cost != '' ">
                            <div class="payOpt__bill_label">Dealer Upfits <i class="disclaimer_bubble" data-title="Please contact dealer for more details.">i</i></div>
                            <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>${{homenet_market_adjustment_cost}}</div>
                        </div>

                        <!-- downpayment -->
                        <div>
                            <div class="payOpt__bill payOpt__bill--dropdown">
                                <div class="payOpt__bill__label">Downpayment</div>
                                <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>${{financedownpayment_disp}}</div>
                            </div>
                        </div>

                        <!-- trade-in -->
                        <div class="payOpt__bill payOpt__bill--dropdown">
                            <div class="payOpt__bill__label">Trade-in</div>
                            <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>${{financetradein}}</div>
                        </div>

                        <!--Service and protection starts-->
                        <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(spFDropdown,'3','Finance',financedetails?.payload_service_protection?.total_sp, 'spFDropdown_drop')" *ngIf="financeserviceprotection?.length > 0">

                            <div class="payOpt__bill__label">Service & Protection Plans <i *ngIf="customeplan == 0" class="disclaimer_bubble monthly_taxes" data-title="Paid - monthly">i</i></div>
                            <div class="payOpt__bill__value">
                                <i class="payOpt__bill__value__minus"></i>{{financedetails?.payload_service_protection?.total_sp|
                                currency:'USD':'symbol':'1.2-2'}}
                            </div>
                            <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                </svg></span>
                        </div>
                        <div class="spFDropdown_drop payOpt__dropContent_wrap closeIt  payOpt__dropContent_due" #spFDropdown>
                            <div class="payOpt__dropContent" *ngIf="financeserviceprotection?.length > 0">
                                <div class="payOpt__checkItem">
                                    <div class="payOpt__checkItem__content" *ngFor="let serviceprotection of financeserviceprotection">
                                        <label class="customCheckbox">
                                            <span class="customCheckbox_name" id="">{{serviceprotection.fee_type.toLowerCase( )}}</span>
                                        </label>
                                        <div class="payOpt__checkItem__price">{{serviceprotection.Amount|
                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--Service and protection ends-->

                        <!-- Accessories -->
                        <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="finance_payload_mopar_accessries != undefined && finance_payload_mopar_accessries.length > 0" (click)="dropdownToggle(financeAccessoriesDropdown,finance_payload_mopar_accessries.length,'finance','mopar', 'financeAccessoriesDropdown_drop')">
                            <div class="payOpt__bill__label">Accessories</div>
                            <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{finance_mopar_accessries_total|
                                currency:'USD':'symbol':'1.2-2'}}</div>
                            <span class="down_arrow_svg" *ngIf="finance_payload_mopar_accessries != undefined && finance_payload_mopar_accessries.length > 0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                </svg></span>
                        </div>
                        <div class="financeAccessoriesDropdown_drop payOpt__dropContent_wrap closeIt" #financeAccessoriesDropdown>
                            <div *ngIf="finance_payload_mopar_accessries != undefined && finance_payload_mopar_accessries.length > 0" class="payOpt__dropContent">
                                <div class="payOpt__checkItem" *ngFor="let mopar of finance_payload_mopar_accessries">
                                    <div class="payOpt__checkItem__content">
                                        <label class="customCheckbox">
                                            <input type="checkbox" name="lease_mopar" id="{{mopar.part_no}}" value="{{mopar.part_no}}" [checked]="mopar.checked==undefined || !mopar.checked" (click)="onCheckboxChange_finance($event, 1, 0, 'mopar', mopar.part_no);" (click)="shiftdigitalevent()">
                                            <span id="li_{{mopar.part_no}}" class="customCheckbox_name">{{mopar.title}}</span>
                                            <!-- <div id="li_{{mopar.id}}" *ngIf="mopar.checked == -1">{{mopar.title}}</div> -->
                                        </label>
                                        <!-- <i class="disclaimer_bubble" data-title='Ball Mount Adapter is designed for a 2 Hitch Receiver and allows a 2.75" rise or 4" drop in ball position. The adapter features a 1" ball shank, is 9" long and is rated to handle up to a 6,000 lb load and 600 lb of tongue weight.'>i</i> -->
                                        <div class="payOpt__checkItem__price">{{mopar.msrp|
                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>



                        <!-- Accessories -->
                        <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="finance_dlr_accessories != '' && finance_dlr_accessories != undefined">
                            <div class="payOpt__bill__label">Accessories</div>
                            <div class="payOpt__bill__value">{{finance_dlr_accessories | currency:'USD':'symbol':'1.0-0'}}</div>
                        </div>

                        <div class="payment-form-row">
                            <div class="payOpt__bill payOpt__bill__adjusted">
                                <div class="payOpt__bill__label">
                                    <strong>AMOUNT TO FINANCE</strong>
                                    <span *ngIf="vehicle_type === 'new'">Includes available offers and incentives.</span>
                                </div>


                                <label class="payOpt__bill__value" *ngIf="financeflag == 1 && viewoffer==0 && !finance_has_vauto_dlr_disc && is_homenet_vin != 'Y'">{{financecapitalizedcost?.toString().replace(',','')
                                    | currency:'USD':'symbol':'1.0-0'}}</label>
                                <label class="payOpt__bill__value" *ngIf="financeflag == 1 && viewoffer==1 && !finance_has_vauto_dlr_disc && finance_homenet_list_price == ''">{{financecapitalizedcostxdiscount |
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                                <label class="payOpt__bill__value" *ngIf="finance_has_vauto_dlr_disc">{{financecapitalizedcost?.toString().replace(',','') |
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                                <label class="payOpt__bill__value" *ngIf="is_homenet_vin == 'Y'">{{financecapitalizedcost?.toString().replace(',','') |
                                    currency:'USD':'symbol':'1.0-0'}}</label>
                            </div>
                        </div>
                        <!--  Taxes and Fees Section -->
                        <div class="payOpt__bill payOpt__bill--dropdown payOpt__bill__taxesfee" (click)="dropdownToggle(taxfeeFDropdown,'2','Finance','', 'taxfeeFDropdown_drop')" *ngIf="financetaxfeestotal > 0 ">
                            <div class="payOpt__bill__label">
                                <span *ngIf="taxesFinEnable == 'Y'">Taxes & Fees <i class="tax_fees_bubble disclaimer_bubble" data-title="Sales tax applicable as per the respective state, city of the dealership or where you will register the vehicle. May include the first-year state registration fees for your new car, collected by the dealer; Documentation fee charged by the dealer, to prepare the sales contract">i</i></span>
                                <span *ngIf="taxesFinEnable != 'Y'"> Dealer Fees <i class="disclaimer_bubble" data-title="Sales tax applicable as per the respective state, city of the dealership or where you will register the vehicle. May include the first-year state registration fees for your new car, collected by the dealer; Documentation fee charged by the dealer, to prepare the sales contract">i</i></span>
                                <br /><span *ngIf="customerzipcode !=''" class="zipcode-dummy">ZIP Code</span>
                            </div>
                            <div class="payOpt__bill__value">
                                <i class="payOpt__bill__value__minus"></i>{{financetaxfeestotal|
                                currency:'USD':'symbol':'1.2-2'}}
                            </div>
                            <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                </svg></span>
                        </div>
                        <!-- <div *ngIf="(customerzipcode !='' || zipcode !='') && financetaxfeestotal > 0" class="zipcode-edit">
                     <span>Zip Code {{customerzipcode||zipcode}}<span class="down_arrow_svg" title="Edit"
                             (click)="estimatepopupFn('zip');">edit</span></span>
                 </div> -->
                        <div class="taxfeeFDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_taxfee closeIt" #taxfeeFDropdown>
                            <div class="payOpt__dropContent">
                                <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(taxFDropdown,'3','Finance','taxes', 'taxFDropdown_drop')" *ngIf="financetaxdetails?.length > 0">
                                    <div class="payOpt__bill__label">Taxes</div>
                                    <div class="payOpt__bill__value">
                                        <i class="payOpt__bill__value__minus"></i>{{financedetails?.payload_taxes?.feedetails?.total|
                                        currency:'USD':'symbol':'1.2-2'}}
                                    </div>
                                    <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="taxFDropdown_drop payOpt__dropContent_wrap closeIt" #taxFDropdown>
                                    <div class="payOpt__dropContent" *ngIf="financetaxdetails?.length > 0">
                                        <div class="payOpt__checkItem">
                                            <div class="payOpt__checkItem__content" *ngFor="let tax of financetaxdetails">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">{{tax.FeeName}}
                                                        <span class="customCheckbox_name_sub" id="" *ngIf="tax.FeeDescription != null && tax.FeeDescription !='Title Fee' ">({{tax.FeeDescription}})</span>
                                                    </span>
                                                </label>
                                                <div class="payOpt__checkItem__price">{{tax.Amount|
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(feeFDropdown,'3','Finance','fees', 'feeFDropdown_drop')" *ngIf="financefeesdetails?.length > 0">
                                    <div class="payOpt__bill__label">Fees</div>
                                    <div class="payOpt__bill__value">
                                        <i class="payOpt__bill__value__minus"></i>{{financedetails?.payload_fees?.total_fees|
                                        currency:'USD':'symbol':'1.2-2'}}
                                    </div>
                                    <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg></span>
                                </div>
                                <div class="feeFDropdown_drop payOpt__dropContent_wrap closeIt" #feeFDropdown>
                                    <div class="payOpt__dropContent" *ngIf="financefeesdetails?.length > 0">
                                        <div class="payOpt__checkItem">
                                            <div class="payOpt__checkItem__content" *ngFor="let fees of financefeesdetails">
                                                <label class="customCheckbox">
                                                    <span class="customCheckbox_name" id="">{{fees.fee_type}}</span>
                                                    <i class="disclaimer_bubble" data-title="{{fees.Disclaimer}}" *ngIf="fees.Disclaimer != null ">i</i>
                                                </label>

                                                <div class="payOpt__checkItem__price">{{fees.Amount|
                                                    currency:'USD':'symbol':'1.2-2'}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="widget-row row-5" *ngIf="vehicle_type == 'used'">
                            <div class="col-12">
                                <div class="payOpt__annual">
                                    <label class="payOpt__annual__label"><strong>Annual Percentage Rate(APR)</strong></label><br>

                                    <mat-radio-group name="finance_apr_rate_radio" class="apr-rate-radio-group" [(ngModel)]="financeaprradio">
                                        <mat-radio-button [disableRipple]="true" name="finance_apr_rate_radio" class="apr-rate-radio-button" value="defaultapr" (change)="radioAprRateChange($event)" [checked]="financeaprradio === 'defaultapr'">
                                            <label class="payOpt__annual__rate">{{financeapr}}%(CCAP<i class="disclaimer_bubble" data-title="This rate is based on the ‘Term Duration’ selected and available compatible cash incentives. Rate is for well qualified buyers; not all buyers will qualify. Your rate may vary. See dealer for details.">i</i>
                                                )</label>
                                        </mat-radio-button><br>

                                        <mat-radio-button [disableRipple]="true" name="finance_apr_rate_radio" class="apr-rate-radio-button"
                                            value="thirdpartyapr" (change)="radioAprRateChange($event)" [checked]="financeaprradio === 'thirdpartyapr'">
                                            <label class="payOpt__annual__rate">
                                                <input id="apr_rate_in_finance" type="text" 
                                                       (keypress)="keyPressin($event)" 
                                                       (keyup)="thirdpartyaprChange($event);"
                                                       (click)="$event.stopPropagation()" 
                                                       [(ngModel)]="financeaprthirdparty" 
                                                       [maxLength]="5" 
                                                       [disabled]="financeaprradio === 'defaultapr'" 
                                                       pattern="/^[0-9.]{0,10}$/" 
                                                       style="width: 50px;">
                                                % (Third Party
                                                <i class="disclaimer_bubble"
                                                   data-title="If you obtain financing from a third party, enter your financing here. Your total Estimated Amount Financed may be lower due to a Cash Incentive Offer."
                                                   (click)="$event.stopPropagation()">
                                                   i
                                                </i>)
                                            </label>
                                        </mat-radio-button>
                                    </mat-radio-group>
                                </div>
                            </div>
                        </div>
                        <!-- Subvented or Non-Subvented -->
                        <div class="widget-row row-5 payOpt__payment__selectrow term-duration">
                             
                            <!-- Subvented or Non-Subvented -->
                            <div class="col-7 term-option-section payOpt__bill__label" *ngIf="vehicle_type == 'new'">
                                <b>Annual Percentage Rate (APR)</b>
                                 <div class="widget-form-check" *ngFor="let prograDetails of lenderProgramDetails">
                                    <input class="widget-form-check-input" (change)="updatePaymentSNS($event, prograDetails.programType ,prograDetails.value)" id="{{prograDetails.programType}}_{{prograDetails.value}}" type="radio" name="location" [checked]="prograDetails.checked" />
                                    <label class="widget-form-check-label sns_lable" for="{{prograDetails.programType}}_{{prograDetails.value}}">{{prograDetails.value}}%({{prograDetails.name}}) </label>
                                </div>
                            </div>
                            <!-- <div class="col-7 term-option-section payOpt__bill__label" *ngIf="(!subventedProgramStatus || !nonSubventedProgramStatus) && vehicle_type == 'new'">
                                <b>Annual Percentage Rate (APR)</b>
                                <div *ngIf="subventedProgramStatus && !nonSubventedProgramStatus">
                                    <label class="form-control-label sns_lable" for="drs_apr" checked>{{apr_rate_subvented}}% ({{lender_program_name_subvented}})</label>
                                </div>
                                <div *ngIf="!subventedProgramStatus && nonSubventedProgramStatus">
                                    <label class="form-control-label sns_lable" for="drs_price" checked>{{apr_rate_nonsubvented}}% ({{lender_program_name_nonsubvented}})</label>
                                </div>
                            </div> -->

                        </div>



                        <!-- Cash Down-->
                        <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(cashdnDropdown,'1','','', 'cashdnDropdown_drop')" *ngIf="financedueatsigningval != undefined && financedueatsigningval?.toString().replace(',','') > 0 && (taxesFinEnable == 'Y' || feesFinEnable == 'Y')">
                            <div class="payOpt__bill__label">Cash Down</div>
                            <div class="payOpt__bill__value" *ngIf="financeserviceprotection?.length <= 0">
                                <i class="payOpt__bill__value"></i>{{financedueatsigningval?.toString().replace(',','')|
                                currency:'USD':'symbol':'1.0-0'}}
                            </div>
                            <div class="payOpt__bill__value" *ngIf="financeserviceprotection?.length > 0">
                                <i class="payOpt__bill__value"></i>{{financedueatSandP|
                                currency:'USD':'symbol':'1.0-0'}}
                            </div>
                            <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                </svg></span>
                        </div>
                        <div class="cashdnDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_due closeIt" #cashdnDropdown>
                            <div class="payOpt__dropContent" *ngIf="financedueatsigningval != undefined && financedueatsigningval?.toString().replace(',','') != 0 ">
                                <div class="payOpt__checkItem">
                                    <div class="payOpt__checkItem__content">
                                        <label class="customCheckbox">
                                            <span class="customCheckbox_name" id="">Down Payment</span>
                                        </label>
                                        <div class="payOpt__checkItem__price">${{financedownpayment}}</div>
                                    </div>
                                    <div class="payOpt__checkItem__content">
                                        <label class="customCheckbox">
                                            <span class="customCheckbox_name" id="">Taxes & Fees</span>
                                        </label>
                                        <div class="payOpt__checkItem__price">{{financetaxfeestotal |
                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                    </div>
                                    <div class="payOpt__checkItem__content" *ngIf="vehicle_type == 'used'">
                                        <label class="customCheckbox">
                                            <span class="customCheckbox_name" id="">First Month Payment</span>
                                        </label>
                                        <div class="payOpt__checkItem__price">{{(
                                            convertToNumber(financemonthlycost.replace(",",""))) |
                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                    </div>
                                    <div class="payOpt__checkItem__content" *ngIf="financeserviceprotection?.length > 0">
                                        <label class="customCheckbox">
                                            <span class="customCheckbox_name" id="">Service & Protection</span>
                                        </label>
                                        <div class="payOpt__checkItem__price">{{financedetails?.payload_service_protection?.total_sp|
                                            currency:'USD':'symbol':'1.2-2'}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Disclaimer -->
                        <div class="disclaimer-content">
                            <div class="downpaymenterror" *ngIf="(financemonthlycost <= 0 || financeamountwithSandP <= 0)"><b>Downpayment + Trade-in value is higher than the financing cost of the vehicle. You may be eligible to receive an amount from the dealer. Your dealer will confirm the final pricing based on the incentives, discounts, trade-in value and taxes & fees.</b> </div>

                            <div class="lease-total-price" *ngIf="financeserviceprotection?.length == 0">
                                <span class="widget_calc_final_price">Buy for {{financemonthlycost | currency:'USD':'symbol':'1.0-0'}}<sup><i class="disclaimer_bubble" data-title="This value is for estimation purposes only. You may not be able to finance your vehicle at this rate. See dealer for details.">i</i></sup></span>
                                <div class="widget_calc_final_sub">per month for {{defaultfinanceterm}} months.</div>
                            </div>

                            <div class="lease-total-price" *ngIf="financeserviceprotection?.length > 0">
                                <!-- <div *ngIf="financetaxfeestotal == 0 || custome_added_plan == 0">
                                    <span class="widget_calc_final_price">2MONTHLY PAYMENT IN FINANCE </span>
                                    <span *ngIf="custome_added_plan == 1 &&(taxesEnable=='N' && feesEnable=='N')">{{financeamountwithSandP_taxesandfeedisable| currency:'USD':'symbol':'1.0-0'}}</span>
                                    <span *ngIf="custome_added_plan == 1 &&!(taxesEnable=='N' && feesEnable=='N')">{{financeamountwithSandP| currency:'USD':'symbol':'1.0-0'}}</span>
                                    <span *ngIf="custome_added_plan == 0">{{financemonthlycost| currency:'USD':'symbol':'1.0-0'}}</span>
                                    <div class="widget_calc_final_sub" *ngIf="custome_added_plan == 1">(first month payment with service protection)</div>
                                </div> -->

                                <div>
                                    <span class="widget_calc_final_price">Buy for</span>
                                    <b class="widget_calc_final_price">{{financeamountwithSandP| currency:'USD':'symbol':'1.0-0'}}<sup><i class="disclaimer_bubble" data-title="This value is for estimation purposes only. You may not be able to finance your vehicle at this rate. See dealer for details.">i</i></sup></b>
                                    <div>per month for {{defaultfinanceterm}} months.</div>
                                    <div *ngIf="custome_added_plan == 0 && financeserviceprotection?.length > 0">(Includes Service & Protection plans)</div>
                                </div>

                            </div>

                            <div class="disclaimer-text disclimerfont" *ngIf="(financedisclaimertext != null && financedisclaimertext != '' ) && showFullDescriptionfinance" [innerHTML]="financedisclaimertext "></div>
                            <div class="disclaimer-text disclimerfont" *ngIf="(financedisclaimertext == null || financedisclaimertext == ''  )&& showFullDescriptionfinance" [innerHTML]="financedisclaimertextwithouttaxesandfee"></div>

                            <!-- <a class="showmore" (click)="toggleDescriptionfinance()">{{ showFullDescriptionfinance ? 'Show less' : '...Show more' }}</a> -->
                        </div>

                    </div>


                </div>
            </form>
        </div>
        <!-- FINANCE PAYMENT CALCULATOR ENDS -->

        <!-- CASH PAYMENT CALCULATOR STARTS -->
        <div id="widget_popup_payment_tabs_cash" *ngIf="activeTab == 'cash'" class="widget_popup_payment_tab-pane" role="tabpanel" aria-labelledby="widget_popup_payment_tabs_btn_cash">
            <div class="d-flex widget-row" *ngIf="cashdetails && cashdetails.status == 200">
                <div class="widget-col-6">
                    <div class="price-details">Price Details</div>
                    <!-- Price -->
                    <div class="payment-form-row disp-block">
                        <!-- VAuto -->
                        <div class="payOpt__bill payOpt__bill__listprice" *ngIf="cash_has_vauto_dlr_disc && msrp_vin_details_cash != cash_vauto_list_price  && (cash_vauto_upfit == undefined || cash_vauto_upfit =='') &&(is_vauto_vin == 'Y' && price_display_type == 'L')">
                            <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                <div class="">List Price</div>
                            </label>

                            <label class="payOpt__bill__value">{{cash_vauto_list_price | currency:'USD':'symbol':'1.0-0'}}</label>
                        </div>

                        <!-- (click)="dropdownToggle(upfitDropdownCashVauto,1,'','', 'upfitDropdownCashVauto_drop')"-->
                        <div class="payOpt__bill payOpt__bill__listprice payOpt__bill--dropdown" *ngIf="cash_vauto_list_price != '' && cash_vauto_upfit != 0 && cash_vauto_upfit != '' && msrp_vin_details_cash != cash_vauto_list_price ">
                            <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                <div class="">List Price</div>
                                <!-- <span class="payOpt__bill__includes">Includes MSRP, Upfits and Dealer fees</span> -->
                            </label>
                            <label class="payOpt__bill__value">{{cash_vauto_list_price| currency:'USD':'symbol':'1.0-0'}}</label>
                            <!-- <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></span> -->
                        </div>
                        <!-- <div class="upfitDropdownCashVauto_drop payOpt__dropContent_wrap payOpt__dropContent_upfit closeIt" #upfitDropdownCashVauto>
                            <div class="payOpt__dropContent ">
                                <div class="payOpt__checkItem ">
                                    <strong class="payOpt__checkItem__title">MSRP <span>{{cash_vin_msrp |
                                            currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                </div>
                                <div class="payOpt__checkItem ">
                                    <strong class="payOpt__checkItem__title">Upfits<span>{{cash_vauto_upfit |
                                            currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                </div>
                            </div>
                        </div> -->

                        <!-- Max Digital -->
                        <div class="payOpt__bill payOpt__bill__listprice" *ngIf="cash_has_max_digital_dlr_disc && !cash_has_vauto_dlr_disc && cash_vin_msrp != cash_max_list_price">
                            <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                <div class="">List Price</div>
                            </label>
                            <label class="payOpt__bill__value">{{cash_max_list_price | currency:'USD':'symbol':'1.0-0'}}</label>
                        </div>

                        <!-- Ferrario -->
                        <div class="payOpt__bill payOpt__bill__listprice" *ngIf="this.cash_ferrario_list_price != undefined && this.cash_ferrario_list_price != '' && cash_vin_msrp != cash_ferrario_list_price">
                            <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                <div class="">List Price</div>
                            </label>
                            <label class="payOpt__bill__value">{{cash_ferrario_list_price | currency:'USD':'symbol':'1.0-0'}}</label>
                        </div>

                        <!-- Cash Autonation -->
                        <div class="payOpt__bill__listprice" *ngIf="is_autoNationCash_vin == 'Y' && autoNation_CashlistPrice != '' && autoNation_CashlistPrice != undefined && autoNation_CashlistPrice != null && msrp_vin_details != autoNation_CashlistPrice">
                            <div class="payOpt__bill__label payOpt__bill__label--msrp">
                                <div class="">List Price</div>
                            </div>
                            <div class="payOpt__bill__value">{{autoNation_CashlistPrice| currency:'USD':'symbol':'1.0-0'}}</div>
                        </div>

                        <!-- Homenet -->
                        <div class="payOpt__bill payOpt__bill__listprice" *ngIf="cash_homenet_list_price != '' && cash_vin_msrp != cash_homenet_list_price ">
                            <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                <div class="">List Price</div>
                            </label>
                            <label class="payOpt__bill__value">{{cash_homenet_list_price |
                                currency:'USD':'symbol':'1.0-0'}}</label>
                        </div>
                        <!-- <div class="payOpt__bill payOpt__bill__listprice payOpt__bill--dropdown" *ngIf="cash_homenet_list_price != '' && homenet_cache == 'N' " (click)="dropdownToggle(upfitDropdowncashhomenet,1,'','', 'upfitDropdowncashhomenet_drop')">
                            <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                <div class="">List Price</div>
                                <span class="payOpt__bill__includes">Includes MSRP, market Adjustment Cost</span>
                            </label>
                            <label class="payOpt__bill__value">{{cash_homenet_list_price|
                                currency:'USD':'symbol':'1.0-0'}}</label>
                            <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></span>
                        </div>
                        <div class="upfitDropdowncashhomenet_drop payOpt__dropContent_wrap payOpt__dropContent_upfit closeIt" #upfitDropdowncashhomenet>
                            <div class="payOpt__dropContent ">
                                <div class="payOpt__checkItem ">
                                    <strong class="payOpt__checkItem__title">MSRP <span>{{cash_vin_msrp |
                                            currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                </div>
                                <div class="payOpt__checkItem ">
                                    <strong class="payOpt__checkItem__title">Market Adjustment<span>{{homenet_market_adjustment_cost |
                                            currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                </div>
                            </div>
                        </div> -->

                        <!-- DAT List Price-->
                        <div class="payOpt__bill payOpt__bill__listprice" *ngIf="cashupfitflag == 1 && cashupfitstype =='L' && !cash_has_max_digital_dlr_disc && !cash_has_vauto_dlr_disc">
                            <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                <div class="disclaimerTooltip__trigger">List Price<span class="disclaimerTooltip__star" *ngIf="cashupfitsdisclaimer !=''">*</span>
                                    <div class="vTheme__bColor disclaimerTooltip" *ngIf="cashupfitsdisclaimer !=''">
                                        <p class="disclaimerTooltip__msg">{{cashupfitsdisclaimer}}</p>
                                    </div>
                                </div>
                                <span class="payOpt__bill__includes" *ngIf="cashupfitslabel !=''">{{cashupfitslabel}}</span>
                                <span class="payOpt__bill__includes" *ngIf="cashupfitslabel =='' || !cashupfitslabel || cashupfitslabel == null">Includes MSRP,
                                    Upfits and Dealer fees</span>
                            </label>
                            <label class="payOpt__bill__value">{{msrp_cash| currency:'USD':'symbol':'1.0-0'}}</label>
                        </div>

                        <!-- DAT Upfit-->
                        <!-- (click)="dropdownToggle(upfitDropdownch,1,'','', 'upfitDropdownch_drop')"  &&  cashupfitstype =='U' -->

                        <div class="payOpt__bill payOpt__bill__listprice payOpt__bill--dropdown" *ngIf="(cashupfitflag == 1 || cashdiscounttotal > 0)  && cash_homenet_list_price == '' && !cash_has_max_digital_dlr_disc && !cash_has_vauto_dlr_disc  &&  !(is_autoNationCash_vin == 'Y' && autoNationCash_listPrice != '' && autoNationCash_listPrice != null && autoNationCash_listPrice != undefined && msrp_vin_details_cash != autoNationCash_listPrice)">
                            <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                <div class="disclaimerTooltip__trigger">List Price
                                    <span class="disclaimerTooltip__star" *ngIf="dat_cashupfitsdisclaimer !=''">*</span>
                                    <div class="vTheme__bColor disclaimerTooltip" *ngIf="dat_cashupfitsdisclaimer !=''">
                                        <p class="disclaimerTooltip__msg">{{dat_cashupfitsdisclaimer}}</p>
                                    </div>
                                </div>
                                <span class="payOpt__bill__includes" *ngIf="cashupfitslabel !=''">{{cashupfitslabel}}</span>
                                <span class="payOpt__bill__includes" *ngIf="cashupfitslabel =='' || !cashupfitslabel || cashupfitslabel == null">Includes MSRP,
                                    Upfits and Dealer fees</span>
                            </label>
                            <label class="payOpt__bill__value">{{msrp_cash| currency:'USD':'symbol':'1.0-0'}}</label>
                            <!-- <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></span> -->
                        </div>
                        <!-- <div class="upfitDropdownch_drop payOpt__dropContent_wrap payOpt__dropContent_upfit closeIt" #upfitDropdownch>
                            <div class="payOpt__dropContent " *ngIf="cashupfitflag == 1">
                                <div class="payOpt__checkItem ">
                                    <strong class="payOpt__checkItem__title">MSRP <span>{{msrp_vin_details_cash|
                                            currency:'USD':'symbol':'1.0-0'}}</span></strong>
                                </div>
                                <div class="payOpt__checkItem ">
                                    <div><strong class="payOpt__checkItem__title">Upfits<span>{{cashupfitamount|
                                                currency:'USD':'symbol':'1.0-0'}}</span></strong></div>
                                    <div class="payOpt__checkItem__content" *ngFor="let cashupfit of cashupfits">
                                        <label class="customCheckbox">
                                            <span class="customCheckbox_name" id="">{{cashupfit.description}}</span>
                                            <i class="disclaimer_bubble" data-title="{{cashupfit.disclaimer}}" *ngIf="cashupfit.disclaimer != ''">i</i>
                                        </label>

                                        <div class="payOpt__checkItem__price">{{cashupfit.total_price}}</div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <div class="payOpt__bill widget_mb_20" *ngIf="vehicle_type == 'used'">
                            <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                <div class="disclaimerTooltip__trigger">Dealer Price<span class="disclaimerTooltip__star" *ngIf="cashmsrpdisclaimer != null">*</span>
                                    <div class="vTheme__bColor disclaimerTooltip" *ngIf="cashmsrpdisclaimer != null">
                                        <p class="disclaimerTooltip__msg" [innerHTML]="cashmsrpdisclaimer"></p>
                                    </div>
                                </div>
                                (Sticker Price)
                            </label>
                            <label class="payOpt__bill__value">{{dealer_price_cash|
                                currency:'USD':'symbol':'1.0-0'}}</label>
                        </div>

                        <!-- MSRP-->

                        <div class="payOpt__bill widget_mb_20" *ngIf="this.vehicle_type == 'new' && cashupfitflag == 0">
                            <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                <div class="disclaimerTooltip__trigger">MSRP <span class="disclaimerTooltip__star" *ngIf="cashmsrpdisclaimer != null">*</span>
                                    <div class="vTheme__bColor disclaimerTooltip" *ngIf="cashmsrpdisclaimer != null">
                                        <p class="disclaimerTooltip__msg" [innerHTML]="cashmsrpdisclaimer"></p>
                                    </div>
                                </div>
                                (Sticker Price)
                            </label>
                            <label class="payOpt__bill__value" *ngIf="(cash_max_list_price == '' || cash_max_list_price == undefined) && (cash_vauto_list_price == '' || cash_vauto_list_price == undefined)&& (cash_ferrario_list_price == '' || cash_ferrario_list_price == undefined) && (autoNation_CashlistPrice == '' || autoNation_CashlistPrice == undefined)">{{cash_vin_msrp|
                                currency:'USD':'symbol':'1.0-0'}}</label>
                            <label class="payOpt__bill__value" *ngIf="(cash_max_list_price != '' && cash_max_list_price != undefined) || (cash_vauto_list_price != '' && cash_vauto_list_price != undefined)|| (cash_ferrario_list_price != '' && cash_ferrario_list_price != undefined) || (autoNation_CashlistPrice != '' && autoNation_CashlistPrice != undefined)">{{cash_vin_msrp|
                                currency:'USD':'symbol':'1.0-0'}}</label>
                        </div>
                        <div class="payOpt__bill widget_mb_20" *ngIf="cashupfitflag != 0 && !cash_has_max_digital_dlr_disc ">
                            <label class="payOpt__bill__label payOpt__bill__label--msrp">
                                <div class="disclaimerTooltip__trigger">MSRP <span class="disclaimerTooltip__star">*</span>
                                    <div class="vTheme__bColor disclaimerTooltip">
                                        <p class="disclaimerTooltip__msg" [innerHTML]="cashmsrpdisclaimer"></p>
                                    </div>
                                </div>
                                (Sticker Price)
                            </label>
                            <label class="payOpt__bill__value">{{msrp_vin_details_cash|
                                currency:'USD':'symbol':'1.0-0'}}</label>
                        </div>
                    </div>

                    <!-- Zipcode -->
                    <div class="" *ngIf="(customerzipcode !='' || zipcode !='') && cashtaxfeestotal > 0">
                        <mat-form-field appearance="outline" style="width: 100%;" class="mat-mdc-form-field-infix">
                            <mat-label> Enter ZIP Code</mat-label>
                            <input name="zipcode" id="zipcode" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" (change)="invokepupulation($event)" maxlength="5" minlength="4" class="dropdown-calc" value="{{zipcode}}" matInput>
                            <!-- <mat-error class="error" *ngIf="error==1">Please enter valid zipcode</mat-error> -->
                        </mat-form-field>
                        <span class="error error-zip" style="color:red;font-size:12px" *ngIf="error==1">Please enter valid ZIP Code </span>
                    </div>

                    <!-- state and county -->
                    <div class="payment-form-row" *ngIf="countycitylist?.length > 0 && (customerzipcode !='' || zipcode !='') && cashtaxfeestotal > 0 && error==0" style="margin-top:-15px">
                        <div class="payment-input-fields">
                            <mat-form-field appearance="outline" style="width: 100%;">
                                <mat-label>Select your County & City</mat-label>
                                <mat-select class="dropdown-calc" name="countycity" id="countycity" [(value)]="selectedCountyCity" (selectionChange)="onDropdownChange($event)">
                                    <mat-option *ngFor="let data of countycitylist" [value]="data.county_city">
                                        {{data.county_city}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <!-- <div class="form-group">
                    <label class="calc-label">Select your County & City</label>
                    <select class="dropdown-calc" name="countycity" id="countycity" (change)="onDropdownChange($event)">
                        <option *ngFor="let data of countycitylist" value="{{data.county_city}}">
                            {{data.county_city}} </option>
                    </select>
                </div> -->
                    </div>

                    <!-- Zipcode -->
                    <!-- <div class="form-group">
                <label for="zipcode" class="calc-label">Enter Zip Code</label>
                <input aria-hidden="true" name="zipcode" id="zipcode" (change)="invokepupulation($event)" 
                    maxlength="5" minlength="4" class="dropdown-calc" value="{{zipcode}}"
                    />
                <span class="error" *ngIf="error==1">Please enter valid zipcode</span>
            </div> -->

                    <!-- state and county -->
                    <!-- <div  *ngIf="countycitylist?.length > 0">
                <div class="form-group">
                    <label class="calc-label">Select your County & City</label>
                    <select class="dropdown-calc" name="countycity" id="countycity" (change)="onDropdownChange($event)">
                        <option *ngFor="let data of countycitylist" value="{{data.county_city}}">
                            {{data.county_city}} </option>
                    </select>
                </div>
            </div> -->

                    <!-- Trade In -->
                    <div class="payment-form-row" style="margin-top:10px;">
                        <div class="payment-input-fields cash-trade">
                            <mat-form-field appearance="outline" style="width: 100%;">
                                <mat-label> Trade-in Value</mat-label>
                                <input id="trade_in_cash" type="text" [disabled]="cash_lock == 0" (focus)="clearIfZero($event,'tradein')" (blur)="resetIfEmpty($event,'tradein')" [maxLength]=6 (change)="onCheckboxChange_cash($event, 'tradein')" (click)="shiftdigitalevent()" value="{{cashtradein}}" (keypress)="keyPress($event)" matInput>
                            </mat-form-field>
                        </div>
                    </div>

                    <div *ngIf="vehicle_type === 'new'" class="payOpt__bill payOpt__bill--dropdown payOpt__bill--dropdown--open" (click)="dropdownToggle(exploreConditionalOfferCash, conditionalCashDataToShow.length,'cash','conditional-offer', 'exploreConditionalOfferCash')">
                        <div class="payOpt__bill__label">Explore Conditional Offers <i class="disclaimer_bubble" data-title="Please contact dealer for more details." *ngIf="is_homenet_vin_cash == 'Y'">i</i></div>
                        <div class="payOpt__bill__value" *ngIf="!hideConditionalOffterCash && is_homenet_vin_cash == 'N' "><i class="payOpt__bill__value__minus"></i>{{cashconditionaltotal|currency:'USD':'symbol':'1.0-0'}}</div>
                        <span class="down_arrow_svg" *ngIf="conditionalCashDataToShow.length > 0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                            </svg></span>
                    </div>
                    <div class="exploreConditionalOfferCash payOpt__dropContent_wrap" #exploreConditionalOfferCash>
                        <div *ngIf="conditionalCashDataToShow != undefined && conditionalCashDataToShow.length > 0" class="payOpt__dropContent">
                            <div *ngFor="let data of conditionalCashDataToShow" class="incentive-heading">
                                <p class="Checkbox-heading" style="font-weight: bold !important; margin-bottom: 0px!important;" *ngIf="data.name != ' '">{{data.name}}</p>
                                <b class="Checkbox-heading" *ngIf="data.name == ' '"><br></b>
                                <div class="payOpt__checkItem" *ngFor="let condition of data.data">
                                    <div class="payOpt__checkItem__content">
                                        <label class="customCheckbox" [ngClass]="{ 'noCheckbox': hideConditionalOffterCash }">

                                            <input type="checkbox" value="{{condition.programId}}" [checked]="condition.isChecked" (click)="conditionalCheckCash($event, condition.programId)" *ngIf="!hideConditionalOffterCash && is_homenet_vin_cash != 'Y'">
                                            <span [ngClass]="{'customCheckboxStrike': condition.noeligible == true}" class="customCheckbox_name">{{condition.programName}}</span>
                                            <i class="disclaimer_bubble" attr.data-title="{{condition.programRules}}">i</i>
                                        </label>

                                        <div class="payOpt__checkItem__price" [ngClass]="{'customCheckboxStrike': condition.noeligible == true}">{{condition.amount| currency:'USD':'symbol':'1.0-0'}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                <div class="widget-col-6">
                    <!-- Incentive -->
                    <div *ngIf="vehicle_type === 'new'" class="payOpt__bill payOpt__bill--dropdown">
                        <div class="payOpt__bill__label">Incentives <span *ngIf="is_homenet_incentives == false ">&nbsp;Included</span><i class="disclaimer_bubble" data-title="Please contact dealer for more details." *ngIf="is_homenet_vin_cash == 'Y'">i</i></div>
                        <div class="payOpt__bill__value" *ngIf="is_homenet_vin_cash != 'Y'"><i class="payOpt__bill__value__minus"></i>{{cashincentivetotal|
                            currency:'USD':'symbol':'1.0-0'}}</div>
                        <span class="down_arrow_svg" (click)="dropdownToggle(incentiveCash, cashincentivedata.length, 'cash', 'incentive', 'incentiveCash')" *ngIf="cashincentivedata.length > 0 && cashincentivetotal > 0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                            </svg></span>
                    </div>
                    <div class="incentiveCash payOpt__dropContent_wrap closeIt" #incentiveCash>
                        <div *ngIf="cashincentivedata != undefined && cashincentivedata.length > 0" class="payOpt__dropContent">
                            <div *ngFor="let data of cashincentivedata">
                                <div class="payOpt__checkItem payOpt__dropContent_due">
                                    <div class="payOpt__checkItem__content">
                                        <!-- <label class="customCheckbox">
                              <input type="checkbox"
                                  value="{{data.programId}}" [checked]="data.checked == 1"
                                  (click)="incentiveCheckCash($event, data.programId)">
                             
                          </label> -->
                                        <!-- <span class="customCheckbox_name" [ngClass]="{'hideIncentive' : data.checked == -1}">{{data.programName}}</span> -->
                                        <label class="customCheckbox">
                                            <span class="customCheckbox_name" [ngClass]="{'hideIncentive' : data.checked == -1}">{{data.programName}}</span>
                                            <i class="disclaimer_bubble" attr.data-title="{{data.programRules}}">i</i>
                                        </label>


                                        <div class="payOpt__checkItem__price">{{data.amount| currency:'USD':'symbol':'1.0-0'}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Conditional Offer -->
                    <div>
                        <div *ngIf="!hideConditionalOffter && is_homenet_vin_cash == 'N' && vehicle_type == 'new' " class="payOpt__bill payOpt__bill--dropdown">
                            <div class="payOpt__bill__label">Conditional Offers</div>
                            <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{cashconditionaltotal|currency:'USD':'symbol':'1.0-0'}}</div>
                        </div>
                    </div>

                    <!-- Dealer Discount -->
                    <div *ngIf="isDealerDiscountNormalVisible">
                        <div class="payOpt__bill--dropdown" (click)="dropdownToggle(cashdealerDropdown,cashdiscountdata.length,'cash','dealer-discount', 'cashdealerDropdown_drop')" *ngIf="(viewoffer == 0 || cash_has_vauto_dlr_disc || cash_has_max_digital_dlr_disc || cash_has_ferrario_dlr_disc == true|| cash_has_homenet_dlr_disc == true) && cashdiscounttotal > 0" [className]="cashdiscountdata.length > 0 && !cash_has_vauto_dlr_disc ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'">
                            <div class="payOpt__bill__label" *ngIf="is_homenet_vin_cash != 'Y'">Dealer Discount</div>
                            <div class="payOpt__bill__label" *ngIf="is_homenet_vin_cash == 'Y'">Dealer Discount/Bonus <i class="disclaimer_bubble" data-title="Please contact dealer for more details.">i</i></div>
                            <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{cashdiscounttotal|
                                currency:'USD':'symbol':'1.0-0'}}</div>
                            <span class="down_arrow_svg" *ngIf="cashdiscountdata.length > 0 && !cash_has_vauto_dlr_disc"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                </svg></span>
                        </div>
                    </div>
                    <div *ngIf="isDealerDiscountBoldVisible">
                        <div class="payOpt__bill--dropdown" (click)="dropdownToggle(cashdealerDropdown,cashdiscountdata.length,'cash','dealer-discount', 'cashdealerDropdown_drop')" *ngIf="(viewoffer == 0 || cash_has_vauto_dlr_disc || cash_has_max_digital_dlr_disc || cash_has_ferrario_dlr_disc == true|| cash_has_homenet_dlr_disc == true) && cashdiscounttotal > 0" [className]="cashdiscountdata.length > 0 && !cash_has_vauto_dlr_disc ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'">
                            <div class="payOpt__bill__label"><b class="discountbold">Dealer Discount</b></div>
                            <div class="payOpt__bill__value"><b class="discountbold"><i class="payOpt__bill__value__minus"></i>{{cashdiscounttotal|
                                    currency:'USD':'symbol':'1.0-0'}}</b></div>
                            <span class="down_arrow_svg" *ngIf="cashdiscountdata.length > 0 && !cash_has_vauto_dlr_disc"><b class="discountbold"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                    </svg></b></span>
                        </div>
                    </div>

                    <div class="cashdealerDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_discount closeIt" #cashdealerDropdown>
                        <div class="payOpt__dropContent" *ngIf="cashdiscountdata.length > 0">
                            <div class="payOpt__checkItem" *ngFor="let disc of cashdiscountdata">
                                <div class="payOpt__checkItem__content">
                                    <label class="customCheckbox">
                                        <span class="customCheckbox_name">{{disc.discount_name}}</span>
                                        <i class="disclaimer_bubble" data-title="{{disc.discount_disclaimer}}">i</i>
                                    </label>
                                    <div class="payOpt__checkItem__price"> {{disc.discount_amount|
                                        currency:'USD':'symbol':'1.0-0'}}</div>
                                    <!-- <div class="payOpt__checkItem__price" *ngIf="disc.discount_amount.indexOf('%') == -1">
                                        {{disc.discount_amount|
                                        currency:'USD':'symbol':'1.0-0'}}</div>
                                    <div class="payOpt__checkItem__price" *ngIf="disc.discount_amount.indexOf('%') > -1">
                                        {{disc.discount_amount}}</div> -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Dealer Cash Upfits -->
                    <div class="payOpt__bill--dropdown" *ngIf="cashupfitamount !=  '' && cashupfitamount != 0 && cashupfitamount != undefined && is_autoNationCash_vin != 'Y' && is_homenet_vin_cash == 'N'" [className]="cashupfitamount !=  '' && cashupfitamount != 0 && cashupfitamount != undefined ? 'payOpt__bill payOpt__bill--dropdown' : 'payOpt__bill payOpt__bill'">
                        <label class="payOpt__bill__label">Dealer Upfit</label>
                        <label class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{cashupfitamount|
                            currency:'USD':'symbol':'1.0-0'}}</label>
                        <span class="down_arrow_svg" (click)="dropdownToggle(cashupfitDropdown, cashupfits.length, 'cash', 'upfits', 'cashupfitDropdown_drop')" *ngIf="cashupfits.length > 0 "><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                            </svg></span>
                    </div>
                    <div class="cashupfitDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_discount closeIt" #cashupfitDropdown>
                        <div class="payOpt__dropContent" *ngIf="cashupfits.length > 0">
                            <div class="payOpt__checkItem__content" *ngFor="let cashupfit of cashupfits">
                                <label class="customCheckbox">
                                    <span class="customCheckbox_name">{{cashupfit.description}}</span>
                                    <i class="disclaimer_bubble" attr.data-title="{{cashupfit.upfit_disclaimer}}" *ngIf="cashupfit.disclaimer != ''">i</i>
                                </label>

                                <div class="payOpt__checkItem__price">{{cashupfit.total_price}}</div>
                            </div>
                        </div>
                    </div>

                    <!-- Autonation Upfits Cash -->
                    <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="autoNationCash_upfits != '' && autoNationCash_upfits != undefined && autoNationCash_upfits != 0 && price_display_type !== 'M'">
                        <div class="payOpt__bill_label">Dealer Accessories</div>
                        <div class="payOpt__bill__value">{{autoNationCash_upfits}}</div>
                    </div>
                    <!-- Homenet Upfits Finance -->
                    <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="is_homenet_vin_cash == 'Y' && homenet_market_adjustment_cost != undefined && homenet_market_adjustment_cost != '' ">
                        <div class="payOpt__bill_label">Dealer Upfits <i class="disclaimer_bubble" data-title="Please contact dealer for more details.">i</i></div>
                        <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>${{homenet_market_adjustment_cost}}</div>
                    </div>

                    <!-- trade-in -->
                    <div class="payOpt__bill payOpt__bill--dropdown">
                        <div class="payOpt__bill__label">Trade-in</div>
                        <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>${{cashtradein}}</div>
                    </div>

                    <!--Service and protection starts-->
                    <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(spCDropdown,'3','cash',cashdetails?.payload_service_protection?.total_sp, 'spCDropdown_drop')" *ngIf="cashserviceprotection?.length > 0">
                        <div class="payOpt__bill__label">Service
                            & Protection Plans</div>
                        <div class="payOpt__bill__value">
                            <i class="payOpt__bill__value__minus"></i>{{cashdetails?.payload_service_protection?.total_sp|
                            currency:'USD':'symbol':'1.2-2'}}
                        </div>
                        <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                            </svg></span>
                    </div>
                    <div class="spCDropdown_drop payOpt__dropContent_wrap closeIt  payOpt__dropContent_due" #spCDropdown>
                        <div class="payOpt__dropContent" *ngIf="cashserviceprotection?.length > 0">
                            <div class="payOpt__checkItem">
                                <div class="payOpt__checkItem__content" *ngFor="let serviceprotection of cashserviceprotection">
                                    <label class="customCheckbox">
                                        <span class="customCheckbox_name" id="">{{serviceprotection.fee_type.toLowerCase( )}}</span>
                                    </label>
                                    <div class="payOpt__checkItem__price">{{serviceprotection.Amount|
                                        currency:'USD':'symbol':'1.2-2'}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--Service and protection ends-->

                    <!-- Accessories -->
                    <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="cash_payload_mopar_accessries != undefined && cash_payload_mopar_accessries.length > 0" (click)="dropdownToggle(cashAccessoriesDropdown, cash_payload_mopar_accessries.length,'cash','mopar', 'cashAccessoriesDropdown_drop')">
                        <div class="payOpt__bill__label">Accessories</div>
                        <div class="payOpt__bill__value"><i class="payOpt__bill__value__minus"></i>{{cash_mopar_accessries_total|
                            currency:'USD':'symbol':'1.2-2'}}</div>
                        <span class="down_arrow_svg" *ngIf="cash_payload_mopar_accessries != undefined && cash_payload_mopar_accessries.length > 0"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                            </svg></span>
                    </div>
                    <div class="cashAccessoriesDropdown_drop payOpt__dropContent_wrap closeIt" #cashAccessoriesDropdown>
                        <div *ngIf="cash_payload_mopar_accessries != undefined && cash_payload_mopar_accessries.length > 0" class="payOpt__dropContent">
                            <div class="payOpt__checkItem" *ngFor="let mopar of cash_payload_mopar_accessries">
                                <div class="payOpt__checkItem__content">
                                    <label class="customCheckbox">
                                        <input type="checkbox" name="lease_mopar" id="{{mopar.part_no}}" value="{{mopar.part_no}}" [checked]="mopar.checked==undefined || !mopar.checked" (click)="onCheckboxChange_cash($event, 'mopar', mopar.part_no);" (click)="shiftdigitalevent()">
                                        <span id="li_{{mopar.part_no}}" class="customCheckbox_name">{{mopar.title}}</span>
                                        <!-- <div id="li_{{mopar.id}}" *ngIf="mopar.checked == -1">{{mopar.title}}</div> -->
                                    </label>
                                    <!-- <i class="disclaimer_bubble" data-title='Ball Mount Adapter is designed for a 2 Hitch Receiver and allows a 2.75" rise or 4" drop in ball position. The adapter features a 1" ball shank, is 9" long and is rated to handle up to a 6,000 lb load and 600 lb of tongue weight.'>i</i> -->


                                    <div class="payOpt__checkItem__price">{{mopar.msrp|
                                        currency:'USD':'symbol':'1.2-2'}}</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Accessories -->
                    <div class="payOpt__bill payOpt__bill--dropdown" *ngIf="cash_dlr_accessories != '' && cash_dlr_accessories != undefined">
                        <div class="payOpt__bill__label">Accessories</div>
                        <div class="payOpt__bill__value">{{cash_dlr_accessories | currency:'USD':'symbol':'1.0-0'}}</div>
                    </div>

                    <!--  Taxes and Fees Section -->
                    <div class="payOpt__bill payOpt__bill--dropdown payOpt__bill__taxesfee" (click)="dropdownToggle(taxfeeCDropdown,'2','Cash','', 'taxfeeCDropdown_drop')" *ngIf="cashtaxfeestotal > 0 ">
                        <div class="payOpt__bill__label">
                            <span *ngIf="taxesFinEnable == 'Y'">Taxes & Fees <i class="tax_fees_bubble disclaimer_bubble" data-title="Sales tax applicable as per the respective state, city of the dealership or where you will register the vehicle. May include the first-year state registration fees for your new car, collected by the dealer; Documentation fee charged by the dealer, to prepare the sales contract">i</i></span>
                            <span *ngIf="taxesFinEnable != 'Y'"> Dealer Fees <i class="disclaimer_bubble" data-title="Sales tax applicable as per the respective state, city of the dealership or where you will register the vehicle. May include the first-year state registration fees for your new car, collected by the dealer; Documentation fee charged by the dealer, to prepare the sales contract">i</i></span>
                            <br /><span *ngIf="customerzipcode !=''" class="zipcode-dummy">ZIP Code</span>
                        </div>
                        <div class="payOpt__bill__value">
                            <i class="payOpt__bill__value__minus"></i>{{cashtaxfeestotal|
                            currency:'USD':'symbol':'1.2-2'}}
                        </div>
                        <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                            </svg></span>
                    </div>
                    <!-- <div *ngIf="(customerzipcode !='' || zipcode !='') && cashtaxfeestotal > 0" class="zipcode-edit">
         <span>Zip Code {{customerzipcode||zipcode}}<span class="down_arrow_svg" title="Edit"
                 (click)="estimatepopupFn('zip');">edit</span></span>
     </div> -->
                    <div class="taxfeeCDropdown_drop payOpt__dropContent_wrap payOpt__dropContent_taxfee closeIt" #taxfeeCDropdown>
                        <div class="payOpt__dropContent">
                            <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(taxCDropdown,'3','Cash','taxes', 'taxCDropdown_drop')" *ngIf="cashtaxdetails?.length > 0">
                                <div class="payOpt__bill__label">Taxes</div>
                                <div class="payOpt__bill__value">
                                    <i class="payOpt__bill__value__minus"></i>{{cashdetails?.payload_taxes?.feedetails?.total|
                                    currency:'USD':'symbol':'1.2-2'}}
                                </div>
                                <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                    </svg></span>
                            </div>
                            <div class="taxCDropdown_drop payOpt__dropContent_wrap closeIt" #taxCDropdown>
                                <div class="payOpt__dropContent" *ngIf="cashtaxdetails?.length > 0">
                                    <div class="payOpt__checkItem">
                                        <div class="payOpt__checkItem__content" *ngFor="let tax of cashtaxdetails">
                                            <label class="customCheckbox">
                                                <span class="customCheckbox_name" id="">{{tax.FeeName}}
                                                    <span class="customCheckbox_name_sub" id="" *ngIf="tax.FeeDescription != null && tax.FeeDescription !='Title Fee' ">({{tax.FeeDescription}})</span>
                                                </span>
                                            </label>
                                            <div class="payOpt__checkItem__price">{{tax.Amount| currency:'USD':'symbol':'1.2-2'}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="payOpt__bill payOpt__bill--dropdown" (click)="dropdownToggle(feeCDropdown,'3','cash','Fees', 'feeCDropdown_drop')" *ngIf="cashfeesdetails?.length > 0">
                                <div class="payOpt__bill__label">Fees</div>
                                <div class="payOpt__bill__value">
                                    <i class="payOpt__bill__value__minus"></i>{{cashdetails?.payload_fees?.total_fees|
                                    currency:'USD':'symbol':'1.2-2'}}
                                </div>
                                <span class="down_arrow_svg"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M7 10L12 15L17 10" stroke="#F2B54A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                    </svg></span>
                            </div>

                            <div class="feeCDropdown_drop payOpt__dropContent_wrap closeIt" #feeCDropdown>
                                <div class="payOpt__dropContent" *ngIf="cashfeesdetails?.length > 0">
                                    <div class="payOpt__checkItem">
                                        <div class="payOpt__checkItem__content" *ngFor="let fees of cashfeesdetails">
                                            <label class="customCheckbox">
                                                <span class="customCheckbox_name" id="">{{fees.fee_type}}</span>
                                                <i class="disclaimer_bubble" attr.data-title="{{fees.Disclaimer}}" *ngIf="fees.Disclaimer != null ">i</i>
                                            </label>

                                            <div class="payOpt__checkItem__price">{{fees.Amount|
                                                currency:'USD':'symbol':'1.2-2'}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Disclaimer -->
                    <div class="disclaimer-content">
                        <div class="downpaymenterror" *ngIf="(cashmonthlycost <= 0 || cashmonthlycostxdiscount <= 0)"><b>Trade-in value is higher than the price of the vehicle. You may be eligible to receive an amount from the dealer. Your dealer will confirm the final pricing based on the incentives, discounts, trade-in value and taxes & fees.</b> </div>

                        
                 

                        <div class="lease-total-price" *ngIf="cashserviceprotection?.length <= 0">
                             
                            <!-- max -->
                            <span class="widget_calc_final_price" *ngIf="viewoffer==0 && !cash_has_vauto_dlr_disc && !cash_has_ferrario_dlr_disc == true  && cash_homenet_list_price == ''">{{cashmonthlycost|currency:'USD':'symbol':'1.0-0'}}
                                <sup><i *ngIf="taxesFinEnable == 'Y'" class="disclaimer_bubble" data-title="*Estimated Net Price includes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>
                                <sup><i *ngIf="taxesFinEnable == 'N'" class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>
                                <!-- <sup>
                                 <i *ngIf="estimated_net_price_disclaimer" class="disclaimer_bubble" [attr.data-title]="estimated_net_price_disclaimer">i</i>
                                 </sup> -->
                            </span>
                            <span class="widget_calc_final_price" *ngIf="viewoffer==1 && !cash_has_vauto_dlr_disc && !cash_has_ferrario_dlr_disc == true  && cash_homenet_list_price == ''">{{cashmonthlycostxdiscount|currency:'USD':'symbol':'1.0-0'}}
                                <sup><i class="disclaimer_bubble"  data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>
                            </span>
                            <!-- vauto -->
                            <span class="widget_calc_final_price" *ngIf="cash_has_vauto_dlr_disc && !cash_has_ferrario_dlr_disc && cash_homenet_list_price == ''">{{cashmonthlycost|currency:'USD':'symbol':'1.0-0'}}
                                <sup><i *ngIf="taxesEnable == 'Y'" class="disclaimer_bubble" data-title="*Estimated Net Price includes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>
                                <sup><i *ngIf="taxesEnable == 'N'" class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>
                            </span>
                            <!-- ferrario-->
                            <span class="widget_calc_final_price" *ngIf="cash_has_ferrario_dlr_disc  && cash_homenet_list_price == ''">{{cashmonthlycost|currency:'USD':'symbol':'1.0-0'}}
                                <sup><i *ngIf="taxesFinEnable == 'Y'" class="disclaimer_bubble" data-title="*Estimated Net Price includes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>
                                <sup><i *ngIf="taxesFinEnable == 'N'" class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>
                            </span>
                            <!-- homenet -->
                            <span class="widget_calc_final_price" *ngIf="cash_homenet_list_price != '' ">{{cashmonthlycost|currency:'USD':'symbol':'1.0-0'}}
                                <sup><i *ngIf="taxesEnable == 'Y'" class="disclaimer_bubble" data-title="*Estimated Net Price includes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>
                                <sup><i *ngIf="taxesEnable == 'N'" class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup>
                            </span>
                            <div class="widget_calc_final_sub">Estimated Net Price</div>
                            
                        </div>

                        <div class="lease-total-price" *ngIf="cashserviceprotection?.length > 0">
                            <span class="widget_calc_final_price" *ngIf="viewoffer==0 && !cash_has_vauto_dlr_disc && !cash_has_ferrario_dlr_disc == true && cash_homenet_list_price == ''">{{cashmonthlycost|currency:'USD':'symbol':'1.0-0'}}<sup><i class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup></span>
                            <span class="widget_calc_final_price" *ngIf="viewoffer==1 && !cash_has_vauto_dlr_disc && !cash_has_ferrario_dlr_disc == true && cash_homenet_list_price == ''">{{cashmonthlycostxdiscount|
                                currency:'USD':'symbol':'1.0-0'}}<sup><i class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup></span>
                            <span class="widget_calc_final_price" *ngIf="cash_has_vauto_dlr_disc && cash_has_ferrario_dlr_disc != true && cash_homenet_list_price == ''">Est.Net Price{{cashmonthlycost|currency:'USD':'symbol':'1.0-0'}}<sup><i class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup></span>
                            <span class="widget_calc_final_price" *ngIf="cash_has_ferrario_dlr_disc == true && cash_homenet_list_price == ''">{{cashmonthlycost|currency:'USD':'symbol':'1.0-0'}}<sup><i class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup></span>
                            <span class="widget_calc_final_price" *ngIf="cash_homenet_list_price != '' ">{{cashmonthlycost|currency:'USD':'symbol':'1.0-0'}}<sup><i class="disclaimer_bubble" data-title="*Estimated Net Price excludes, taxes, title and registration fees. Price refers to selected vehicle, including destination charge. Pricing and offers may change at any time without notification. To get full pricing details, see your dealer.">i</i></sup></span>
                            <div class="widget_calc_final_sub">Estimated Net Price</div>
                        </div>
                        <!-- <div class="disclaimer-text disclimerfont" *ngIf="(cashdisclaimertext != null || cashdisclaimertext != '' ) && !showFullDescriptioncash" [innerHTML]="fnSliceDisclaimer(cashdisclaimertext, 'cash')"></div>
                        <div class="disclaimer-text disclimerfont" *ngIf="(cashdisclaimertext == null || cashdisclaimertext == '' )&& !showFullDescriptioncash" [innerHTML]="fnSliceDisclaimer(cashdisclaimertextwithouttaxesandfee, 'cash')"></div> -->

                        <div class="disclaimer-text disclimerfont" *ngIf="(cashdisclaimertext != null && cashdisclaimertext != '' ) " [innerHTML]="cashdisclaimertext "></div>
                        <div class="disclaimer-text disclimerfont" *ngIf="(cashdisclaimertext == null || cashdisclaimertext == '') " [innerHTML]="cashdisclaimertextwithouttaxesandfee"></div>

                        <!-- <a class="showmore" (click)="toggleDescriptioncash()">{{ showFullDescriptioncash ? 'Show less' : '...Show more' }}</a> -->
                    </div>

                </div>


            </div>
            <!-- CASH PAYMENT CALCULATOR ENDS -->
        </div>
        <!-- need to take this div -->
        <!-- <div class="button-wrapper">
    <div class="view-offer">
        <span class="btn-shadow"></span>
        <button class="view-offers-btn" *ngIf="viewoffer == 1 && cashdiscounttotal == 0 && financediscounttotal == 0 && discounttotal == 0" (click)="submittodealer('cash');">
            <b>View available offers</b><span>From your dealer</span> <span class="down_arrow_svg">
                arrow_forward_ios
                </span>
        </button>
    </div>
 
    
</div> -->
    </div>
</div>
<!--   PAYMENT CALCULATOR for Desktop Ends -->